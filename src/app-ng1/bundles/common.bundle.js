webpackJsonp([0],[function(e,exports,t){e.exports=t(1)},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),t(2);var i=t(131),s=n(i),a=t(133),o=n(a),r=t(135),l=n(r),u=t(137),c=n(u),d=t(139),p=n(d),g=t(141),f=n(g),v=t(143),h=n(v);t(144);var m=t(145),b=n(m);t(147);var y=t(148),_=n(y),S=t(150),M=n(S),w=t(152),k=n(w),x=t(185),T=n(x),D=t(153),O=n(D),E=t(189),A=n(E),R=t(191),C=n(R),P=t(200),I=n(P),q=t(201),N=n(q),j=t(206),F=n(j),L=t(227),B=n(L),H=t(254),U=n(H),z=t(259),W=n(z),Q=t(261),Y=n(Q),G=t(278),K=n(G),J=t(280),V=n(J),X=t(282),Z=n(X),ee=t(285),te=n(ee),ne=t(296),ie=n(ne),se=t(307),ae=n(se),oe=t(308),re=n(oe),le=t(336),ue=n(le),ce=t(338),de=n(ce),pe=t(383),ge=n(pe),fe=t(553),ve=n(fe),he=t(556),me=n(he),be=t(559),ye=n(be),_e=t(562),Se=n(_e),Me="ct.ui.router.extras",we="ui.bootstrap",ke=s["default"].module("commonApp",[p["default"],l["default"],c["default"],f["default"],o["default"],h["default"],Me,b["default"],we,O["default"],A["default"],C["default"],M["default"],B["default"],U["default"],_["default"],k["default"],N["default"],I["default"],T["default"],W["default"],F["default"],Y["default"],V["default"],K["default"],Z["default"],te["default"],ie["default"],ae["default"],re["default"],ue["default"],de["default"],ge["default"],ve["default"],me["default"],Se["default"],ye["default"]]).config(["$interpolateProvider","$locationProvider","$resourceProvider",function(e,t,n){"ngInject";e.startSymbol("{[{"),e.endSymbol("}]}"),t.hashPrefix(""),n.defaults.stripTrailingSlashes=!1}]).run(["$cookies","QueryString",function(e,t){"ngInject";void 0!==t.sourceid&&""!==t.sourceid&&void 0===e.get("sourceid")&&e.put("sourceid",t.sourceid,{path:"/"})}]);exports["default"]=ke.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t(3);var i=t(103),s=n(i),a=t(104),o=n(a),r=t(126),l=n(r);t(127),t(128),window.jQuery=window.$=s["default"],(0,o["default"])(s["default"]),s["default"].fn.velocity=l["default"]},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=t(4),s=n(i),a=t(22),o=n(a);t(60),t(92),t(93),t(97),t(101),window.matchMedia||(window.matchMedia=function(){var e=window.styleMedia||window.media;return e||!function(){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0];t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n);var i="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle;e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===i.width}}}(),function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(){if(!window.matchMedia||!window.matchMedia("all").addListener){var e=window.matchMedia,t=e("only all").matches,n=!1,i=0,a=[],r=function(){clearTimeout(i),i=setTimeout(function(){for(var t=0,n=a.length;t<n;t++){var i=a[t].mql,r=a[t].listeners||[],l=e(i.media).matches;if(l!==i.matches){i.matches=l;var u=!0,c=!1,d=void 0;try{for(var p,g=(0,o["default"])(r);!(u=(p=g.next()).done);u=!0){var f=p.value;(0,s["default"])(f,window,[i])}}catch(v){c=!0,d=v}finally{try{!u&&g["return"]&&g["return"]()}finally{if(c)throw d}}}}},30)};window.matchMedia=function(i){var s=e(i),o=[],l=0;return s.addListener=function(e){t&&(n||(n=!0,window.addEventListener("resize",r,!0)),0===l&&(l=a.push({mql:s,listeners:o})),o.push(e))},s.removeListener=function(e){for(var t=0,n=o.length;t<n;t++)o[t]===e&&o.splice(t,1)},s}}}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i,s,o,r){"ngInject";var l=this,u=a["default"].element(i);l.labels=s.i18n.cookie_confirm,l.appContext=o,n(function(){s.homeSections&&o.device.isMobile?u.on("scroll",function(){l.displayConfirm||(l.displayConfirm=r.enableCookieConfirm&&!t.get("termsaccepted")),e.$digest()}):l.displayConfirm=r.enableCookieConfirm&&!t.get("termsaccepted")},1e3),l.accept=function(){var e=new Date;e.setTime(e.getTime()+31536e6),t.put("termsaccepted",1,{expires:e.toGMTString(),path:"/"}),l.displayConfirm=!1,s.homeSections&&o.device.isMobile&&u.off("scroll")}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s),o=t(149),r=n(o);i.$inject=["$scope","$cookies","$timeout","$window","applicationData","appContextSrv","configService"];var l=function(){"ngInject";return{restrict:"A",replace:!0,controller:"cookieConfirmCtrl",controllerAs:"cookieConfirm",template:r["default"],scope:{}}},u=a["default"].module("cookieConfirm",[]).controller("cookieConfirmCtrl",i).directive("cookieConfirm",l);exports["default"]=u.name},function(e,exports){e.exports='<div class=ng-cloak> <div class="cookie-confirm swipeleft" ng-if=cookieConfirm.displayConfirm> <p> {[{ ::cookieConfirm.labels.cookie_confirm_text }]} <a href="{[{ ::cookieConfirm.appContext.siteLanguage }]}/about/cookies/">{[{ ::cookieConfirm.labels.cookie_confirm_more }]} </a> </p> <button class="btn btn-mini btn-primary" ng-click=cookieConfirm.accept()>{[{ ::cookieConfirm.labels.cookie_confirm_accept }]} </button> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i,s,a){"ngInject";e.appCtx=i,e.appData=s,e.personIconLink=s.opigramEnabled?"/opi/user/notifications":i.siteLanguage+"/account/",e.enableHorizontalLoginRegisterButtons=a.enableHorizontalLoginRegisterButtons,e.exitCallback=function(){var i="",a=t.absUrl();a.indexOf("/account/login/")!==-1||a.indexOf("/opi/myfeed")!==-1||s.homeSections?(i=s.opigramEnabled?"/opi/landing":s.homeSections?s.loggedInUrl:"/account/",n.location.href=[t.protocol(),"://",location.host,i].join("")):e.closeLoginTooltip()}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s),o=t(103),r=n(o),l=t(151),u=n(l);i.$inject=["$scope","$location","$window","appContextSrv","applicationData","configService"];var c=function(e,t){"ngInject";return{restrict:"A",replace:!0,controller:"loginBoxCtrl",template:u["default"],scope:!0,link:function(n,i){var s=a["default"].element(".login-tooltip",i),o=!1;n.appData.initialUserLoggedIn||t.remove("ygoRememberSection",{path:"/"}),n.toggleLoginTooltip=function(e){if(e.stopPropagation(),!n.appCtx.device.isMobile){n.appCtx.mobileBrowser.any()&&(0,r["default"])("body").off().on("click",function(){n.closeLoginTooltip()}),e.preventDefault(),o?n.closeLoginTooltip():(s.velocity("fadeIn"),o=!0);var t=Math.ceil((0,r["default"])(".login-btn-wrapper").offset().left),i=(0,r["default"])(".login-tooltip").width()/2+40,a=window.innerWidth;a<t+i?s.addClass("out-of-bounds"):s.removeClass("out-of-bounds")}},n.closeLoginTooltip=function(){!o||a["default"].element("input",i).is(":focus")||i.is(":hover")||(s.velocity("fadeOut",{complete:function(){n.$broadcast("loginTooltipClosed")}}),o=!1)},i.on("focusout",function(){e(function(){n.closeLoginTooltip()},500)})}}};c.$inject=["$timeout","$cookies"];var d=a["default"].module("loginBox",[]).controller("loginBoxCtrl",i).directive("loginBox",c);exports["default"]=d.name},function(e,exports){e.exports='<div class=login-box ng-class="{\'horizontal\':enableHorizontalLoginRegisterButtons}"> <div ng-hide=appCtx.isLoggedIn class="login-box-unauthenticated ng-cloak"> <div class=login-btn-wrapper ng-mouseleave=closeLoginTooltip()> <a ng-href="{[{ ::appCtx.siteLanguage }]}/account/login/" ng-click=toggleLoginTooltip($event) class="btn btn-secondary">{[{ ::appData.i18n.login.header }]}</a> <div class="login-tooltip ng-cloak" ng-hide=appCtx.device.isMobile> <div class=login-tooltip-container> <div class=tip></div> <div login-question standalone=login callback-done=exitCallback()></div> </div> </div> </div> <a ng-href="{[{ ::appCtx.siteLanguage }]}/account/register/" class="btn btn-primary">{[{ ::appData.i18n.login.join }]}</a> </div> <div ng-show=appCtx.isLoggedIn class="login-box-authenticated ng-cloak"> <a ng-if=appCtx.user.avatar href=/opi/profile ng-style="{\'background-image\': \'url(\' + appCtx.user.avatar + \')\'}" class=login-box-avatar></a> <a href="{[{ personIconLink }]}" class="svgi icon-notifications-people hidden-xs hidden-sm"> <div ng-if=appCtx.user.notifications.unread class=badge>{[{ appCtx.user.notifications.unread }]}</div> </a> <a ng-href="{[{ ::appCtx.siteLanguage }]}/account/" class="logins-box-points hidden-xs hidden-sm">{[{ appCtx.user.points | numberAbbr }]}</a> <a ng-href="{[{ ::appCtx.siteLanguage }]}/account/logout/" class=logins-box-logout>{[{ ::appData.i18n.login.logout }]}</a> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i){"ngInject";function s(){var e=d.title||a["default"].element("h2").text()||"";return e.replace(/<\/?[^>]+(>|$)/g,"")}var o=this,r=600,l=300,u=(screen.width-r)/2,c=(screen.height-l)/2,d=e.shareBox||{},p="http://www.facebook.com/sharer.php?u=%url%",g="https://plus.google.com/share?url=%url%",f="https://twitter.com/share?url=%url%&text=%title%",v="mailto:?body=%title%%0D%0A%0D%0A%url%",h="https://www.linkedin.com/shareArticle?mini=true&url=%url%&title=%title%",m="http://www.reddit.com/submit?url=%url%&title=%title%",b=["toolbar=no","location=no","directories=no","status=no","menubar=no","scrollbars=no","resizable=no","copyhistory=no","width="+r,"height="+l,"top="+c,"left="+u].join(","),y=function(e,n){t.open(e,"",n)},_=function(e,t){i.gaq&&i.gaq.namespace&&ga("send","event",i.gaq.namespace,e,t)},S=function(){return encodeURIComponent(d.link||n.absUrl())};o.shareIconType=e.shareIconType,o.displayEmail=void 0!==e.displayEmail&&e.displayEmail,o.displayLinkedIn=void 0!==e.displayLinkedIn&&e.displayLinkedIn,o.displayReddit=void 0!==e.displayReddit&&e.displayReddit,o.displayTwitter=void 0===e.displayTwitter||e.displayTwitter,o.displayGooglePlus=void 0===e.displayGooglePlus||e.displayGooglePlus,o.displayFacebook=void 0===e.displayFacebook||e.displayFacebook,o.shareOnFacebook=function(e){e.preventDefault();var t=p.replace("%url%",S());y(t,b),_("Facebook",t)},o.shareOnTwitter=function(e){e.preventDefault();var t=f.replace("%url%",S()).replace("%title%",s());y(t,b),_("Twitter",t)},o.shareOnLinkedIn=function(e){e.preventDefault();var t=h.replace("%url%",S()).replace("%title%",s());y(t,b),_("LinkedIn",t)},o.shareOnReddit=function(e){e.preventDefault();var t=m.replace("%url%",S()).replace("%title%",s());y(t,b),_("Reddit",t)},o.shareOnGooglePlus=function(e){e.preventDefault();var t=g.replace("%url%",S());y(t,b),_("GooglePlus",t)},o.sendEmail=function(e){e.preventDefault();var t=v.replace("%url%",S()).replace("%title%",s());y(t,b),_("Email",t)}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s),o=t(153),r=n(o),l=t(184),u=n(l);i.$inject=["$scope","$window","$location","applicationData"];var c=function(){"ngInject";return{restrict:"A",replace:!0,controller:"shareBoxCtrl",controllerAs:"share",template:u["default"],scope:{shareBox:"=",shareIconType:"@",displayEmail:"<",displayLinkedIn:"<",displayReddit:"<",displayTwitter:"<",displayGooglePlus:"<",displayFacebook:"<"}}},d=a["default"].module("shareBox",[r["default"]]).controller("shareBoxCtrl",i).directive("shareBox",c);exports["default"]=d.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(137),o=n(a),r=t(154),l=n(r),u=t(162),c=n(u),d=t(163),p=n(d),g=t(164),f=n(g),v=t(165),h=n(v),m=t(166),b=n(m),y=t(167),_=n(y),S=t(168),M=n(S),w=t(169),k=n(w),x=t(170),T=n(x),D=t(171),O=n(D),E=t(174),A=n(E),R=t(180),C=n(R),P=t(181),I=n(P),q=t(182),N=n(q),j=t(183),F=n(j),L=s["default"].module("Utils",[o["default"]]).service("appContextSrv",l["default"]).provider("applicationData",c["default"]).factory("debounce",p["default"]).service("disqus",f["default"]).factory("i18n",h["default"]).service("imagePreloaderSrv",b["default"]).directive("limitedText",_["default"]).filter("numberAbbr",M["default"]).directive("onReturnKey",k["default"]).factory("QueryString",T["default"]).service("storageManagerSrv",O["default"]).service("timingService",A["default"]).filter("tplReplace",C["default"]).directive("trackLink",I["default"]).factory("resourceInterceptor",N["default"]).filter("truncateWords",F["default"]);exports["default"]=L.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i){"ngInject";function s(){h.user={}}function o(e){h.isEmbedded=e}function l(){i.opigramEnabled?b.query({},function(n){if(n.error)s();else{h.isLoggedIn=!0,(0,a["default"])(h.user,n);var i=[p()];h.device.isMobile&&i.push(g()),e.all(i).then(function(){h.device.isMobile&&(h.user.mobileNotificationBadge=h.user.availableSurveysCount+h.user.notifications.unread)}),d(),t.$broadcast("loginStatusUpdate")}},s):d().$promise.then(function(){h.isLoggedIn=!0,t.$broadcast("loginStatusUpdate")},s)}function c(e){h.user.avatar=e}function d(){return y.query({},function(e){h.user.points=e.points},r["default"].noop)}function p(){return _.query({},function(e){h.user.notifications=e},r["default"].noop).$promise}function g(){var e=0;return h.user.availableSurveysCount=0,S.query({type:e},function(e){e&&e.events&&(h.user.availableSurveysCount=e.events.length)},r["default"].noop).$promise}function f(){var e=null,t={uk:[1,53],us:[54],de:[52],dk:[63],se:[65],fi:[62],no:[64],fr:[66],cn:[67,86],id:[69,78],th:[70,79],sg:[71,80,81],hk:[72,82],my:[73,83,84],au:[74],ph:[75,85],mena:[76,77],vn:[87]},n="";if(h.siteId)for(var i in t)if(e=t[i],e.indexOf(h.siteId)!==-1){n=i;break}h.country=n}function v(e){switch(e){case"xs-mobile":h.device.isXSMobile=!0,h.device.isMobile=!0,h.device.isTablet=!1,h.device.isSmallDesktop=!1,h.device.isDesktop=!1;break;case"mobile":h.device.isXSMobile=!1,h.device.isMobile=!0,h.device.isTablet=!1,h.device.isSmallDesktop=!1,h.device.isDesktop=!1;break;case"tablet":h.device.isXSMobile=!1,h.device.isTablet=!0,h.device.isMobile=!1,h.device.isSmallDesktop=!1,h.device.isDesktop=!1;break;case"small-desktop":h.device.isXSMobile=!1,h.device.isTablet=!1,h.device.isMobile=!1,h.device.isSmallDesktop=!0,h.device.isDesktop=!1;break;default:h.device.isXSMobile=!1,h.device.isTablet=!1,h.device.isMobile=!1,h.device.isSmallDesktop=!1,h.device.isDesktop=!0}t.$$phase||t.$apply()}var h=this,m=i.siteLanguage?"/"+i.siteLanguage:"",b=n("/opi/user/json_info/",{},{query:{method:"POST",params:{}}}),y=n(m+"/api/yguser_data/?cacheBuster=:cacheBuster",{},{query:{method:"GET",params:{cacheBuster:Date.now()}}}),_=n("/opi/user/notifications/count",{},{query:{method:"POST"}}),S=n(m+"/account/feed_data/?type=:type&cacheBuster=:cacheBuster",{},{query:{method:"GET",params:{type:"@type",cacheBuster:Date.now()},isArray:!1}});(0,a["default"])(h,{appName:"opigram",isEmbedded:!1,siteLanguage:m,isLoggedIn:i.initialUserLoggedIn||!1,siteId:i.siteId||null,user:{},setEmbedded:o,setAvatar:c,checkLoggedIn:l,getPoints:d,isEnquireEnabled:void 0===i.isEnquireEnabled||i.isEnquireEnabled,mobileBrowser:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}},device:{screenXs:i.devices.screenXs||480,screenSm:i.devices.screenSm||768,screenMd:i.devices.screenMd||992,screenLg:i.devices.screenLg||1060}});try{r["default"].module("opigramApp")}catch(M){h.appName="cumulus"}l(),f(),h.isEnquireEnabled&&u["default"].register("screen and (max-width:"+(h.device.screenXs-1)+"px)",{match:function(){v("xs-mobile")}}).register("screen and (min-width: "+h.device.screenXs+"px)  and (max-width:"+(h.device.screenSm-1)+"px)",{match:function(){v("mobile")}}).register("screen and (min-width: "+h.device.screenSm+"px) and (max-width: "+(h.device.screenMd-1)+"px)",{match:function(){v("tablet")}}).register("screen and (min-width: "+h.device.screenMd+"px) and (max-width: "+(h.device.screenLg-1)+"px)",{match:function(){v("small-desktop")}}).register("screen and (min-width:"+h.device.screenLg+"px)",{match:function(){v("desktop")}})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s),o=t(131),r=n(o),l=t(161),u=n(l);i.$inject=["$q","$rootScope","$resource","applicationData"],exports["default"]=i},,,,,,,,function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(){var e=null;this.setExpectedSurvey=function(t){e=t},this.getExpectedSurvey=function(){return e},this.$get=["$window","i18n",function(t,n){"ngInject";var i=window.angular_data,s={gaq:i.gaq,labels:i.config,homeDotsData:i.home_dots_data||[],i18n:n,rtl:i.rtl,opigramEnabled:void 0===i.opigramEnabled||i.opigramEnabled,enableLocalStorage:i.enableLocalStorage||!1,opinionDescriptors:i.opinion_descriptors||[],opinionsData:i.opinions_data||[],user:{avatarUrl:i.avatar_full_url||""},responses:{getCssClassByLevel:function(e){return!!i.response_buttons[e]&&i.response_buttons[e].css_class},getLabelByLevel:function(e){return i.response_buttons[e]?i.response_buttons[e].label:""},getResponseButtonsAsArray:function(){var e=[];return a["default"].forEach(i.response_buttons,function(t){switch(t.level){case 2:t.label=n.general.stronglyAgree;break;case 1:t.label=n.general.mildlyAgree;break;case-1:t.label=n.general.mildlyDisagree;break;case-2:t.label=n.general.stronglyDisagree}e.push(t)}),e}}};return i.disqus_shortname&&(s.disqusShortname=i.disqus_shortname),i.likeboxes&&(s.likeboxes=i.likeboxes),i.report_to_yougov&&(s.reportToYougov=i.report_to_yougov),i.sequence&&(s.sequence={uuid:i.sequence.uuid,showOpinions:i.sequence.show_opinions}),i.thing&&(s.thing=i.thing),t.location.href.indexOf("/opi/profile")>-1&&(s.profile={isOwn:i.is_own_profile||!1,id:i.profile_id||!1,avatarUrl:i.avatar_full_url||"",showWelcomeMsg:i.show_welcome_message||!1,welcomeMsg:i.welcome_message}),i.connections&&(s.connections=i.connections),i.home&&(s.home=i.home,s.home.getExpectedSurvey=function(){return e}),i.loginRegister&&(s.loginRegister=i.loginRegister),s.offCanvas=i.offCanvas||{},s.devices=i.devices||{},s.miniSurvey=i.mini_survey||{},s.showSocialMediaIcons=void 0===i.show_social_media_icons||i.show_social_media_icons,void 0!==i.isEnquireEnabled&&(s.isEnquireEnabled=i.isEnquireEnabled),i.initial_user_logged_in&&(s.initialUserLoggedIn=i.initial_user_logged_in),i.available_surveys&&(s.availableSurveys=i.available_surveys),i.ratings_stats&&(s.ratingsStats=i.ratings_stats),i.thing_subpage_urls&&(s.thingSubpageUrls=i.thing_subpage_urls),i.ratings_count&&(s.ratingsCount=i.ratings_count),i.siteId&&(s.siteId=i.siteId),i.thingThumbnailPath&&(s.thingThumbnailPath=i.thingThumbnailPath),i.elections_helpers&&(s.electionsHelpers=i.elections_helpers),i.home_sections&&(s.homeSections=i.home_sections),s.electionDay=i.election_day||0,i.logged_in_url&&(s.loggedInUrl=i.logged_in_url),i.map&&(s.map=i.map),i.survey_results&&(s.surveyResults=i.survey_results),i.languages&&(s.languages=i.languages),i.registration_accept_terms_type&&(s.registrationAcceptTermsType=i.registration_accept_terms_type),i.relatedThings&&(s.relatedThings=i.relatedThings),i.registration_popup&&(s.registerPopup=i.registration_popup),i.articleWidgets&&(s.articleWidgets=i.articleWidgets),i.site_language&&(s.siteLanguage=i.site_language),s}]}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s);exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(4),s=n(i),a=function(e,t){"ngInject";return function(n,i,a){var o=void 0,r=e.defer();return function(){for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=this,p=function(){o=null,a||(r.resolve((0,s["default"])(n,d,u)),r=e.defer())},g=a&&!o;return o&&t.cancel(o),o=t(p,i),g&&(r.resolve((0,s["default"])(n,d,u)),r=e.defer()),r.promise}}};a.$inject=["$q","$timeout"],exports["default"]=a},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){"ngInject";var n=!0;this.set=function(i,s){console.assert(null!=i&&null!=s,"USAGE: disqus.set(id, url)"),n?(e.disqus_shortname=t.disqusShortname,e.disqus_identifier=i,e.disqus_url=s,a["default"].getScript("https://"+t.disqusShortname+".disqus.com/embed.js"),n=!1):e.DISQUS.reset({reload:!0,config:function(){this.page.identifier=i,this.page.url=s}})}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(103),a=n(s);i.$inject=["$window","applicationData"],exports["default"]=i},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return window.angular_data.i18n||{}};exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){"ngInject";(0,a["default"])(this,{loadImage:function(t){var n=e.defer();if(t){var i=document.createElement("img");i.onload=function(){n.resolve()},i.src=t}else n.resolve();return n.promise}})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s);i.$inject=["$q"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=function(){"ngInject";return{restrict:"A",scope:{content:"=limitedText",moreLabel:"@?"},template:'{[{ text }]} <button ng-if="content.reminder" ng-click="moreButtonClicked()"\n                                        class="btn btn-inline">{[{ moreButtonLabel }]}</button>',controller:["$scope","$attrs",function(e,t){function n(){s["default"].isObject(e.content)?e.text=e.content.teaser:e.text=e.content}if(!e.content)throw new Error("Limited Text directive: undefined text parameter");e.moreButtonLabel=s["default"].isDefined(t.moreLabel)?e.moreLabel:"(...)",e.$watch("content",n),e.moreButtonClicked=function(){e.text+=e.content.reminder,e.content.reminder=null},n()}]}};exports["default"]=a},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(e){"ngInject";return function(t,n){var i=t;if(e.enableHeaderPointsAbbreviation){var s=Math.pow(10,n||0),a=Math.floor(((""+t).length-1)/3);i=Math.floor(t*s/Math.pow(10,3*a)+.5)/s+("kMGTPE"[a-1]||"")}return i}};t.$inject=["configService"],exports["default"]=t},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){"ngInject";return function(e,t,n){t.on("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.onReturnKey,{ev:t})}),t.preventDefault())})}};exports["default"]=t},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(e){"ngInject";for(var t={},n=e.location.search.substring(1),i=n.split("&"),s=0;s<i.length;s++){var a=i[s].split("=");"undefined"==typeof t[a[0]]?t[a[0]]=a[1]:"string"==typeof t[a[0]]?t[a[0]]=[t[a[0]],a[1]]:t[a[0]].push(a[1])}return t};t.$inject=["$window"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){"ngInject";(0,r["default"])(this,{save:function(t,n){try{e.localStorage.setItem(t,(0,a["default"])(n))}catch(i){return!1}},get:function(t){return JSON.parse(e.localStorage.getItem(t)||"false")}})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(172),a=n(s),o=t(155),r=n(o);i.$inject=["$window"],exports["default"]=i},,,function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=function(){function e(){"ngInject";(0,s["default"])(this,e)}return(0,o["default"])(e,[{key:"isValid",value:function(e){return e&&this.getCurrentTimestamp()<=e}},{key:"getExpirationTime",value:function(e,t){return t||(t=this.getCurrentTimestamp()),t+36e5*e}},{key:"getCurrentTimestamp",value:function(){return Date.now()}}]),e}();exports["default"]=r},,,,,,function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){"ngInject";return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.replace(/%s/g,function(){return n.shift()||""})}};exports["default"]=t},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t,n){n.href&&t.on("click",function(e){e.preventDefault(),ga("send","event","outbound","click",n.href,{hitCallback:function(){document.location=n.href}})})}return{restrict:"AC",link:e}};exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=function(e){"ngInject";var t=function(t){var n=Math.floor(t.status/100);if(n===-1)return e.reject(new Error("Aborted request"));if(4===n||5===n)return e.reject(new Error("["+t.status+"]"+("string"==typeof t.data?" "+t.data:"")));if(!t.data)return null;var i=s["default"].fromJson(t.data);return i.error?e.reject(new Error(i.message)):t.resource};return{response:t,responseError:t}};a.$inject=["$q"],exports["default"]=a},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){"ngInject";return function(e,t){if(isNaN(t))return e;if(t<=0)return"";if(e){var n=e.split(/\s+/);n.length>t&&(e=n.slice(0,t).join(" ")+" (…)")}return e}};exports["default"]=t},function(e,exports){e.exports='<div class=share-box> <ul class=social-bookmarks> <li ng-if=share.displayEmail><a href=# ng-click=share.sendEmail($event) class="pull-left email" target=_blank><span class="svgi icon-email {[{ share.shareIconType }]}"></span></a></li> <li ng-if=share.displayFacebook> <a href=# class="pull-left facebook" ng-click=share.shareOnFacebook($event) target=_blank><span class="svgi icon-facebook {[{ share.shareIconType }]}"></span></a> </li> <li ng-if=share.displayTwitter> <a href=# class="pull-left twitter" ng-click=share.shareOnTwitter($event) target=_blank><span class="svgi icon-twitter {[{ share.shareIconType }]}"></span></a> </li> <li ng-if=share.displayGooglePlus> <a href=# class="pull-left googleplus" ng-click=share.shareOnGooglePlus($event) target=_blank><span class="svgi icon-googleplus {[{ share.shareIconType }]}"></span></a> </li> <li ng-if=share.displayLinkedIn> <a href=# class="pull-left linkedin" ng-click=share.shareOnLinkedIn($event) target=_blank><span class="svgi icon-linkedin {[{ share.shareIconType }]}"></span></a> </li> <li ng-if=share.displayReddit> <a href=# ng-click=share.shareOnReddit($event) class="pull-left reddit" target=_blank><span class="svgi icon-reddit {[{ share.shareIconType }]}"></span></a> </li> </ul> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(186),o=n(a),r=t(188),l=n(r),u=s["default"].module("slideBox",[]).controller("slideBoxController",o["default"]).component("slideBox",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){"ngInject";function i(e){l||(e.isBeginning?e.lockSwipeToPrev():e.unlockSwipeToPrev(),e.isEnd?e.lockSwipeToNext():e.unlockSwipeToNext())}function s(e){o.onSlideChangeStart({slideIndex:e.activeIndex})}var o=this,r=null,l=!1;this.$onInit=function(){n(function(){r=new a["default"](t,{initialSlide:o.initialSlide||0,spaceBetween:10,centeredSlides:!0,observer:!0,pagination:t.parents(".widget").find(".swiper-pagination"),onInit:function(e){s(e)},onSliderMove:i,onTransitionStart:function(){l=!0},onTransitionEnd:function(){l=!1},onSlideChangeStart:s})},0,!1),e.$on("slides.changeTo",function(e,t){r&&(r.unlockSwipeToNext(),r.slideTo(t))}),e.$on("$destroy",function(){r&&r.destroy()})}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(187),a=n(s);i.$inject=["$scope","$element","$timeout"],exports["default"]=i},,function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t={bindings:{onSlideChangeStart:"&",initialSlide:"@"},controller:"slideBoxController",transclude:!0,template:'<div class="swiper-wrapper" ng-transclude></div>'};exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(153),o=n(a),r=t(190),l=n(r),u=s["default"].module("offCanvas",[o["default"]]).controller("offCanvasController",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){"ngInject";function i(t){e.showCanvas(t),u.removeClass("hidden"),u.on("touchmove scroll",c),e.$digest()}function s(t){e.hideCanvas(t),u.addClass("hidden"),u.off("touchmove scroll",c),e.$digest()}function o(t){e.offCanvas.isNavOpened?s(t):i(t)}var l={screenSm:t.offCanvas.screenSm||768,screenLg:t.offCanvas.screenLg||1059},u=(0,a["default"])(".exit-off-canvas"),c=function(e){e.preventDefault(),e.stopPropagation()};e.offCanvas={isNavOpened:!(!t.offCanvas||void 0===t.offCanvas.isNavOpened)&&t.offCanvas.isNavOpened},e.appContext=n,e.showCanvas=function(t){t&&(t.preventDefault(),t.stopPropagation()),e.offCanvas.isNavOpened=!0},e.hideCanvas=function(t){t&&(t.preventDefault(),t.stopPropagation()),e.offCanvas.isNavOpened=!1},(0,a["default"])(document).on("click",".left-off-canvas-toggle-phone",o),(0,a["default"])(document).on("click",".left-off-canvas-hide-phone",s),r["default"].register("screen and (max-width: "+(l.screenSm-1)+"px)",{match:function(){e.hideCanvas(),e.$$phase||e.$digest()}}).register("screen and (min-width: "+l.screenSm+"px) and (max-width: "+l.screenLg+"px)",{match:function(){e.hideCanvas(),e.$$phase||e.$digest()}}).register("screen and (min-width: "+(l.screenLg+1)+"px)",{match:function(){e.offCanvas.isNavOpened=!(!t.offCanvas||void 0===t.offCanvas.isNavOpened)&&t.offCanvas.isNavOpened,e.$$phase||e.$digest()}})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(103),a=n(s),o=t(161),r=n(o);i.$inject=["$scope","applicationData","appContextSrv"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){"ngInject";var i=n.country||"",s=t.i18n.siteChooser,a=t.languages,o={uk:{top:187,left:335,label:s.countries.uk,link:"yougov.co.uk"},us:{top:245,left:150,label:s.countries.us,link:"today.yougov.com"},fr:{top:238,left:324,label:s.countries.fr,link:"yougov.fr"},no:{top:156,left:342,label:s.countries.no,link:"yougov.no"},se:{top:134,left:424,label:s.countries.se,link:"yougov.se"},dk:{top:188,left:405,label:s.countries.dk,link:"yougov.dk"},fi:{top:160,left:448,label:s.countries.fi,link:"yougov.fi"},de:{top:214,left:395,label:s.countries.de,link:"yougov.de"},mena:{top:268,left:437,label:s.countries.mena,link:"mena.yougov.com"},china:{top:255,left:583,label:s.countries.china,link:"china.yougov.com"},asia_pacific:{top:310,left:620,label:s.countries.asia_pacific,link:"ap.yougov.com"}},r=function(e){void 0!==o[e]&&(o[e].active=!0)};return r(i),{currentSite:i,availableSites:o,labels:s,languages:a,showSelector:function(){e.loadDirective(f["default"],{},"lg")}}}function s(e,t){"ngInject";e.chooser=t}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(131),o=n(a),r=t(192),l=n(r),u=t(194),c=n(u),d=t(198),p=n(d),g=t(199),f=n(g);s.$inject=["$scope","siteChooserSrv"],i.$inject=["Lightbox","applicationData","appContextSrv"];var v=function(){
"ngInject";return{restrict:"A",replace:!0,priority:1,controller:"siteChooserCtrl",template:p["default"],scope:{withFlag:"@?"}}},h=o["default"].module("siteChooser",[l["default"],c["default"]]).service("siteChooserSrv",i).controller("siteChooserCtrl",s).directive("siteChooser",v);exports["default"]=h.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){"ngInject";e.boxContainer.setHeader(t.i18n.siteChooser.header),e.boxContainer.ready(),e.chooser=n}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s),o=t(193),r=n(o);i.$inject=["$scope","applicationData","siteChooserSrv"];var l=function(){"ngInject";return{restrict:"A",replace:!0,controller:"siteSelectorCtrl",template:r["default"],scope:{boxContainer:"="}}},u=a["default"].module("siteSelector",[]).controller("siteSelectorCtrl",i).directive("siteSelector",l);exports["default"]=u.name},function(e,exports){e.exports='<div class=site-selector> <div class="site-selector-map svgi icon-global-map"> <a ng-repeat="site in chooser.availableSites" class="site-selector-item btn" ng-href="https://{[{ site.link }]}" ng-style="{top: site.top + \'px\', left: site.left + \'px\'}" ng-class="{active: site.active}" ng-bind-html=site.label></a> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(195),o=n(a),r=t(196),l=n(r),u=s["default"].module("languageSelector",[]).controller("languageSelectorController",o["default"]).directive("languageSelector",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){"ngInject";function i(){s.toggleLSTooltip=function(e){e.stopPropagation(),e.preventDefault(),s.isLSTooltipVisible?s.closeLSTooltip():(o.velocity("fadeIn"),s.isLSTooltipVisible=!0)},s.closeLSTooltip=function(){s.isLSTooltipVisible&&!e.is(":hover")&&(o.velocity("fadeOut"),s.isLSTooltipVisible=!1)},e.on("focusout",function(){t(function(){s.closeLSTooltip()},500)})}var s=this,o=a["default"].element(".ls-tooltip",e);s.appData=n,s.selectedLanguage=n.languages[0].name,s.selectedLanguageShort=n.languages[0].shortName,s.isLSTooltipVisible=!1,i()}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s);i.$inject=["$element","$timeout","applicationData"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(103),s=n(i),a=t(197),o=n(a),r=function(e){"ngInject";function t(t,n){e(function(){var e=n.width();(0,s["default"])(".language-selector .ls-tooltip").css("left",e/2-120)},0,!1)}var n={controller:"languageSelectorController",controllerAs:"vm",link:t,restrict:"AE",template:o["default"],replace:!0,scope:{}};return n};r.$inject=["$timeout"],exports["default"]=r},function(e,exports){e.exports='<div class=language-selector> <button class="btn btn-xs lang" ng-click=vm.toggleLSTooltip($event)> <span class=language-name>{[{::vm.selectedLanguage}]}</span> <span class=language-short-name>{[{::vm.selectedLanguageShort}]}</span> </button> <div class=ls-tooltip ng-mouseleave=vm.closeLSTooltip()> <div class=tip></div> <div class=ls-header> {[{::vm.appData.i18n.siteChooser.languagesHeader}]} </div> <div class=ls-inner-content> <div class=ls-language-list> <a ng-repeat="language in vm.appData.languages track by $index" ng-href={[{::language.url}]}>{[{::language.name}]}</a> </div> </div> </div> </div> '},function(e,exports){e.exports='<div class=site-chooser-container> <button class="btn btn-xs lang ng-cloak" ng-click=chooser.showSelector()> <span ng-if=!withFlag>{[{ ::chooser.currentSite | uppercase }]}</span> <span ng-if=withFlag> <span>{[{ ::chooser.labels.currentSite[chooser.currentSite] }]}</span> <span class="svgi icon-flag-{[{ ::chooser.currentSite }]}" ng-class="{\'multi-lang\': chooser.languages}"></span> </span> </button> <div ng-if=chooser.languages language-selector></div> </div> '},function(e,exports){e.exports="<div site-selector box-container=boxContainer></div> "},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i){"ngInject";function s(){if(!r["default"].equals(h.types,{})){var e={types:h.types};o(),m.save({},e,r["default"].noop)}}function o(){h={types:{}},l()}function l(){n.save(v,h)}function u(e,t){return e.timestamp-t.timestamp}function c(e){var t=!1;return r["default"].forEach(h.types[e.type],function(n,i){e.uuid===n.uuid&&(t=i)}),t}function d(){r["default"].forEach(h.types,function(e,t){p(t)})}function p(e){h.types[e]=h.types[e].filter(function(e){return i.isValid(i.getExpirationTime(g,e.timestamp))})}var g=3,f={survey:100,responseLevel:200},v="anonymousAnswersSrv",h=n.get(v),m=t("/opi/myfeed/save_cached_answers",{},{save:{method:"POST",params:{}}});h||o(),e.$on("loginStatusUpdate",s),(0,a["default"])(this,{save:function(e){if(!e.type)throw new Error("Anonymous answers service - no type provided in save()");if(!e.uuid)throw new Error("Anonymous answers service - no uuid provided in save()");var t=c(e);h.types[e.type]||(h.types[e.type]=[]),e.timestamp=i.getCurrentTimestamp(),t!==!1?h.types[e.type].splice(t,1):h.types[e.type].length>=f[e.type]&&h.types[e.type].shift(),h.types[e.type].push(e),l()},getAll:function(){var e=[];return d(),l(),r["default"].forEach(h.types,function(t){e=e.concat(t)}),e.sort(u)},getType:function(e){if(!h.types[e])return[];var t=[];return p(e),l(),h.types[e]&&(t=h.types[e].slice(0)),t.sort(u)},clear:o})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s),o=t(131),r=n(o),l=t(137),u=n(l);i.$inject=["$rootScope","$resource","storageManagerSrv","timingService"];var c=r["default"].module("anonymousAnswers",[u["default"]]).service("anonymousAnswersSrv",i);exports["default"]=c.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(137),o=n(a),r=t(202),l=n(r),u=t(203),c=n(u),d=t(204),p=n(d),g=s["default"].module("availableSurveys",[o["default"]]).service("availableSurveysSrv",l["default"]).controller("availableSurveysCtrl",c["default"]).directive("availableSurveys",p["default"]);exports["default"]=g.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=function(){function e(t,n){"ngInject";(0,s["default"])(this,e),this.$resource=t,this.appContextSrv=n,this.availableSurveysResource=t(this.appContextSrv.siteLanguage+"/account/feed_data/?type=:type&cacheBuster=:cacheBuster",{},{query:{method:"GET",params:{type:"@type",cacheBuster:Date.now()},isArray:!1}})}return e.$inject=["$resource","appContextSrv"],(0,o["default"])(e,[{key:"getAvailableSurveys",value:function(e,t,n){return this.availableSurveysResource.query({type:e},t,n)}}]),e}();exports["default"]=r},function(e,exports){"use strict";function t(e,t,n,i,s,a){"ngInject";function o(){r.displayLoader=!0,n.getAvailableSurveys(l,function(t){r.displayLoader=!1,t&&t.events?e.limit?(r.displayMore=t.events.length>e.limit,r.data=t.events.splice(0,e.limit)):r.data=t.events:r.data=[]},function(){r.displayLoader=!1,r.data=[]})}var r=this,l=0,u=t.NUMBER_FORMATS.CURRENCY_SYM||"";r.appContextSrv=s,r.labels=i.i18n.available_surveys,r.moreUrl=i.availableSurveys&&i.availableSurveys.more_url||"",r.labels.currency=a.enableCurrency?[u,u,u].join(""):"",o()}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$scope","$locale","availableSurveysSrv","applicationData","appContextSrv","configService"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(205),s=n(i),a=function(){"ngInject";return{restrict:"A",replace:!0,controller:"availableSurveysCtrl",controllerAs:"availableSurveys",template:s["default"],scope:{limit:"@"}}};exports["default"]=a},function(e,exports){e.exports='<div class="available-surveys box-component box-component-small" ng-show="!availableSurveys.appContextSrv.device.isMobile || availableSurveys.appContextSrv.device.isMobile && availableSurveys.data.length > 0"> <div class=box-heading><strong>{[{ ::availableSurveys.labels.currency }]}</strong> {[{ ::availableSurveys.labels.header }]}</div> <div class=box-content> <div ng-repeat="survey in availableSurveys.data" class="clearfix available-survey"> <div class="pngi icon-available-survey pull-left"></div> <div class="available-survey-info pull-left"> <a href="{[{ ::survey.url }]}" target=_blank>{[{ ::survey.desc }]}</a> <span class=event-date>{[{ ::availableSurveys.labels.live_since }]} {[{ ::survey.date }]}</span> <div class=take-survey><a href="{[{ survey.url }]}" target=_blank>{[{ ::availableSurveys.labels.take_the_survey }]}</a></div> </div> </div> <div class=mini-loader ng-show=availableSurveys.displayLoader></div> <div class=no-surveys ng-if="availableSurveys.data.length === 0"> <strong>{[{ ::availableSurveys.labels.no_surveys_message }]}</strong> <p>{[{ ::availableSurveys.labels.no_surveys_description }]}</p> </div> </div> <div class=box-footer ng-if=availableSurveys.displayMore> <a href="{[{ ::availableSurveys.moreUrl }]}" class=box-footer-more>{[{ ::availableSurveys.labels.more }]}</a> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(207),o=n(a),r=s["default"].module("config",[],["$provide",function(e){"ngInject";function t(e){e+="";var t=e.indexOf(".");return t==-1?0:e.length-t-1}function n(e,n){var i=n;void 0===i&&(i=Math.min(t(e),3));var s=Math.pow(10,i),a=(e*s|0)%s;return{v:i,f:a}}function i(e,t){if(0===t)return{w:0,t:0};for(;t%10===0;)t/=10,e--;return{w:e,t:t}}function s(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["vorm.","nachm."],DAY:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],ERANAMES:["v. Chr.","n. Chr."],ERAS:["v. Chr.","n. Chr."],FIRSTDAYOFWEEK:0,MONTH:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],SHORTDAY:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],SHORTMONTH:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],WEEKENDRANGE:[5,6],fullDate:"EEEE, d. MMMM y",longDate:"d. MMMM y",medium:"dd.MM.y HH:mm:ss",mediumDate:"dd.MM.y",mediumTime:"HH:mm:ss","short":"dd.MM.yy HH:mm",shortDate:"dd.MM.yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"€",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"de-de",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function a(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["am","pm"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:0,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd/MM/y HH:mm",shortDate:"dd/MM/y",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"£",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤-",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-gb",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function o(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤-",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function r(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],ERANAMES:["f.Kr.","e.Kr."],ERAS:["f.Kr.","e.Kr."],FIRSTDAYOFWEEK:0,MONTH:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],SHORTDAY:["søn.","man.","tir.","ons.","tor.","fre.","lør."],SHORTMONTH:["jan.","feb.","mar.","apr.","maj","jun.","jul.","aug.","sep.","okt.","nov.","dec."],WEEKENDRANGE:[5,6],fullDate:"EEEE 'den' d. MMMM y",longDate:"d. MMMM y",medium:"dd/MM/y HH.mm.ss",mediumDate:"dd/MM/y",mediumTime:"HH.mm.ss","short":"dd/MM/yy HH.mm",shortDate:"dd/MM/yy",shortTime:"HH.mm"},NUMBER_FORMATS:{CURRENCY_SYM:"kr",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"da-dk",pluralCat:function(e,t){var s=0|e,a=n(e,t),o=i(a.v,a.f);return 1==e||0!=o.t&&(0==s||1==s)?C.ONE:C.OTHER}})}function l(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["ap.","ip."],DAY:["sunnuntaina","maanantaina","tiistaina","keskiviikkona","torstaina","perjantaina","lauantaina"],ERANAMES:["ennen Kristuksen syntymää","jälkeen Kristuksen syntymän"],ERAS:["eKr.","jKr."],FIRSTDAYOFWEEK:0,MONTH:["tammikuuta","helmikuuta","maaliskuuta","huhtikuuta","toukokuuta","kesäkuuta","heinäkuuta","elokuuta","syyskuuta","lokakuuta","marraskuuta","joulukuuta"],SHORTDAY:["su","ma","ti","ke","to","pe","la"],SHORTMONTH:["tammikuuta","helmikuuta","maaliskuuta","huhtikuuta","toukokuuta","kesäkuuta","heinäkuuta","elokuuta","syyskuuta","lokakuuta","marraskuuta","joulukuuta"],WEEKENDRANGE:[5,6],fullDate:"cccc d. MMMM y",longDate:"d. MMMM y",medium:"d.M.y H.mm.ss",mediumDate:"d.M.y",mediumTime:"H.mm.ss","short":"d.M.y H.mm",shortDate:"d.M.y",shortTime:"H.mm"},NUMBER_FORMATS:{CURRENCY_SYM:"€",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"fi-fi",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function u(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["a.m.","p.m."],DAY:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],ERANAMES:["f.Kr.","e.Kr."],ERAS:["f.Kr.","e.Kr."],FIRSTDAYOFWEEK:0,MONTH:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],SHORTDAY:["søn.","man.","tir.","ons.","tor.","fre.","lør."],SHORTMONTH:["jan.","feb.","mar.","apr.","mai","jun.","jul.","aug.","sep.","okt.","nov.","des."],WEEKENDRANGE:[5,6],fullDate:"EEEE d. MMMM y",longDate:"d. MMMM y",medium:"d. MMM y HH.mm.ss",mediumDate:"d. MMM y",mediumTime:"HH.mm.ss","short":"dd.MM.y HH.mm",shortDate:"dd.MM.y",shortTime:"HH.mm"},NUMBER_FORMATS:{CURRENCY_SYM:"kr",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤ -",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"no-no",pluralCat:function(e,t){return 1==e?C.ONE:C.OTHER}})}function c(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["iđitbeaivet","eahketbeaivet"],DAY:["sotnabeaivi","vuossárga","maŋŋebárga","gaskavahkku","duorasdat","bearjadat","lávvardat"],ERANAMES:["ovdal Kristtusa","maŋŋel Kristtusa"],ERAS:["o.Kr.","m.Kr."],FIRSTDAYOFWEEK:0,MONTH:["ođđajagemánnu","guovvamánnu","njukčamánnu","cuoŋománnu","miessemánnu","geassemánnu","suoidnemánnu","borgemánnu","čakčamánnu","golggotmánnu","skábmamánnu","juovlamánnu"],SHORTDAY:["sotn","vuos","maŋ","gask","duor","bear","láv"],SHORTMONTH:["ođđj","guov","njuk","cuo","mies","geas","suoi","borg","čakč","golg","skáb","juov"],WEEKENDRANGE:[5,6],fullDate:"y MMMM d, EEEE",longDate:"y MMMM d",medium:"y MMM d HH:mm:ss",mediumDate:"y MMM d",mediumTime:"HH:mm:ss","short":"y-MM-dd HH:mm",shortDate:"y-MM-dd",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"kr",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"se-se",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function d(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ERANAMES:["公元前","公元"],ERAS:["公元前","公元"],FIRSTDAYOFWEEK:6,MONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],SHORTDAY:["周日","周一","周二","周三","周四","周五","周六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],WEEKENDRANGE:[5,6],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"y年M月d日 ah:mm:ss",mediumDate:"y年M月d日",mediumTime:"ah:mm:ss","short":"yy/M/d ah:mm",shortDate:"yy/M/d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"¥",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤ ",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"zh-hans-cn",pluralCat:function(e,t){return C.OTHER}})}function p(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"dd/MM/y h:mm a",shortDate:"dd/MM/y",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"¥",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-cn",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function g(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],ERANAMES:["avant Jésus-Christ","après Jésus-Christ"],ERAS:["av. J.-C.","ap. J.-C."],FIRSTDAYOFWEEK:0,MONTH:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],SHORTDAY:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],SHORTMONTH:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],WEEKENDRANGE:[5,6],fullDate:"EEEE d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd/MM/y HH:mm",shortDate:"dd/MM/y",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"€",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"fr-fr",pluralCat:function(e,t){var n=0|e;return 0==n||1==n?C.ONE:C.OTHER}})}function f(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],ERANAMES:["Sebelum Masehi","M"],ERAS:["SM","M"],FIRSTDAYOFWEEK:6,MONTH:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],SHORTDAY:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],SHORTMONTH:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],WEEKENDRANGE:[5,6],fullDate:"EEEE, dd MMMM y",longDate:"d MMMM y",medium:"d MMM y HH.mm.ss",mediumDate:"d MMM y",mediumTime:"HH.mm.ss","short":"dd/MM/yy HH.mm",shortDate:"dd/MM/yy",shortTime:"HH.mm"},NUMBER_FORMATS:{CURRENCY_SYM:"Rp",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"id-id",pluralCat:function(e,t){return C.OTHER}})}function v(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"dd/MM/y h:mm a",shortDate:"dd/MM/y",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"Rp",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-id",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function h(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["ก่อนเที่ยง","หลังเที่ยง"],DAY:["วันอาทิตย์","วันจันทร์","วันอังคาร","วันพุธ","วันพฤหัสบดี","วันศุกร์","วันเสาร์"],ERANAMES:["ปีก่อนคริสต์ศักราช","คริสต์ศักราช"],ERAS:["ปีก่อน ค.ศ.","ค.ศ."],FIRSTDAYOFWEEK:6,MONTH:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],SHORTDAY:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],SHORTMONTH:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],WEEKENDRANGE:[5,6],fullDate:"EEEEที่ d MMMM G y",longDate:"d MMMM G y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"d/M/yy HH:mm",shortDate:"d/M/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"฿",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"th-th",pluralCat:function(e,t){return C.OTHER}})}function m(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"dd/MM/y h:mm a",shortDate:"dd/MM/y",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"฿",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-th",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function b(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["ND","LK"],DAY:["Bikua-ôko","Bïkua-ûse","Bïkua-ptâ","Bïkua-usïö","Bïkua-okü","Lâpôsö","Lâyenga"],ERANAMES:["Kôzo na Krîstu","Na pekô tî Krîstu"],ERAS:["KnK","NpK"],FIRSTDAYOFWEEK:0,MONTH:["Nyenye","Fulundïgi","Mbängü","Ngubùe","Bêläwü","Föndo","Lengua","Kükürü","Mvuka","Ngberere","Nabändüru","Kakauka"],SHORTDAY:["Bk1","Bk2","Bk3","Bk4","Bk5","Lâp","Lây"],SHORTMONTH:["Nye","Ful","Mbä","Ngu","Bêl","Fön","Len","Kük","Mvu","Ngb","Nab","Kak"],WEEKENDRANGE:[5,6],fullDate:"EEEE d MMMM y",longDate:"d MMMM y",medium:"d MMM, y HH:mm:ss",mediumDate:"d MMM, y",mediumTime:"HH:mm:ss","short":"d/M/y HH:mm",shortDate:"d/M/y",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"FCFA",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤-",negSuf:"",posPre:"¤",posSuf:""}]},id:"sg",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function y(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["PG","PTG"],DAY:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],ERANAMES:["S.M.","TM"],ERAS:["S.M.","TM"],FIRSTDAYOFWEEK:0,MONTH:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],SHORTDAY:["Ahd","Isn","Sel","Rab","Kha","Jum","Sab"],SHORTMONTH:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ogo","Sep","Okt","Nov","Dis"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"d/MM/yy h:mm a",shortDate:"d/MM/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"ms-latn-sg",pluralCat:function(e,t){return C.OTHER}})}function _(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"d/M/yy h:mm a",shortDate:"d/M/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-sg",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function S(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ERANAMES:["公元前","公元"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],SHORTDAY:["週日","週一","週二","週三","週四","週五","週六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],WEEKENDRANGE:[5,6],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"y年M月d日 ah:mm:ss",mediumDate:"y年M月d日",mediumTime:"ah:mm:ss","short":"d/M/yy ah:mm",shortDate:"d/M/yy",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"zh-hk",pluralCat:function(e,t){return C.OTHER}})}function M(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"d/M/y h:mm a",shortDate:"d/M/y",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-hk",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function w(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["နံနက်","ညနေ"],DAY:["တနင်္ဂနွေ","တနင်္လာ","အင်္ဂါ","ဗုဒ္ဓဟူး","ကြာသပတေး","သောကြာ","စနေ"],ERANAMES:["ခရစ်တော် မပေါ်မီကာလ","ခရစ်တော် ပေါ်ထွန်းပြီးကာလ"],ERAS:["ဘီစီ","အေဒီ"],FIRSTDAYOFWEEK:6,MONTH:["ဇန်နဝါရီ","ဖေဖော်ဝါရီ","မတ်","ဧပြီ","မေ","ဇွန်","ဇူလိုင်","ဩဂုတ်","စက်တင်ဘာ","အောက်တိုဘာ","နိုဝင်ဘာ","ဒီဇင်ဘာ"],SHORTDAY:["တနင်္ဂနွေ","တနင်္လာ","အင်္ဂါ","ဗုဒ္ဓဟူး","ကြာသပတေး","သောကြာ","စနေ"],SHORTMONTH:["ဇန်","ဖေ","မတ်","ဧပြီ","မေ","ဇွန်","ဇူ","ဩ","စက်","အောက်","နို","ဒီ"],WEEKENDRANGE:[5,6],fullDate:"EEEE၊ dd MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd-MM-yy HH:mm",shortDate:"dd-MM-yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"K",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤ ",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"my",pluralCat:function(e,t){return C.OTHER}})}function k(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ERANAMES:["公元前","公元"],ERAS:["公元前","公元"],FIRSTDAYOFWEEK:6,MONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],SHORTDAY:["周日","周一","周二","周三","周四","周五","周六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],WEEKENDRANGE:[5,6],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"y年M月d日 ah:mm:ss",mediumDate:"y年M月d日",mediumTime:"ah:mm:ss","short":"yy/M/d ah:mm",shortDate:"yy/M/d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"K",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤ ",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"zh-my",pluralCat:function(e,t){return C.OTHER}})}function x(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:0,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"dd/MM/y h:mm a",shortDate:"dd/MM/y",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"RM",DECIMAL_SEP:".",
GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-my",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function T(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"d/MM/y h:mm a",shortDate:"d/MM/y",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-au",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function D(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Linggo","Lunes","Martes","Miyerkules","Huwebes","Biyernes","Sabado"],ERANAMES:["BC","AD"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["Enero","Pebrero","Marso","Abril","Mayo","Hunyo","Hulyo","Agosto","Setyembre","Oktubre","Nobyembre","Disyembre"],SHORTDAY:["Lin","Lun","Mar","Miy","Huw","Biy","Sab"],SHORTMONTH:["Ene","Peb","Mar","Abr","May","Hun","Hul","Ago","Set","Okt","Nob","Dis"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"₱",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"fil-ph",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 0==s.v&&(1==i||2==i||3==i)||0==s.v&&i%10!=4&&i%10!=6&&i%10!=9||0!=s.v&&s.f%10!=4&&s.f%10!=6&&s.f%10!=9?C.ONE:C.OTHER}})}function O(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"dd/MM/y h:mm a",shortDate:"dd/MM/y",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"₱",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-ph",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function E(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["ص","م"],DAY:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],ERANAMES:["قبل الميلاد","ميلادي"],ERAS:["ق.م","م"],FIRSTDAYOFWEEK:5,MONTH:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],SHORTDAY:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],SHORTMONTH:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],WEEKENDRANGE:[4,5],fullDate:"EEEE، d MMMM، y",longDate:"d MMMM، y",medium:"dd‏/MM‏/y h:mm:ss a",mediumDate:"dd‏/MM‏/y",mediumTime:"h:mm:ss a","short":"d‏/M‏/y h:mm a",shortDate:"d‏/M‏/y",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"£",DECIMAL_SEP:"٫",GROUP_SEP:"٬",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤ ",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"ar",pluralCat:function(e,t){return 0==e?C.ZERO:1==e?C.ONE:2==e?C.TWO:e%100>=3&&e%100<=10?C.FEW:e%100>=11&&e%100<=99?C.MANY:C.OTHER}})}function A(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"dd/MM/y h:mm a",shortDate:"dd/MM/y",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"£",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-ar",pluralCat:function(e,t){var i=0|e,s=n(e,t);return 1==i&&0==s.v?C.ONE:C.OTHER}})}function R(){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["SA","CH"],DAY:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],ERANAMES:["tr. CN","sau CN"],ERAS:["tr. CN","sau CN"],FIRSTDAYOFWEEK:0,MONTH:["tháng 1","tháng 2","tháng 3","tháng 4","tháng 5","tháng 6","tháng 7","tháng 8","tháng 9","tháng 10","tháng 11","tháng 12"],SHORTDAY:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],SHORTMONTH:["thg 1","thg 2","thg 3","thg 4","thg 5","thg 6","thg 7","thg 8","thg 9","thg 10","thg 11","thg 12"],STANDALONEMONTH:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],WEEKENDRANGE:[5,6],fullDate:"EEEE, 'ngày' dd MMMM 'năm' y",longDate:"'Ngày' dd 'tháng' MM 'năm' y",medium:"dd-MM-y HH:mm:ss",mediumDate:"dd-MM-y",mediumTime:"HH:mm:ss","short":"dd/MM/y HH:mm",shortDate:"dd/MM/y",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"₫",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"vi-vn",localeID:"vi_VN",pluralCat:function(e,t){return C.OTHER}})}var C={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};switch(window.angular_data.siteId){case 52:s();break;case 54:o();break;case 62:l();break;case 63:r();break;case 64:u();break;case 65:c();break;case 66:g();break;case 86:p();break;case 67:d();break;case 69:f();break;case 78:v();break;case 70:h();break;case 79:m();break;case 71:b();break;case 80:y();break;case 81:_();break;case 72:S();break;case 82:M();break;case 73:w();break;case 83:k();break;case 84:x();break;case 74:T();break;case 75:D();break;case 85:O();break;case 76:A();break;case 77:E();break;case 87:R();break;default:a()}}]).factory("configService",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(208),o=n(a),r=t(209),l=n(r),u=t(210),c=n(u),d=t(211),p=n(d),g=t(212),f=n(g),v=t(213),h=n(v),m=t(214),b=n(m),y=t(215),_=n(y),S=t(216),M=n(S),w=t(217),k=n(w),x=t(218),T=n(x),D=t(219),O=n(D),E=t(220),A=n(E),R=t(221),C=n(R),P=t(222),I=n(P),q=t(223),N=n(q),j=t(224),F=n(j),L=t(225),B=n(L),H=t(226),U=n(H),z=function(e){"ngInject";var t=e.country,n=(0,s["default"])({},b["default"]);switch(t){case"uk":(0,s["default"])(n,F["default"]);break;case"us":(0,s["default"])(n,B["default"]);break;case"de":(0,s["default"])(n,c["default"]);break;case"dk":(0,s["default"])(n,p["default"]);break;case"se":(0,s["default"])(n,C["default"]);break;case"fi":(0,s["default"])(n,f["default"]);break;case"no":(0,s["default"])(n,O["default"]);break;case"fr":(0,s["default"])(n,h["default"]);break;case"th":(0,s["default"])(n,N["default"]);break;case"sg":(0,s["default"])(n,I["default"]);break;case"hk":(0,s["default"])(n,_["default"]);break;case"cn":(0,s["default"])(n,l["default"]);break;case"my":(0,s["default"])(n,T["default"]);break;case"au":(0,s["default"])(n,o["default"]);break;case"ph":(0,s["default"])(n,A["default"]);break;case"id":(0,s["default"])(n,M["default"]);break;case"mena":(0,s["default"])(n,k["default"]);break;case"vn":(0,s["default"])(n,U["default"])}return n};z.$inject=["appContextSrv"],exports["default"]=z},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableHeaderPointsAbbreviation:!0,enableOrdinalNumbers:!1,postCodeRegex:/^(?:\d{5})$/}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1,enableHorizontalLoginRegisterButtons:!0}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1,enableHorizontalLoginRegisterButtons:!0}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCookieConfirm:!0,enableHeaderPointsAbbreviation:!1,enableOrdinalNumbers:!0,enableCurrency:!0,enableHorizontalLoginRegisterButtons:!1}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1,enableHorizontalLoginRegisterButtons:!0}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1,enableHorizontalLoginRegisterButtons:!0}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1,enableHorizontalLoginRegisterButtons:!0}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1,enableHorizontalLoginRegisterButtons:!0}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1,enableHorizontalLoginRegisterButtons:!0}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={postCodeRegex:/^(?:GIR ?0AA|((AB|AL|B|BA|BB|BD|BH|BL|BN|BR|BS|BT|BX|CA|CB|CF|CH|CM|CO|CR|CT|CV|CW|DA|DD|DE|DG|DH|DL|DN|DT|DY|E|EC|EH|EN|EX|FK|FY|G|GL|GY|GU|HA|HD|HG|HP|HR|HS|HU|HX|IG|IM|IP|IV|JE|KA|KT|KW|KY|L|LA|LD|LE|LL|LN|LS|LU|M|ME|MK|ML|N|NE|NG|NN|NP|NR|NW|OL|OX|PA|PE|PH|PL|PO|PR|RG|RH|RM|S|SA|SE|SG|SK|SL|SM|SN|SO|SP|SR|SS|ST|SW|SY|TA|TD|TF|TN|TQ|TR|TS|TW|UB|W|WA|WC|WD|WF|WN|WR|WS|WV|YO|ZE)(\d[\dA-Z]? ?\d[ABD-HJLN-UW-Z]{2}))|BFPO ?\d{1,4})$/i,postCodeFormatter:function(e){return e.toUpperCase()}}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCookieConfirm:!1,enableHeaderPointsAbbreviation:!0,postCodeRegex:/^(?:(\d{5})(?:[ \-](\d{4}))?)$/}},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={enableCurrency:!1}},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(228),o=n(a),r=t(252),l=n(r),u=t(253),c=n(u),d=s["default"].module("loginRegister",[o["default"]]).service("loginSrv",l["default"]).factory("transformRequestAsFormPost",c["default"]);exports["default"]=d.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(229),o=n(a),r=t(231),l=n(r),u=t(235),c=n(u),d=t(239),p=n(d),g=t(243),f=n(g),v=t(249),h=n(v),m=t(250),b=n(m),y=s["default"].module("loginQuestion",[c["default"],f["default"],p["default"],l["default"],o["default"]]).controller("loginQuestionCtrl",h["default"]).directive("loginQuestion",b["default"]);exports["default"]=y.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){"ngInject";e.appCtx=t}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s),o=t(230),r=n(o);i.$inject=["$scope","appContextSrv"];var l=function(){"ngInject";return{restrict:"A",replace:!0,priority:1,controller:"exitPossibilitiesCtrl",template:r["default"]}},u=a["default"].module("exitPossibilities",[]).controller("exitPossibilitiesCtrl",i).directive("exitPossibilities",l);exports["default"]=u.name},function(e,exports){e.exports='<div class=exit-possibilities> <div class="clearfix question-content question-inner-content"> <div class=login-question-sub-header> <div ng-if=appCtx.isLoggedIn>{[{ ::appData.i18n.loginRegister.thanks_for_signing_in }]}</div> {[{ ::appData.i18n.loginRegister.login_whats_next }]} </div> <div class=answer-option ng-click=setDone()> <span class=pseudo-checkbox></span> <span class=answer-label>{[{ ::appData.i18n.loginRegister.carry_on_answering_questions }]}</span> </div> <a ng-if=appCtx.isLoggedIn class=answer-option ng-href="{[{ ::appData.loginRegister.links.members_area }]}"> <span class=pseudo-checkbox></span> <span class=answer-label>{[{ ::appData.i18n.loginRegister.members_area }]}</span> </a> <a class=answer-option ng-href="{[{ ::appData.loginRegister.links.show_me_latest_news }]}"> <span class=pseudo-checkbox></span> <span class=answer-label>{[{ ::appData.i18n.loginRegister.show_me_latest_news }]}</span> </a> <a class=answer-option ng-href="{[{ ::appData.loginRegister.links.professional_services }]}"> <span class=pseudo-checkbox></span> <span class=answer-label>{[{ ::appData.i18n.loginRegister.professional_services }]}</span> </a> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(232),o=n(a),r=t(233),l=n(r),u=s["default"].module("forgottenPasswordQuestion",[]).controller("forgottenPasswordQuestionCtrl",o["default"]).directive("forgottenPasswordQuestion",l["default"]);exports["default"]=u.name},function(e,exports){"use strict";function t(e,t){"ngInject";function n(t){e.resetButtonDisabled=!1,t.error?i(t):e.hasReminderSucceed=!0}function i(t){e.resetButtonDisabled=!1,e.resetErrorMessage=t&&t.message||e.appData.i18n.loginRegister.error_occured_try_again}e.resetPassword=function(){e.resetButtonDisabled||(e.resetErrorMessage=null,e.resetInvalidEmail=!t.isEmailValid(e.user.email),e.resetButtonDisabled=!0,e.resetInvalidEmail===!1?t.resetPassword(e.user).then(n,i):e.resetErrorMessage=e.appData.i18n.loginRegister.invalid_email)}}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$scope","loginSrv"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(234),s=n(i),a=function(){"ngInject";return{restrict:"A",replace:!0,priority:1,controller:"forgottenPasswordQuestionCtrl",template:s["default"]}};exports["default"]=a},function(e,exports){e.exports='<div class=forgotten-password-question> <div ng-hide=hasReminderSucceed class="forgotten-password-form question-content question-inner-content"> <div class=login-question-sub-header> {[{ ::appData.i18n.loginRegister.forgotten_your_password }]} </div> <div class=enter-email> {[{ ::appData.i18n.loginRegister.enter_your_email }]} </div> <form> <input type=text name=email ng-model=user.email on-return-key=resetPassword() ng-class="{\'data-error\': resetInvalidEmail}" placeholder="{[{ appData.i18n.loginRegister.forgotten_password_enter_email }]}"/> <button class="btn btn-primary btn-reset-password standalone" ng-class="{\'disabled\': resetButtonDisabled}" ng-click=resetPassword()>{[{ ::appData.i18n.loginRegister.reset_my_password }]}</button> </form> <div ng-if=passwordErrorMessage class=error-message> {[{ resetErrorMessage }]} </div> </div> <div ng-show=hasReminderSucceed class="password-reset-confirmation question-content question-inner-content ng-cloak fade-in"> <div class=login-question-sub-header> {[{ ::appData.i18n.loginRegister.reset_password_success }]} </div> <p class=login-question-paragraph> {[{ ::appData.i18n.loginRegister.reset_password_success_message }]} </p> <div class="confirm-wrapper clearfix"> <button class="btn btn-primary" ng-click=finishResetPassword()>{[{ ::appData.i18n.loginRegister.register_ok }]}</button> </div> </div> <div ng-hide=hasReminderSucceed class="footer-switch question-inner-content"> <button class="btn btn-link switch-btn" ng-click="switchQuestion(\'login\')">{[{ ::appData.i18n.loginRegister.password_remember }]}</button> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(236),o=n(a),r=t(237),l=n(r),u=s["default"].module("loginQuestionSwitch",[]).controller("loginQuestionSwitchCtrl",o["default"]).directive("loginQuestionSwitch",l["default"]);exports["default"]=u.name},function(e,exports){"use strict";function t(e,t){"ngInject";e.login=t,e.setIsMember=function(e){t.setIsMember(e)}}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$scope","loginSrv"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(238),s=n(i),a=function(){"ngInject";return{restrict:"A",replace:!0,priority:1,controller:"loginQuestionSwitchCtrl",template:s["default"]}};exports["default"]=a},function(e,exports){e.exports='<div class="login-question-switch widget-content"> <div class="clearfix question-content question-inner-content"> <div class=login-question-sub-header>{[{ ::appData.i18n.loginRegister.login_are_you_member }]}</div> <div class=answer-option ng-class="{active: login.getIsMember() === true}" ng-click="switchQuestion(\'login\')"> <span class=pseudo-checkbox></span> <span class=answer-label>{[{ ::appData.i18n.loginRegister.login_member_yes }]}</span> </div> <div class=answer-option ng-class="{active: login.getIsMember() === false}" ng-click="switchQuestion(\'register\')"> <span class=pseudo-checkbox></span> <span class=answer-label>{[{ ::appData.i18n.loginRegister.login_member_no }]}</span> </div> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(206),o=n(a),r=t(240),l=n(r),u=t(241),c=n(u),d=s["default"].module("loginQuestionForm",[o["default"]]).controller("loginQuestionFormCtrl",l["default"]).directive("loginQuestionForm",c["default"]);exports["default"]=d.name},function(e,exports){"use strict";function t(e,t,n){"ngInject";function i(t){t.error?a(t):e.standalone||location.pathname.match(/\/myfeed/)?e.setDone():e.switchQuestion("possibilities")}function s(e){a(e)}function a(t){e.loginErrorMessage=t.message||e.appData.i18n.loginRegister.error_occured_try_again}e.signIn=function(){e.loginErrorMessage=null,e.loginInvalidEmail=!n.isEmailValid(e.user.email),e.loginInvalidPassword=!n.isPasswordValid(e.user.password),e.loginInvalidEmail===!1&&e.loginInvalidPassword===!1?n.login(e.user).then(i,s):e.loginInvalidEmail===!0&&e.loginInvalidPassword===!0?e.loginErrorMessage=e.appData.i18n.loginRegister.invalid_email_and_password:e.loginInvalidEmail===!0?e.loginErrorMessage=e.appData.i18n.loginRegister.invalid_email:e.loginErrorMessage=e.appData.i18n.loginRegister.invalid_password},e.facebookSignIn=function(){var e=function(){parent.location="/facebook_connect/?"};FB.login(e,{scope:t.facebookLoginOptions})}}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$scope","configService","loginSrv"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(242),s=n(i),a=function(){"ngInject";return{restrict:"A",replace:!0,priority:1,controller:"loginQuestionFormCtrl",template:s["default"]}};exports["default"]=a},function(e,exports){e.exports='<div class=login-question-form> <div ng-hide=successMessage class="question-content question-inner-content"> <div class=login-question-sub-header> {[{ ::appData.i18n.loginRegister.sign_into_your_account }]} </div> <form> <input type=text name=email class=input-email ng-model=user.email on-return-key=signIn() ng-class="{\'data-error\': loginInvalidEmail}" placeholder="{[{ ::appData.i18n.loginRegister.login_email_placeholder }]}"/> <input type=password name=password class=input-password ng-model=user.password on-return-key=signIn() ng-class="{\'data-error\': loginInvalidPassword}" placeholder="{[{ ::appData.i18n.loginRegister.login_password_placeholder }]}"/> <div class="clearfix login-links"> <div class="pull-left tick-wrapper"> <label> <span class="tick-box svgi" ng-class="{\'icon-tick\': user.remember}"></span> <input class=tick-checkbox ng-model=user.remember type=checkbox name=loginRemember /> <p>{[{ ::appData.i18n.loginRegister.login_remember_label }]}</p> </label> </div> <button ng-click="switchQuestion(\'password\')" class="btn btn-link pull-right">{[{ ::appData.i18n.loginRegister.login_forgot_password }]}</button> </div> <div class="two-buttons clearfix"> <button class="btn btn-primary btn-left" ng-click=signIn() ng-class="{standalone: standalone}">{[{ ::appData.i18n.loginRegister.login_label }]}</button> <button ng-if=!standalone class="btn btn-primary btn-right" ng-click="switchQuestion(\'possibilities\')">{[{ ::appData.i18n.loginRegister.register_not_now }]}</button> </div> <div ng-if=appData.showSocialMediaIcons class=register-facebook> <span>{[{ ::appData.i18n.loginRegister.or_sign_in_with }]}</span> <button class="btn btn-link facebook-connect" ng-click=facebookSignIn()></button> </div> </form> <div ng-if=loginErrorMessage class=error-message> {[{ ::loginErrorMessage }]} </div> </div> <div ng-if="displayFooter || !standalone" class="footer-switch question-inner-content"> <button class="btn btn-link switch-btn" ng-click="switchQuestion(\'register\')">{[{ ::appData.i18n.loginRegister.already_member_register }]}</button> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(206),o=n(a),r=t(244),l=n(r),u=t(245),c=n(u),d=s["default"].module("registerQuestionForm",[o["default"]]).controller("registerQuestionFormCtrl",l["default"]).directive("registerQuestionForm",c["default"]);exports["default"]=d.name},function(e,exports){"use strict";function t(e,t,n,i){"ngInject";function s(){e.hasRegistrationSucceed=!0,e.registerDone&&e.registerDone(),t.gaq&&t.gaq.namespace&&e.vm&&e.vm.popupType&&ga("send","event",t.gaq.namespace,e.vm.popupType,"register success")}function a(t){e.registrationErrorMessage=t.message||e.appData.i18n.loginRegister.error_occured_try_again}e.login=i,e.appData=t,e.user=e.user||{email:"",password:"",remember:!0,sourceId:null},e.registerNow=function(){e.registrationErrorMessage=null,e.registrationInvalidEmail=!i.isEmailValid(e.user.email),e.registrationInvalidPassword=!i.isPasswordValid(e.user.password),t.gaq&&t.gaq.namespace&&e.vm&&e.vm.popupType&&ga("send","event",t.gaq.namespace,e.vm.popupType,"register button clicked"),e.registrationInvalidEmail===!1&&e.registrationInvalidPassword===!1?i.register(e.user).then(s,a):e.registrationInvalidEmail===!0&&e.registrationInvalidPassword===!0?e.registrationErrorMessage=e.appData.i18n.loginRegister.invalid_email_and_password:e.registrationInvalidEmail===!0?e.registrationErrorMessage=e.appData.i18n.loginRegister.invalid_email:e.registrationErrorMessage=e.appData.i18n.loginRegister.invalid_password},e.facebookRegister=function(){var i=function(){parent.location="/facebook_register/?"};t.gaq&&t.gaq.namespace&&e.vm&&e.vm.popupType&&ga("send","event",t.gaq.namespace,e.vm.popupType,"facebook register button clicked"),FB.login(i,{scope:n.facebookLoginOptions})}}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$scope","applicationData","configService","loginSrv"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(246),s=n(i),a=t(248),o=n(a),r=function(){"ngInject";return{restrict:"A",replace:!0,priority:1,controller:"registerQuestionFormCtrl",template:function(e,t){return Number(t.popup)?s["default"]:o["default"]}}};exports["default"]=r},function(e,exports,t){e.exports='<div class="register-question-form ng-cloak"> <div ng-if=!hasRegistrationSucceed class="register-form question-content question-inner-content"> <div class=login-question-sub-header> {[{ ::appData.i18n.loginRegister.join_yougov_today || "Join YouGov today to make your opinion count!" }]} </div> <p class=enter-details>{[{ ::appData.i18n.loginRegister.enter_details_below || "Enter your details below" }]} </p><form class=clearfix> <input type=text name=email ng-model=user.email on-return-key=registerNow() ng-class="{\'data-error\': registrationInvalidEmail}" placeholder="{[{ appData.i18n.loginRegister.register_enter_email }]}"/> <input type=password name=password ng-model=user.password on-return-key=registerNow() ng-class="{\'data-error\': registrationInvalidPassword}" placeholder="{[{ appData.i18n.loginRegister.register_choose_password }]}"/> <div>'+t(247)+'</div> <button class="btn btn-primary btn-left" ng-click=registerNow() ng-class="{standalone: standalone}">{[{ ::appData.i18n.loginRegister.register_label }]}</button> <div ng-if=appData.showSocialMediaIcons class=register-facebook> <span>{[{ ::appData.i18n.loginRegister.or_register_with }]}</span> <button class="btn btn-link facebook-connect" ng-click=facebookRegister()></button> </div> </form> <div ng-if=registrationErrorMessage class=error-message> {[{ registrationErrorMessage }]} </div> </div> <div ng-show=hasRegistrationSucceed class="register-confirmation ng-cloak fade-in question-content question-inner-content"> <div class=login-question-sub-header> {[{ ::appData.i18n.loginRegister.register_thanks }]} </div> <p class=login-question-paragraph> {[{ ::appData.i18n.loginRegister.register_you_receive_email }]} </p> <p class=login-question-paragraph> {[{ ::appData.i18n.loginRegister.register_click_emailed_link }]} </p> </div> </div> '},function(e,exports){e.exports='<div ng-switch=::appData.registrationAcceptTermsType> <div ng-switch-when=registrationWithAcceptTerms class="clearfix accept-terms-box"> <div class="pull-left tick-wrapper"> <label> <span class="tick-box svgi" ng-class="{\'icon-tick\': user.acceptTerms}"></span> <input class=tick-checkbox ng-model=user.acceptTerms type=checkbox name=accept_terms /> <p> {[{ ::appData.i18n.loginRegister.agree_terms }]} <a ng-href="{[{ appData.loginRegister.privacy_policy_link }]}">{[{ ::appData.i18n.loginRegister.register_privacy_policy }]}</a> {[{ ::appData.i18n.general.and }]} <a ng-href="{[{ appData.loginRegister.terms_and_conditions_link }]}">{[{ ::appData.i18n.loginRegister.terms_and_conditions }]}</a> </p> </label> </div> </div> <div ng-switch-when=registrationWithAcceptPolicyAndAgreement class="clearfix accept-data-policy-box"> <div class="pull-left tick-wrapper"> <label> <span class="tick-box svgi" ng-class="{\'icon-tick\': user.acceptTerms}"></span> <input class=tick-checkbox ng-model=user.acceptTerms type=checkbox name=accept_terms /> <p> {[{ ::appData.i18n.loginRegister.consent_use_data || "If you want to sign up, you have to consent to the use of your personal data as described in our" }]} <a ng-href="{[{ ::appData.loginRegister.data_privacy_rules_link }]}" target=_blank>{[{ ::appData.i18n.loginRegister.data_privacy_rules || "data privacy rules" }]}</a> {[{ ::appData.i18n.loginRegister.as_well_as_into_the || "as well as into the" }]} <a ng-href="{[{ ::appData.loginRegister.privacy_policy_link }]}" target=_blank>{[{ ::appData.i18n.loginRegister.general_users_agreement || "general user\'s agreement of the YouGov Online Panel" }]}</a> {[{ ::appData.i18n.loginRegister.ticking_square_on_the_left || "by ticking the square on the left" }]} </p> </label> </div> </div> <div ng-switch-default class="clearfix accept-terms-box register-privacy-policy"> <span>{[{ ::appData.i18n.loginRegister.register_by_joining_agree }]}</span> <a ng-href="{[{ appData.loginRegister.privacy_policy_link }]}">{[{ ::appData.i18n.loginRegister.register_privacy_policy }]}</a> </div> </div> '},function(e,exports,t){e.exports='<div class="register-question-form ng-cloak"> <div ng-hide=hasRegistrationSucceed class="register-form question-content question-inner-content"> <div class=login-question-sub-header> {[{ ::appData.i18n.loginRegister.register_join_yougov }]} </div> <form> <input type=text name=email ng-model=user.email on-return-key=registerNow() ng-class="{\'data-error\': registrationInvalidEmail}" placeholder="{[{ appData.i18n.loginRegister.register_enter_email }]}"/> <input type=password name=password ng-model=user.password on-return-key=registerNow() ng-class="{\'data-error\': registrationInvalidPassword}" placeholder="{[{ appData.i18n.loginRegister.register_choose_password }]}"/> <div ng-if="version !== \'compact\'">'+t(247)+'</div> <div class="two-buttons clearfix"> <button class="btn btn-primary btn-left" ng-click=registerNow() ng-class="{standalone: standalone}">{[{ ::appData.i18n.loginRegister.register_label }]}</button> <button ng-if=!standalone class="btn btn-primary btn-right" ng-click="switchQuestion(\'possibilities\')">{[{ ::appData.i18n.loginRegister.register_not_now }]}</button> </div> <div ng-if=appData.showSocialMediaIcons class=register-facebook> <span>{[{ ::appData.i18n.loginRegister.or_register_with }]}</span> <button class="btn btn-link facebook-connect" ng-click=facebookRegister()></button> </div> <div ng-if="version === \'compact\'">'+t(247)+'</div> </form> <div ng-if=registrationErrorMessage class=error-message> {[{ registrationErrorMessage }]} </div> </div> <div ng-show=hasRegistrationSucceed class="register-confirmation ng-cloak fade-in question-content question-inner-content"> <div class=login-question-sub-header> {[{ ::appData.i18n.loginRegister.register_thanks }]} </div> <p class=login-question-paragraph> {[{ ::appData.i18n.loginRegister.register_you_receive_email }]} </p> <p class=login-question-paragraph> {[{ ::appData.i18n.loginRegister.register_click_emailed_link }]} </p> <div ng-if=!standalone class="confirm-wrapper clearfix"> <button class="btn btn-primary" ng-click="switchQuestion(\'possibilities\')">{[{ ::appData.i18n.loginRegister.register_ok }]}</button> </div> </div> <div ng-hide="!displayFooter && standalone || hasRegistrationSucceed" class="footer-switch question-inner-content"> <button class="btn btn-link switch-btn" ng-click="switchQuestion(\'login\')">{[{ ::appData.i18n.loginRegister.already_member_login }]}</button> </div> </div> ';
},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i,s,o,l,u,c){"ngInject";function d(){i(function(){e.callbackDone()}),e.$destroy(),(0,r["default"])(".login-tooltip-container .tip").remove(),t.remove()}function p(){var e="";e=c.next?decodeURIComponent(c.next):l.opigramEnabled?"/opi/landing":u.siteLanguage+"/account/",e=0===e.indexOf("/")?e:"/"+e,s.location.href=[o.protocol(),"://",location.host,e].join("")}var g={password:".forgotten-password-question",login:".login-question-form",register:".register-question-form","switch":".login-question-switch",possibilities:".exit-possibilities"};e.appData=l,e.user={email:"",password:"",remember:!0,sourceId:e.sourceId||null},e.standalone?e.question=e.standalone:e.question="switch",e.setDone=function(){a["default"].isDefined(n.callbackDone)?d():p()},e.finishResetPassword=function(){e.switchQuestion("login"),i(function(){e.hasReminderSucceed=!1},500,!1)},e.registerDone=function(){a["default"].isDefined(n.callbackDone)&&e.callbackDone()},e.switchQuestion=function(t){e.question=t},this.getSelector=function(e){return g[e]}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s),o=t(103),r=n(o);i.$inject=["$scope","$element","$attrs","$timeout","$window","$location","applicationData","appContextSrv","QueryString"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(251),s=n(i),a=function(){"ngInject";return{restrict:"A",replace:!0,template:s["default"],controller:"loginQuestionCtrl",scope:{callbackDone:"&",standalone:"@",displayFooter:"@?",sourceId:"@?",version:"@?"},link:function(e,t,n,i){var s=300;e.$watch("question",function(n,a){if(n===a){var o=t.find(i.getSelector(n));o.show(),o.find(".question-inner-content").css({opacity:1})}else!function(){var o=t.find(i.getSelector(n)),r=t.find(i.getSelector(a));r.velocity({height:o.outerHeight(!1)},s),r.find(".question-inner-content").velocity({opacity:[0,1]},{duration:s,complete:function(){r.hide(),o.show(),o.find(".question-inner-content").velocity({opacity:[1,0]},{duration:s,complete:function(){r.css("height","auto"),e.$emit("contentChanged")}})}})}()}),e.$on("loginTooltipClosed",function(){e.switchQuestion("login"),e.$digest()})}}};exports["default"]=a},function(e,exports){e.exports="<div class=login-question> <div forgotten-password-question></div> <div login-question-form></div> <div register-question-form></div> <div login-question-switch></div> <div exit-possibilities></div> </div> "},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i,s,o,r){"ngInject";function l(e,n){t(b).then(function(t){var s=t.data;s.error?(v.reject(s),c()):i(function(){n(e)},100)})}function u(n){if(e.get("csrftoken")){var a={csrfmiddlewaretoken:e.get("csrftoken"),email:n.email,password:n.password};n.remember&&(a.remember={checked:"yes"}),t({method:"post",url:h+"/account/login/?json",transformRequest:r,data:a}).then(function(e){var t=e.data;t.error?(v.reject(t),c()):(s.checkLoggedIn(),i(function(){v.resolve(t),c()},100))})["catch"](function(e){var t=e.data;v.reject(t),c()})}else v.reject({error:!0}),c()}function c(){v&&(v.reject(),v=null)}function d(){var e=o,t={},n=null;for(var i in e)0===i.indexOf("pdl.")&&(n=i.replace("pdl.","pdl__"),t[n]=e[i]);return t}function p(n){if(e.get("csrftoken")){var i={csrfmiddlewaretoken:e.get("csrftoken"),email:n.email,password:n.password},s=d()||{};n.acceptTerms&&(i.accept_terms=n.acceptTerms),(0,a["default"])(i,s),n.sourceId&&(i.sourceid=n.sourceId),t({method:"post",url:h+"/account/register/?json",transformRequest:r,data:i}).then(function(e){var t=e.data;t.error?(v.reject(t),c()):(v.resolve(t),c())})["catch"](function(e){var t=e.data;v.reject(t),c()})}else v.reject({error:!0}),c()}function g(n){var i={csrfmiddlewaretoken:e.get("csrftoken"),email:n.email};t({method:"post",url:h+"/account/password_reset/?json",transformRequest:r,data:i}).then(function(e){var t=e.data;t.error?(v.reject(t),c()):(v.resolve(t),c())})["catch"](function(e){var t=e.data;v.reject(t),c()})}var f=null,v=null,h=s.siteLanguage,m=/(^[-!#$%&'*+\/=?^_`{}|~0-9A-Z]+(\.[-!#$%&'*+\/=?^_`{}|~0-9A-Z]+)*|^"([\001-\010\013\014\016-\037!#-\[\]-\177]|\\[\001-\011\013\014\016-\177])*")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\.)+[A-Z]{2,6}\.?$)|\[(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}\]$/i,b={method:"post",url:h+"/account/csrf/"};return{setIsMember:function(e){f=e},getIsMember:function(){return f},login:function(t){return c(),v=n.defer(),e.get("csrftoken")?u(t):l(t,u),v.promise},register:function(t){return c(),v=n.defer(),e.get("csrftoken")?p(t):l(t,p),v.promise},resetPassword:function(t){return c(),v=n.defer(),e.get("csrftoken")?g(t):l(t,g),v.promise},isEmailValid:function(e){return m.test(e)},isPasswordValid:function(e){return e.length>=6}}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s);i.$inject=["$cookies","$http","$q","$timeout","appContextSrv","QueryString","transformRequestAsFormPost"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(4),s=n(i),a=t(131),o=n(a),r=function(){"ngInject";function e(e){if(!o["default"].isObject(e))return null==e?"":e.toString();var n=[];for(var i in e)(0,s["default"])(t,e,[i])&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(null==e[i]?"":e[i]));return n.join("&").replace(/%20/g,"+")}var t=Object.prototype.hasOwnProperty;return function(t,n){var i=n();return i["Content-type"]="application/x-www-form-urlencoded; charset=utf-8",e(t)}};exports["default"]=r},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){"ngInject";var t=e("/opi/search/json?q=:term",{},{query:{method:"POST",params:{term:"@term"},isArray:!1}},{cancellable:!0});(0,o["default"])(this,{search:t})}function s(e,t,n,i,s,a,o,r){"ngInject";function u(t){e.isLoading=!1,c(),e.results=t}function c(){g=null}function d(){g&&g.$cancelRequest()}var p=this,g=null,f=!1,v=i(function(){""===e.search.term||f?(e.isLoading=!1,e.results=null):(e.isLoading=!0,g=r.search.query({term:e.search.term},u,c))},300,!1),h=l["default"].isDefined(t.clickCallback),m=-1,b=-1;e.appContextSrv=s,e.appData=a,e.results=null,e.search={term:""},a.opigramEnabled&&e.$watch("search.term",function(){d(),v(),m=-1,b=-1}),e.clearTerm=function(){e.results=null,e.search.term="",m=-1,b=-1},e.resultPage=function(){if(m===-1&&b===-1){var t="/search/?q="+e.search.term;""!==e.search.term&&(f=!0,d(),a.opigramEnabled?t="/opi"+t:s.siteLanguage&&(t=""+s.siteLanguage+t),n.location.href=t)}else m===-1?location.href=e.results.pages[b].url:e.selectThing(null,e.results.things[m].uuid)},e.selectThing=function(t,n){h?(t&&t.preventDefault(),e.clickCallback({uuid:n}),e.clearTerm()):m>-1&&(location.href=e.results.things[m].url)},e.suggestThing=function(){o.loadDirective('<opi-suggestions on-cancel="cancel()" box-container="boxContainer"></opi-suggestions>',{},"suggestions-popup")},p.selectNextResult=function(){b>-1?p.selectNextPage():p.selectNextThing()},p.selectPrevResult=function(){b>-1?p.selectPrevPage():p.selectPrevThing()},p.toggleSelected=function(e,t){t&&t[e]&&(t[e].selected=!t[e].selected)},p.selectPrevThing=function(){m-1>-1&&(p.toggleSelected(m,e.results.things),p.toggleSelected(--m,e.results.things))},p.selectNextThing=function(){m+1<e.results.things.length?(p.toggleSelected(m,e.results.things),p.toggleSelected(++m,e.results.things)):e.results.pages.length>0&&(p.toggleSelected(m,e.results.things),m=-1,p.selectNextPage())},p.selectNextPage=function(){b+1<e.results.pages.length&&(p.toggleSelected(b,e.results.pages),p.toggleSelected(++b,e.results.pages))},p.selectPrevPage=function(){b-1>-1?(p.toggleSelected(b,e.results.pages),p.toggleSelected(--b,e.results.pages)):e.results.things.length>0&&(p.toggleSelected(b,e.results.pages),b=-1,m=e.results.things.length,p.selectPrevResult())}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(155),o=n(a),r=t(131),l=n(r),u=t(137),c=n(u),d=t(255),p=n(d),g=t(153),f=n(g),v=t(258),h=n(v);s.$inject=["$scope","$attrs","$window","debounce","appContextSrv","applicationData","Lightbox","mainSearchSrv"],i.$inject=["$resource"];var m=function(){"ngInject";return{restrict:"A",replace:!0,controller:"mainSearchCtrl",template:h["default"],scope:{placeholderText:"@",overlayedAreaSelector:"@?",clickCallback:"&?"},link:function(e,t,n,i){var s={ENTER:13,ESC:27,UP:38,DOWN:40};e.$watch("results",function(n){var i=e.overlayedAreaSelector?l["default"].element(e.overlayedAreaSelector):t.next();null===n?i.removeClass("hidden"):i.addClass("hidden")}),t.on("keydown",function(t){switch(t.stopPropagation(),t.which){case s.UP:t.preventDefault(),i.selectPrevResult(),e.$digest();break;case s.DOWN:t.preventDefault(),i.selectNextResult(),e.$digest()}})}}},b=l["default"].module("mainSearch",[c["default"],p["default"],f["default"]]).service("mainSearchSrv",i).controller("mainSearchCtrl",s).directive("mainSearch",m);exports["default"]=b.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(256),o=n(a),r=s["default"].module("spinner",[]).component("opiSpinner",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(257),o=n(a),r=function u(){"ngInject";(0,s["default"])(this,u)},l={controller:r,template:o["default"]};exports["default"]=l},function(e,exports){e.exports='<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 78 78"> <circle fill=none stroke=#555 stroke-width=6 stroke-linecap=round cx=39 cy=39 r=30></circle> </svg> '},function(e,exports){e.exports='<div class=main-search> <input ng-model=search.term on-return-key=resultPage() type=text placeholder="{[{ placeholderText }]}"/> <button ng-hide="isLoading || search.term !== \'\' && appData.opigramEnabled" ng-click=resultPage() class="btn btn-link svgi icon-magnifier"></button> <button ng-hide="isLoading || search.term === \'\' " ng-click=clearTerm() class="btn btn-link svgi icon-x-close ng-cloak"></button> <opi-spinner ng-show=isLoading ng-class="{\'stop-animate\': !isLoading}"></opi-spinner> <div class="search-results clearfix"> <div class=search-result-category ng-if="results.pages.length > 0"> {[{ ::appData.i18n.search.pages }]} </div> <a ng-if="results.pages.length > 0" ng-repeat="page in results.pages" ng-href="{[{ page.url }]}" class=search-result ng-class="{\'selected\': page.selected}"> <div ng-style="{\'background-image\': \'url(/opi/images/results-screen.png)\'}" class=search-result-thumbnail></div> <div class=search-result-info> <div class=search-result-name>{[{ page.title }]}</div> <div class=search-result-type>{[{ page.path }]}</div> </div> </a> <div class=search-result-category ng-if="results.things.length > 0"> {[{ appData.i18n.search.suggested_topics }]} </div> <a ng-if="results.things.length > 0" ng-repeat="thing in results.things" ng-href="{[{ thing.url }]}" ng-click="selectThing($event, thing.uuid)" class=search-result ng-class="{\'selected\': thing.selected}"> <div class=search-result-thumbnail> <div class="{[{ ::thing.type_class }]} node-type-icon-white"></div> <div ng-if=thing.thumbnail class=thumbnail ng-style="{\'background-image\': \'url(\' + thing.thumbnail + \')\'}"></div> </div> <div class=search-result-info> <div class=search-result-name>{[{ ::thing.name }]}</div> <div class=search-result-type>{[{ ::appData.i18n.general.type }]} <span>{[{ ::thing.type }]}</span></div> </div> </a> <button ng-if="appContextSrv.isLoggedIn && results" class="suggest-new left-off-canvas-hide-phone" ng-click=suggestThing()> <span class=flex-wrapper> <span class=icon-container> <span class="svgi icon-plus"></span> </span> <span class=suggest-new-item-text>{[{ ::appData.i18n.suggestions.suggest_new_item || \'Suggest new item\' }]}</span> </span> </button> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(135),o=n(a),r=t(260),l=n(r),u=s["default"].module("saveCurrentPage",[o["default"]]).directive("saveCurrentPage",l["default"]);exports["default"]=u.name},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(e){"ngInject";function t(t,n,i){n.on("click",function(){if(1===Number(i.resetCurrentPageSelection))e.remove("ygoRememberSection",{path:"/"});else{var t=new Date,n=t.getUTCMonth(),s=n+3;t.setUTCMonth(s),e.put("ygoRememberSection",i.saveCurrentPage,{path:"/",expires:t})}})}var n={link:t,restrict:"A",replace:!0,scope:{}};return n};t.$inject=["$cookies"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(262),o=n(a),r=t(266),l=n(r),u=t(269),c=n(u),d=t(153),p=n(d),g=t(275),f=n(g),v=t(276),h=n(v),m=s["default"].module("suggestions",[o["default"],l["default"],c["default"],p["default"]]).service("suggestionsService",f["default"]).component("opiSuggestions",h["default"]);exports["default"]=m.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(255),o=n(a),r=t(263),l=n(r),u=s["default"].module("thingTypes",[o["default"]]).component("thingTypes",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(264),l=n(r),u=t(265),c=n(u),d=function(){function e(t,n,i,a,o){"ngInject";(0,s["default"])(this,e),this.$element=t,this.$scope=n,this.$timeout=i,this.appContextSrv=a,this.applicationData=o,this.labels=this.applicationData.i18n.suggestions,this.generalLabels=this.applicationData.i18n.general}return e.$inject=["$element","$scope","$timeout","appContextSrv","applicationData"],(0,o["default"])(e,[{key:"$onInit",value:function(){var e=this;this.onSetTitle({title:this.labels.suggest_sth_new}),this.$scope.$watch("$ctrl.appContextSrv.device.isMobile",function(t){return t?void e.$element.find(".types").perfectScrollbar("destroy"):void e.$element.find(".types").perfectScrollbar({suppressScrollX:!0})})}},{key:"$onChanges",value:function(e){var t=e.types;this.appContextSrv.device.isMobile&&t&&this.$element.find(".types").perfectScrollbar("update"),t&&t.currentValue&&(this.types=this.types.filter(function(e){return c["default"].includes(e.name)}),0===this.types.length&&this.onCancel())}},{key:"$onDestroy",value:function(){this.$element.find(".types").perfectScrollbar("destroy")}},{key:"selectType",value:function(e){this.type=e,this.onSelect({type:e}),this.onComplete()}}]),e}(),p={bindings:{types:"<",onCancel:"&",onComplete:"&",onSelect:"&",onSetTitle:"&"},controller:d,template:l["default"]};exports["default"]=p},function(e,exports){e.exports='<div ng-show="$ctrl.types.length > 0" class=intro> {[{ ::$ctrl.labels.select_type_info }]} </div> <ul ng-show="$ctrl.types.length > 0" class=types> <li class=type ng-class="{active: type === $ctrl.type}" ng-repeat="type in $ctrl.types track by type.uuid"> <button type=button ng-click=$ctrl.selectType(type)> <span class=thing-type-label>{[{ ::type.name }]}</span> </button> </li> </ul> <div ng-if="!$ctrl.types || $ctrl.types.length === 0" class=opi-spinner-container> <opi-spinner></opi-spinner> </div> '},function(e,exports){e.exports=["Actor","Artist","Brand","Classical Composer","Columnist","Comedian","Director","Event","Fiction Book","Magazine","Mobile Application","Model of car","Model of phone","Movie","Music Artist","Non-Fiction Book","Not-for-profit","Political Party","Public Figure","Radio Programme","Radio Station","Regional Newspaper","Social Network","Sport","Sports Personality","Sports Team","Tourist Attraction","TV Channel","TV Personality","TV Programme","University","Video Game","Video Game Console","Writer"]},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(255),o=n(a),r=t(267),l=n(r),u=s["default"].module("wikiSearch",[o["default"]]).component("wikiSearch",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(268),l=n(r),u=function(){function e(t,n,i,a,o,r){"ngInject";(0,s["default"])(this,e),this.$element=t,this.$scope=n,this.$timeout=i,this.appContextSrv=a,this.applicationData=o,this.suggestionsService=r,this.labels=this.applicationData.i18n.suggestions,this.generalLabels=this.applicationData.i18n.general}return e.$inject=["$element","$scope","$timeout","appContextSrv","applicationData","suggestionsService"],(0,o["default"])(e,[{key:"$onInit",value:function(){var e=this;this.searchInProgress=!1,this.suggestions={yougov:[],wiki:[]},this.$scope.$watch("$ctrl.appContextSrv.device.isMobile",function(t){return t?void e.$element.find(".suggestions-lists").perfectScrollbar("destroy"):void e.$timeout(function(){e.$element.find(".suggestions-lists").perfectScrollbar({suppressScrollX:!0})},0,!1)}),this.$scope.$watch("$ctrl.searchTerm",function(t){e.suggestions={yougov:[],wiki:[]},t&&(e.searchInProgress=!0,e.suggestionsService.getSuggestions({type:e.type,term:t}).then(function(t){if(!t)throw console.error("Incorrect suggestions format",t),new Error("Incorrect suggestions format");e.suggestions.yougov=t.filter(function(e){return"wikidata"!==e.id.source}),e.suggestions.wiki=t.filter(function(e){return"wikidata"===e.id.source}),e.searchInProgress=!1,e.$timeout(function(){e.$element.find(".suggestions-lists").perfectScrollbar("update"),e.$timeout(function(){e.$element.find(".suggestions-lists").perfectScrollbar("update"),e.$timeout(function(){e.$element.find(".suggestions-lists").perfectScrollbar("update")},300,!1)},100,!1)},0,!1)})["catch"](function(t){console.error("Error in wiki search",t),e.searchInProgress=!1}))})}},{key:"$onChanges",value:function(e){e.type&&this.onSetTitle({title:this.labels.suggest_new+" "+this.type.name})}},{key:"$onDestroy",value:function(){this.$element.find(".suggestions-list").perfectScrollbar("destroy")}},{key:"selectSuggestion",value:function(e){this.onSelect({suggestion:e}),this.onComplete()}},{key:"activateSearchInput",value:function(){this.$element.find(".search-input").addClass("focused")}},{key:"clearInput",value:function(){this.searchTerm=""}},{key:"cancelFromSearchInput",value:function(){this.clearInput(),this.$element.find(".search-input").removeClass("focused").blur()}},{key:"clearFocusedSearchInput",value:function(){this.clearInput(),this.$element.find(".search-input").focus()}}]),e}(),c={bindings:{type:"<",isFirstStep:"<",onComplete:"&",onGoBack:"&",onSelect:"&",onSetTitle:"&"},controller:u,template:l["default"]};exports["default"]=c},function(e,exports){e.exports='<input type=search class=search-input ng-focus=$ctrl.activateSearchInput() ng-model=$ctrl.searchTerm ng-model-options="{debounce: 300}" placeholder="{[{ ::$ctrl.labels.type_to_search_placeholder }]}"> <div class=input-buttons> <button type=button class=input-clear aria-label="{[{ ::$ctrl.labels.clear_text_field }]}" ng-click=$ctrl.clearFocusedSearchInput()> <span class=icon-container> <span class="svgi icon icon-x"></span> </span> </button> <button type=button class=input-cancel ng-click=$ctrl.cancelFromSearchInput()>{[{ ::$ctrl.generalLabels.cancel }]} </button> </div> <div class=wiki-search-info-notice ng-show="!$ctrl.suggestions.yougov.length && !$ctrl.suggestions.wiki.length && !$ctrl.searchInProgress"> {[{ ::$ctrl.labels.wiki_search_info }]} </div> <div ng-show=$ctrl.searchInProgress class=opi-spinner-container> <opi-spinner></opi-spinner> </div> <div ng-show=!$ctrl.searchInProgress class=suggestions-lists> <h2 ng-repeat-start="(source, list) in $ctrl.suggestions" ng-show=list.length class=suggestion-list-header>{[{ $ctrl.labels.suggestions_source[source] }]}</h2> <ul ng-repeat-end ng-show=list.length class=suggestions-list> <li ng-repeat="suggestion in list"> <button type=button ng-click=$ctrl.selectSuggestion(suggestion)> <span class=suggestion-wrapper> <span class=thumbnail-container ng-style="::suggestion.thumbnail && {\'background-image\': \'url(\' + suggestion.thumbnail + \')\'}"> <span class="thumbnail node-type-icon-white" ng-show=::!suggestion.thumbnail ng-class=::$ctrl.type.css_class></span> </span> <span class=metadata> <span class=name>{[{ ::suggestion.name }]}</span> <span class=description>{[{ ::suggestion.description || \'\' }]}</span> </span> <span class="svgi icon icon-tick"></span> </span> </button> </li> </ul> </div> <div class=actions> <button ng-if=!$ctrl.isFirstStep class="btn btn-back" ng-click=$ctrl.onGoBack()>{[{ ::$ctrl.labels.go_back }]} </button> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(255),o=n(a),r=t(270),l=n(r),u=t(273),c=n(u),d=s["default"].module("suggestion",[l["default"],o["default"]]).component("opiSuggestion",c["default"]);exports["default"]=d.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(255),o=n(a),r=t(271),l=n(r),u=s["default"].module("thingSubtypes",[o["default"]]).component("thingSubtypes",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(272),l=n(r),u=function(){function e(t,n,i,a,o,r){"ngInject";(0,s["default"])(this,e),this.$element=t,this.$scope=n,this.$timeout=i,this.appContextSrv=a,this.applicationData=o,this.suggestionsService=r,this.labels=this.applicationData.i18n.suggestions}return e.$inject=["$element","$scope","$timeout","appContextSrv","applicationData","suggestionsService"],(0,o["default"])(e,[{key:"$onInit",value:function(){var e=this;this.subtypesDownloadInProgress=!0,this.suggestionsService.getSubtypes({typeUuid:this.type.uuid}).then(function(t){e.subtypes=t,e.subtypesDownloadInProgress=!1,e.$scope.$watch("$ctrl.appContextSrv.device.isMobile",function(t){return t?void e.$element.find(".subtypes").perfectScrollbar("destroy"):void e.$timeout(function(){e.$element.find(".subtypes").perfectScrollbar({suppressScrollX:!0})},0,!1)})})["catch"](function(t){console.error("Downloading subtypes failed",t),e.subtypes=[],e.subtypesDownloadInProgress=!1})}},{key:"$onDestroy",value:function(){this.$element.find(".subtypes").perfectScrollbar("destroy")}},{key:"toggleSubtype",value:function(e){e.active=!e.active,this.onToggle({subtype:e})}}]),e}(),c={bindings:{getSubtypes:"<",type:"<",onToggle:"&"},controller:u,template:l["default"]};exports["default"]=c},function(e,exports){e.exports='<div ng-if="$ctrl.subtypes.length > 0" class=notice>{[{ ::$ctrl.labels.select_subtypes }]}</div> <ul ng-if="$ctrl.subtypes.length > 0" class=subtypes> <li ng-repeat="subtype in $ctrl.subtypes track by subtype.uuid" class=subtype ng-class="{active: subtype.active}"> <button type=button ng-click=$ctrl.toggleSubtype(subtype)> <span class=thing-type-label>{[{ ::subtype.name }]}</span> </button> </li> </ul> <div ng-if=$ctrl.subtypesDownloadInProgress class=opi-spinner-container> <opi-spinner></opi-spinner> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(175),o=n(a),r=t(176),l=n(r),u=t(274),c=n(u),d=function(){function e(t,n,i,s,a,r){"ngInject";(0,o["default"])(this,e),this.$element=t,this.$scope=n,this.$q=i,this.$timeout=s,this.appContextSrv=a,this.applicationData=r,this.labels=this.applicationData.i18n.suggestions,this.generalLabels=this.applicationData.i18n.general}return e.$inject=["$element","$scope","$q","$timeout","appContextSrv","applicationData"],(0,l["default"])(e,[{key:"$onInit",value:function(){var e=this;this.entityData=null,this.entityCreationInProgress=!1,this.localSource="local"===this.suggestion.id.source,this.$scope.$watch("$ctrl.appContextSrv.device.isMobile",function(t){return t?void e.$element.find(".description").perfectScrollbar("destroy"):void e.$timeout(function(){e.$element.find(".description").perfectScrollbar({suppressScrollX:!0})},0,!1)})}},{key:"$onDestroy",value:function(){this.$element.find(".description").perfectScrollbar("destroy")}},{key:"finish",value:function(e){return this.onFinish({entityData:e})}},{key:"toggleSubtype",value:function(e){this.onToggleSubtype({subtype:e})}},{key:"getEntityFromSuggestionAndFinish",value:function(){var e=this;return this.entityCreationInProgress=!0,this.$q.when([]).then(function(){var t=(0,s["default"])(e.suggestion,e.suggestionMetadata);return e.onSuggestionAdded({suggestion:t})}).then(function(t){return e.finish({uuid:t.uuid,name:t.name,thumnbnail:t.thumbnail,url:t.url})})["catch"](function(t){console.error("Entity creation failed",t),e.entityCreationInProgress=!1})}}]),e}(),p={bindings:{getSubtypes:"<",type:"<",suggestion:"<",isRedirectInProgress:"<",onGoBack:"&",onToggleSubtype:"&",onSuggestionAdded:"&",suggestionMetadata:"<",onFinish:"&"},controller:d,template:c["default"]};exports["default"]=p},function(e,exports){e.exports="<div class=intro>{[{ ::$ctrl.labels.just_checking }]}</div> <section class=suggestion-data> <div class=main-part> <div class=thumbnail ng-style=\"::$ctrl.suggestion.thumbnail && {'background-image': 'url(' + $ctrl.suggestion.thumbnail + ')' }\"> <div class=\"thumbnail node-type-icon-white\" ng-show=::!$ctrl.suggestion.thumbnail ng-class=::$ctrl.type.css_class></div> </div> <div class=metadata> <span class=name>{[{ ::$ctrl.suggestion.name }]}</span> <span class=description>{[{ ::$ctrl.suggestion.description || '' }]}</span> </div> </div> </section> <thing-subtypes ng-if=!$ctrl.localSource ng-show=!$ctrl.entityCreationInProgress get-subtypes=$ctrl.getSubtypes type=$ctrl.type on-toggle=$ctrl.toggleSubtype(subtype)></thing-subtypes> <div ng-if=\"!$ctrl.entityCreationInProgress  && $ctrl.localSource\" class=item-present-message> <span>{[{ ::$ctrl.labels.item_already_present }]}</span> </div> <div ng-show=$ctrl.entityCreationInProgress class=opi-spinner-container> <opi-spinner></opi-spinner> <p class=final-message ng-show=\"$ctrl.suggestion.id.source !== 'local' && $ctrl.entityCreationInProgress && !$ctrl.isRedirectInProgress\"> {[{ $ctrl.labels.creating_page + ':' }]} {[{ ::$ctrl.suggestion.name }]} </p> <p class=final-message ng-show=\"($ctrl.suggestion.id.source === 'local' && $ctrl.entityCreationInProgress) || $ctrl.isRedirectInProgress\"> {[{ $ctrl.labels.redirecting_to_page + ':' }]} {[{ ::$ctrl.suggestion.name }]} </p> </div> <div class=actions> <button class=\"btn btn-back\" ng-disabled=$ctrl.entityCreationInProgress ng-click=$ctrl.onGoBack()>{[{ ::$ctrl.labels.go_back }]} </button> <button class=\"btn btn-dark\" ng-disabled=$ctrl.entityCreationInProgress ng-click=$ctrl.getEntityFromSuggestionAndFinish()>{[{ ::$ctrl.labels.confirm }]}</button> </div> "},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=function(){function e(t,n){"ngInject";(0,s["default"])(this,e),this.getTypesResource=t("/opi/entity/types/:type",null,{query:{method:"POST",isArray:!0,interceptor:n}}),this.getSubtypesResource=t("/opi/entity/subtypes/:subtype",null,{query:{method:"POST",isArray:!0,interceptor:n}}),this.suggestionsResource=t("/opi/search/type/suggestions/:term",null,{query:{method:"POST",isArray:!0,interceptor:n}},{cancellable:!0}),this.createEntityResource=t("/opi/entity/suggestions",null,{save:{method:"POST",interceptor:n}})}return e.$inject=["$resource","resourceInterceptor"],(0,o["default"])(e,[{key:"getTypes",value:function(e){return this.getTypesResource.query({type:e}).$promise}},{key:"getSubtypes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.typeUuid;if(!t)throw new Error("typeUuid is a required parameter!");return this.getSubtypesResource.query({subtype:e.subtypeUuid},[t]).$promise}},{key:"getSuggestions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.term,n=e.type;if(this._lastSuggestionsSearch&&(this._lastSuggestionsSearch.$cancelRequest(),this._lastSuggestionsSearch=null),!t||!n||!n.uuid)throw new Error("term & typeUuid are required parameters!");return this._lastSuggestionsSearch=this.suggestionsResource.query({term:t},[n.uuid]),this._lastSuggestionsSearch.$promise}},{key:"createEntityFromSuggestion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.suggestion_id||!e.suggestion_id.source||!e.type)throw new Error("Required parameters are missing!");return this.createEntityResource.save(e).$promise}}]),e}();exports["default"]=r},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(175),o=n(a),r=t(176),l=n(r),u=t(277),c=n(u),d=function(){function e(t,n,i,s){"ngInject";(0,o["default"])(this,e),this.$q=t,this.$scope=n,this.applicationData=i,this.suggestionsService=s,this.labels=this.applicationData.i18n.suggestions,this.generalLabels=this.applicationData.i18n.general}return e.$inject=["$q","$scope","applicationData","suggestionsService"],(0,l["default"])(e,[{key:"$onInit",value:function(){this.title=this.applicationData.i18n.suggestions.suggest_sth_new,this.boxContainer.ready(),this.steps=["types","wiki-search","suggestion-confirm"],this.step="types",this.downloadTypes(),this.subtypes=[]}},{key:"finish",value:function(e){this.onFinish?this.onFinish({entityData:e}):(this.isRedirectInProgress=!0,location.href=e.url)}},{key:"downloadTypes",value:function(){var e=this,t="function"==typeof this.getTypes?this.getTypes:this.suggestionsService.getTypes.bind(this.suggestionsService);t().then(function(t){if(e.types=t,0===e.types.length)throw new Error("No types returned!");1===e.types.length&&(e.type=e.types[0],e.goToNextStep())})["catch"](function(t){console.error("Downloading types failed",t),e.onCancel()})}},{key:"setTitle",value:function(e){this.title=e,this.boxContainer.setHeader(e)}},{key:"cancel",value:function(){this.onCancel()}},{key:"goToNextStep",value:function(){var e=this.steps.indexOf(this.step);return e===this.steps.length-1?void console.warn("Already on the last step ("+this.step+"), can't go further"):void this.goToStep(this.steps[e+1])}},{key:"goToPreviousStep",value:function(){var e=this.steps.indexOf(this.step);return 0===e?void console.warn("Already on the first step ("+this.step+"), can't go back"):void this.goToStep(this.steps[e-1])}},{key:"getFirstStep",value:function(){return 1===this.types.length?"wiki-search":"types"}},{key:"goToStep",value:function(e){"types"===e?(this.type=this.suggestion=this.subtype=null,this.step=e):"wiki-search"===e?(this.suggestion=this.subtype=null,this.step=e):"suggestion-confirm"===e?this.step=e:console.warn("Unknown step",e)}},{key:"startOver",value:function(){this.goToStep(this.getFirstStep())}},{key:"selectType",value:function(e){this.type=e,this.suggestion&&(this.suggestion.type=e)}},{key:"toggleSubtype",value:function(e){var t=this.subtypes.findIndex(function(t){return t.uuid===e.uuid});t>-1?this.subtypes.splice(t,1):this.subtypes.push(e),
this.suggestion&&(this.suggestion.subtypes=this.subtypes)}},{key:"selectSuggestion",value:function(e){this.suggestion=e,this.suggestion.type=this.type,this.suggestion.subtype=this.subtype}},{key:"sendSuggestion",value:function(e){var t=(0,s["default"])({suggestion_id:e.id,type:this.type.uuid,subtypes:this.subtypes.map(function(e){return e.uuid})},this.suggestionMetadata);return this.suggestionsService.createEntityFromSuggestion(t)}}]),e}(),p={bindings:{boxContainer:"<",type:"<",onCancel:"&",getTypes:"<?",suggestionMetadata:"<?",onFinish:"&?"},controller:d,template:c["default"]};exports["default"]=p},function(e,exports){e.exports="<thing-types class=main ng-if=\"$ctrl.step === 'types'\" types=$ctrl.types on-set-title=$ctrl.setTitle(title) on-select=$ctrl.selectType(type) on-cancel=$ctrl.onCancel() on-complete=$ctrl.goToNextStep() on-go-back=$ctrl.goToPreviousStep()></thing-types> <wiki-search class=main ng-if=\"$ctrl.step === 'wiki-search'\" is-first-step=\"$ctrl.getFirstStep() === 'wiki-search'\" type=$ctrl.type on-set-title=$ctrl.setTitle(title) on-select=$ctrl.selectSuggestion(suggestion) on-complete=$ctrl.goToNextStep() on-go-back=$ctrl.goToPreviousStep()></wiki-search> <opi-suggestion class=main ng-if=\"$ctrl.step === 'suggestion-confirm'\" get-subtypes=$ctrl.getSubtypes type=$ctrl.type suggestion=$ctrl.suggestion suggestion-metadata=$ctrl.suggestionMetadata is-redirect-in-progress=$ctrl.isRedirectInProgress on-toggle-subtype=$ctrl.toggleSubtype(subtype) on-suggestion-added=$ctrl.sendSuggestion(suggestion) on-go-back=$ctrl.goToPreviousStep() on-finish=$ctrl.finish(entityData)></opi-suggestion> "},,,function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(){"ngInject";(0,a["default"])(this,{src:null,setSrc:function(e){this.src=e}})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s),o=t(131),r=n(o),l=t(281),u=n(l),c=function(e,t){"ngInject";return{restrict:"A",replace:!0,priority:1,template:u["default"],scope:{},link:function(n,i){function s(e,t){e.css({"background-image":"url("+t+")"})}var a=r["default"].element(".curtain",i),o=r["default"].element("body");n.imageLayer=e,n.$watch("imageLayer.src",function(e,n){e&&e!==n?(o.addClass("image-layer-active"),n&&s(a,n),a.velocity("fadeIn",{complete:function(){s(i,e),t.loadImage(e).then(function(){a.velocity("fadeOut",{duration:350})})},duration:250})):(i.removeAttr("style"),a.removeAttr("style"),o.removeClass("image-layer-active"))})}}};c.$inject=["imageLayerSrv","imagePreloaderSrv"];var d=r["default"].module("imageLayer",[]).directive("imageLayer",c).service("imageLayerSrv",i);exports["default"]=d.name},function(e,exports){e.exports="<div class=image-layer> <div class=curtain></div> </div> "},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(137),o=n(a),r=t(283),l=n(r),u=s["default"].module("lightbox",[o["default"]]).service("Lightbox",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i,s,o,l,u){"ngInject";var c=o("/opi/profile/get_widget",{},{query:{method:"POST",isArray:!1,async:!0}}),d=function(e,t){var n=e;return n.type=t,c.query({},n)},p=function(e,t,n){e.labels=u.config,e.isMobile=u.isMobile,e.isEmbedded=u.isEmbedded,e.widget=n,n.$promise?n.$promise.then(function(){e.isReady=!0,e.header=n.header}):e.header=n.header,e.ok=function(){t.close()},e.cancel=function(){e.widget=null,t.close()},e.$on("closeModal",function(){t.close()})};p.$inject=["$scope","$modalInstance","widget"];var g=function(n,i,s,o){var u=e.$new();return(0,a["default"])(u,s||{}),t.open({template:r["default"],controller:p,scope:u,windowClass:o||"",resolve:{widget:function(){switch(i){case"opinionResults":return{type:"opinionReport",uuid:n.uuid,header:l.i18n.lightbox.opinionReport};case"avatarManager":return{type:"avatarManager",id:n.profileId,header:l.i18n.lightbox.changeAvatar};default:return d(n,i)}}}})},f=function(e,t){return["$scope","$modalInstance",function(i,o){var r=".modal-body",l={setButtons:function(e){i.buttons=e||[]},setHeader:function(e){i.header=e},close:o.close,ready:function(){i.isReady=l.isReady=!0}},u=(0,a["default"])(i.$new(),t,{boxContainer:l}),c=s(e)(u);i.buttons=[],i.ok=function(){o.close()},i.cancel=function(){i.buttons=[],o.close()},i.$on("closeModal",function(){o.close()}),i.$on("modal.closing",function(){"function"==typeof u.onBeforeClose&&u.onBeforeClose(),u.$destroy(),u=null,c=null,l=null}),o.opened.then(function(){n(function(){o.injectDirective(c,r)})})}]},v=function(e,n,i){var s={template:r["default"],controller:f(e,n)};i&&(s.windowClass="modal-"+i),t.open(s)},h=function(e,t,n){v(i.get(e),t,n)};(0,a["default"])(this,{loadWidget:g,loadDirective:v,loadDirectiveByTemplateURL:h,getWidget:d})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s),o=t(284),r=n(o);i.$inject=["$rootScope","$modal","$timeout","$templateCache","$compile","$resource","applicationData","appContextSrv"],exports["default"]=i},function(e,exports){e.exports='<div class="box-component lightbox"> <div class=box-heading> <span class=box-heading-label>{[{ header }]}</span> <button ng-repeat="button in buttons" ng-click=::button.action() class=btn ng-class=::button.class aria-label="{[{ ::button.label }]}"> <span ng-if=::button.text class=button-text>{[{ ::button.text }]}</span> <span ng-if=::button.icon class="button-icon svgi" ng-class="\'icon-\' + button.icon"></span> </button> <button ng-click=cancel() class="btn action-btn close-btn" aria-label=Cancel>&times;</button> </div> <div class=modal-body> <div class="initial-loader content-mini-loader" ng-hide=isReady></div> <div ng-if=widget class="content-page widget"> <div ng-switch on=widget.type class=content-page> <div ng-switch-when=issue class="ratingWidget clearfix"> <div ratings rating-widget-data=widget in-modal=true rated=true opi-change-callback=opiChangeCallback(opi) rating-change-callback=ratingChangeCallback(rating)></div> </div> <div ng-switch-when=rating class="ratingWidget clearfix"> <div ratings rating-widget-data=widget in-modal=true rated=true opi-change-callback=opiChangeCallback(opi) rating-change-callback=ratingChangeCallback(rating)></div> </div> <div ng-switch-when=opinion class="opinionWidget clearfix"> <div opinions class=responses data-type=latest opinion-widget-data=widget in-modal=true data-show-load-more-opinions=false display-opinion-box=false riposte-change-callback=riposteChangeCallback(riposte) level-change-callback=levelChangeCallback(level)></div> </div> <div ng-switch-when=survey class="miniSurveysWidget clearfix"> <div data-mini-survey=widget in-modal=true update-callback=updateCallback(answers)></div> </div> <div ng-switch-when=opinionReport class="clearfix opinion-report" ng-controller=opinionReportCtrl> <div class=loader> </div> <div class=view> </div> <div id=tooltip-container></div> </div> <div ng-switch-when=avatarManager class="clearfix avatar-manager" ng-controller=changeAvatarCtrl> <div id=opi_popup_container class=clearfix> <div class=opi_popup> <div class=opi_popup_content> <div id=opi_popup_loading_container> </div> <div id=opi_popup_content_container class=""> <div id=opi_popup_header class=clearfix></div> <div id=opi_popup_content></div> </div> <div class=opinion_action_bar></div> </div> </div> </div> <div id=opi_avatar_components style=display:none> <div id=opi_avatar_header_components> <div class="fl opi_popup_thumbnail_container"> <div class=opi_popup_thumbnail></div> </div> <div class=opi_popup_title_container> <div id=opi_popup_header_title></div> </div> <div class=opi_popup_header_right_container></div> </div> </div> </div> </div> </div> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(286),o=n(a),r=t(289),l=n(r),u=t(295),c=n(u),d=s["default"].module("previewPopups",[o["default"],l["default"]]).controller("popupsManager",c["default"]);exports["default"]=d.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(287),o=n(a),r=s["default"].module("ThingPreview",[]).service("ThingPreview",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(288),l=n(r),u=function(){function e(t,n,i){"ngInject";(0,s["default"])(this,e),this.$window=t,this.Lightbox=n,this.appContextSrv=i}return e.$inject=["$window","Lightbox","appContextSrv"],(0,o["default"])(e,[{key:"loadThingPreview",value:function(e,t){t=t||"","opigram"===this.appContextSrv.appName&&this.appContextSrv.isLoggedIn?this.Lightbox.loadDirective(l["default"],{widget:this.Lightbox.getWidget({uuid:e},"thingPreview")}):t&&(this.$window.location.href=t)}}]),e}();exports["default"]=u},function(e,exports){e.exports='<div class="ratingWidget widget content-page clearfix"> <div ratings rating-widget-data=widget in-modal=true is-preview=true box-container=boxContainer></div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(137),o=n(a),r=t(290),l=n(r),u=t(292),c=n(u),d=t(293),p=n(d),g=s["default"].module("profilePreview",[o["default"]]).service("profilePreviewService",l["default"]).controller("profilePreviewCtrl",c["default"]).directive("profilePreview",p["default"]);exports["default"]=g.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i){"ngInject";var s=t("/opi/profile/user_preview/:memberId",{},{query:{method:"POST",params:{memberId:"@memberId"},isArray:!1,async:!0}});(0,a["default"])(this,{getUserPreview:function(e){return s.query({memberId:e})},loadPreview:function(t){"opigram"===i.appName&&i.isLoggedIn?n.loadDirective(r["default"],{memberId:t}):e.location.href="/opi/profile/"+t}})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s),o=t(291),r=n(o);i.$inject=["$window","$resource","Lightbox","appContextSrv"],exports["default"]=i},function(e,exports){e.exports="<div profile-preview=memberId box-container=boxContainer></div> "},function(e,exports){"use strict";function t(e,t,n,i){"ngInject";e.data=t.getUserPreview(e.memberId),e.appContext=n,e.appData=i,e.data.$promise.then(function(){e.boxContainer.ready(),e.likes={header:i.i18n.previewPopups.thingsBothLike,data:e.data.likes},e.dislikes={header:i.i18n.previewPopups.thingsBothDislike,data:e.data.dislikes}}),e.visitFullPage=function(){ga("send","event",i.gaq.namespace,"Profile preview popup","Visit full page")},e.statusChanged=function(e){var t=e?"Member followed":"Member unfollowed";ga("send","event",i.gaq.namespace,"Profile preview popup",t)},e.boxContainer.setHeader(i.i18n.previewPopups.memberPreview),ga("send","event",i.gaq.namespace,"Profile preview popup","Open")}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$scope","profilePreviewService","appContextSrv","applicationData"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(294),s=n(i),a=function(){"ngInject";return{restrict:"A",template:s["default"],scope:{memberId:"=profilePreview",boxContainer:"=?"},controller:"profilePreviewCtrl"}};exports["default"]=a},function(e,exports){e.exports='<div class="profile-preview ng-cloak" ng-show=boxContainer.isReady> <div class="member-info clearfix"> <div class=member-avatar> <img ng-src="{[{ data.avatar }]}"/> <a ng-if="appContext.isLoggedIn && !data.private && (data.likes || data.dislikes)" ng-href="/opi/profile/{[{ memberId }]}" ng-click=visitFullPage() class="btn btn-secondary svgi icon-visit-page">{[{ appData.i18n.previewPopups.visitFullProfile }]}</a> </div> <div class=member-details> <div class=member-name>{[{ appData.i18n.general.member }]} {[{ memberId }]}</div> <div class=member-since>{[{ appData.i18n.general.member }]} {[{ appData.i18n.general.since }]} {[{ data.since }]}</div> <div class=member-counts> <div class=member-count-column> <div class=member-count> {[{ appData.i18n.general.facts }]} <span class=member-count-number>{[{ data.counts.facts }]}</span> </div> <div class=member-count> {[{ appData.i18n.general.ratings }]} <span class=member-count-number>{[{ data.counts.ratings }]}</span> </div> </div> <div class=member-count-column> <div class=member-count> {[{ appData.i18n.general.opinions }]} <span class=member-count-number>{[{ data.counts.opinions }]}</span> </div> <div class=member-count> {[{ appData.i18n.general.surveys }]} <span class=member-count-number>{[{ data.counts.surveys }]}</span> </div> </div> </div> <button ng-if="appContext.isLoggedIn && !data.private" follow-member user-id=memberId initial-status=data.follow_status change-callback=statusChanged(status)></button> </div> </div> <div ng-if=data.likes things-summary=likes></div> <div ng-if=data.dislikes things-summary=dislikes></div> <div ng-if=data.private class="member-hidden svgi icon-padlock"> <div class=member-hidden-text> {[{ appData.labels.profile_invisible_message }]} </div> </div> <div ng-if=!data.private class=btn-visit-wide> <a ng-href="/opi/profile/{[{ memberId }]}" class="btn btn-secondary" ng-click=visitFullPage()> <span class="svgi icon-visit-page">{[{ appData.i18n.previewPopups.visitFullProfile }]}...</span> </a> </div> </div> '},function(e,exports){"use strict";function t(e,t,n,i){"ngInject";e.profilePreview=function(e,n){e.preventDefault(),t.loadPreview(n)},e.opinionReport=function(e,t){e.preventDefault(),i.loadWidget({uuid:t},"opinionResults")},e.thingPreview=function(e,t,i){e.preventDefault(),n.loadThingPreview(t,i)}}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$scope","profilePreviewService","ThingPreview","Lightbox"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(137),o=n(a),r=t(297),l=n(r),u=t(301),c=n(u),d=t(303),p=n(d),g=t(304),f=n(g),v=t(305),h=n(v),m=s["default"].module("latestOpinionsWidget",[o["default"],c["default"],l["default"]]).service("opinionSrv",p["default"]).controller("latestOpinionsWidgetCtrl",f["default"]).directive("latestOpinionsWidget",h["default"]);exports["default"]=m.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(298),o=n(a),r=t(299),l=n(r),u=s["default"].module("miniOpinionWidget",[]).controller("miniOpinionWidgetCtrl",o["default"]).directive("miniOpinionWidget",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i,s,o,r){"ngInject";function l(t){"success"===t.status?e.hideOpi():u()}function u(){e.responseLevels.selected=null,e.responseLevels.hovered=null}var c=!1,d=null,p=null;e.section="nowcast",2===i.electionDay&&(e.section="results"),e.responseLevels={levels:a["default"].copy(i.responses.getResponseButtonsAsArray()),selected:null,hovered:null},e.appData=i,e.data.response&&e.data.response.agree&&a["default"].forEach(e.responseLevels.levels,function(t){t.level===e.data.response.agree&&(e.responseLevels.selected=t)}),e.responseLevels.selected||(p=e.$watch("responseLevels.selected",function(){e.responseLevels.selected&&(e.data.response.agree=e.responseLevels.selected.level,s.agreeResponse(e.data.uuid,e.responseLevels.selected.level,l,u))})),e.getBackgroundStyle=function(){return e.data.thing_thumbnail?{backgroundImage:"url("+e.data.thing_thumbnail+")"}:{}},e.profilePreview=function(e,t){e.preventDefault(),o.loadPreview(t)},e.thingPreview=function(e,t,n){e.preventDefault(),r.loadThingPreview(t,n)},e.hideOpi=function(){!c&&a["default"].isDefined(t.responseCallback)&&(c=!0,e.responseCallback({opi:e.data}))},e.confirmReport=function(){e.reportText=i.i18n.reportToYougov.question_text,e.hideAnswerButtons=!1,e.displayReportConfirm=!0},e.cancelReport=function(){e.displayReportConfirm=!1},e.report=function(){s.report(e.data.uuid,"Other",function(t){e.hideAnswerButtons=!0,"success"===t.status||"duplicate"===t.status?e.reportText=i.i18n.reportToYougov.success_message:e.reportText=i.i18n.reportToYougov.error_message,n(function(){e.reportEnabled=!1},2e3)},function(){e.reportText=i.i18n.reportToYougov.error_message})},e.$on("$destroy",function(){d&&d(),p&&p(),e.responseLevels=null}),d=e.$watch("data",function(e,t){e!==t&&u()})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s);i.$inject=["$scope","$attrs","$timeout","applicationData","opinionSrv","profilePreviewService","ThingPreview"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),s=n(i),a=function(e){"ngInject";return{restrict:"A",replace:!0,controller:"miniOpinionWidgetCtrl",template:s["default"],scope:{data:"=miniOpinionWidget",skipEnabled:"=?",reportEnabled:"=?",recalcEnabled:"=?",responseCallback:"&"},link:function(t,n){function i(){e(function(){var e=n.find(".latest-opinion-info").outerHeight(!0)+n.find(".latest-opinion-content").outerHeight(!0)+n.find(".mini-response-buttons").outerHeight(!0)+n.find(".response-level-labels").outerHeight(!0);n.height(e)},200)}t.recalcEnabled&&(n.on("click",i),i()),t.$on("$destroy",function(){n.off("click")})}}};a.$inject=["$timeout"],exports["default"]=a},function(e,exports){e.exports='<div class=latest-opinion> <div class="latest-opinion-info clearfix"> <div class=latest-opinion-thing-thumbnail ng-click="ThingPreview($event, data.thing_uuid, data.thing_url)"> <div class="{[{ data.thing_class }]} node-type-icon-white"></div> <div class=thumbnail ng-style=getBackgroundStyle()></div> </div> <div class=latest-opinion-details> <a class=latest-opinion-target ng-href="{[{ data.thing_url }]}">{[{ data.thing_name }]}</a> <span class=latest-opinion-when> {[{ data.time_ago }]} {[{ ::appData.i18n.general.by }]} </span> <a class=latest-opinion-member ng-href="/opi/profile/{[{ data.member_id }]}">{[{ ::appData.i18n.general.member }]} {[{ data.member_id }]}</a> <span ng-show=data.constituency_name>{[{ ::appData.i18n.general.in }]}</span> <a ui-sref="constituencies.constituency.section({\'id\': data.constituency_id, \'section\': \'{[{ section }]}\', \'subsection\': \'\'})" ng-show=data.constituency_name class="constituency link-dark">{[{ data.constituency_name }]}</a> </div> </div> <div limited-text=data.limited_content class=latest-opinion-content></div> <div response-levels=responseLevels class=mini-response-buttons></div> <div class="clearfix response-level-labels-container"> <div class=response-level-labels> <div ng-repeat="level in responseLevels.levels track by $index" ng-show="responseLevels.selected.level == level.level || responseLevels.hovered.level == level.level" class="response-level-label ng-cloak" ng-class=level.css_class> {[{ level.label }]} </div> </div> <button ng-if=skipEnabled class="btn btn-inline skip-opi" ng-click=hideOpi() ng-hide=responseLevels.hovered> {[{ ::appData.i18n.general.skip }]} <span class=skip-opi-cross>&times;</span> </button> <div ng-if=reportEnabled class=report-container> <button class="btn btn-inline report-to-yougov" ng-click=confirmReport() ng-show=!displayReportConfirm><span>{[{ ::appData.i18n.general.report }]}</span><span class="svgi icon-nuke"></span></button> <div ng-show=displayReportConfirm class="clearfix report-confirm"> <div class=pull-left>{[{ reportText }]}</div> <div class="answer-buttons pull-right" ng-hide=hideAnswerButtons> <button class="btn btn-link" ng-click=report()>{[{ ::appData.i18n.general.yes }]}</button> <button class="btn btn-link" ng-click=cancelReport()>{[{ ::appData.i18n.general.no }]}</button> </div> </div> </div> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i){"ngInject";e.data.levels=n("orderBy")(e.data.levels,"level",!1),e.getConditions=function(t){return{selected:e.data.selected===t,"no-answer":!e.data.selected,"icon-x":t.css_class.toLowerCase().indexOf("disagree")!==-1,"icon-tick":t.css_class.toLowerCase().indexOf("disagree")===-1}},e.selectResponse=function(n){e.data.selected=n,window.ga&&i.gaq&&window.angular_data&&"HomePage"===i.gaq.namespace&&ga("send","event",i.gaq.namespace,"Opinions map","Response selected - level: "+n.level),a["default"].isDefined(t.selectCallback)&&e.selectCallback({levels:e.data})},e.onMouseEnter=function(t){e.data.selected||(e.data.hovered=t)},e.onMouseLeave=function(){e.data.selected||(e.data.hovered=null)}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s),o=t(302),r=n(o);i.$inject=["$scope","$attrs","$filter","applicationData"];var l=function(){"ngInject";return{restrict:"A",replace:!0,controller:"responseLevelsCtrl",template:r["default"],scope:{data:"=responseLevels",selectCallback:"&?"}}},u=a["default"].module("responseLevels",[]).controller("responseLevelsCtrl",i).directive("responseLevels",l);exports["default"]=u.name},function(e,exports){e.exports='<div class=response-buttons> <button ng-repeat="level in data.levels track by $index" ng-click=selectResponse(level) ng-class=getConditions(level) ng-mouseenter=onMouseEnter(level) ng-mouseleave=onMouseLeave() class="response-button svgi {[{ level.css_class }]}"> <span class=response-button-label>{[{ level.label }]}</span> </button> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i){"ngInject";var s=e("/opi/widgets/followed_feed/:size/:last_opi_uuid",{},{query:{method:"GET",params:{size:"@size",last_opi_uuid:"@last_opi_uuid"},isArray:!0}}),o=e("/opi/widgets/latest_opinions/:size/:lastOpiUUID",{},{query:{method:"POST",params:{reviewed:"@reviewed",lastOpiUUID:"@lastOpiUUID"},isArray:!0}}),r=e("/opi/widgets/recent_opinions/:size/:lastOpiUUID",{},{query:{method:"GET",params:{size:"@size",lastOpiUUID:"@lastOpiUUID"},isArray:!0}}),l=e("/opi/widgets/opinionrespond/:uuid/agree/:level",{},{save:{method:"POST",params:{uuid:"@uuid",level:"@level"}}}),u=e("/opi/widgets/opinionrespond/:uuid/report",{},{query:{method:"POST",params:{uuid:"@uuid"}}});(0,a["default"])(this,{getFollowedOpinions:function(e,t,n,i){return s.query({size:e,last_opi_uuid:t},n,i)},agreeResponse:function(e,s,a,o){var r={uuid:e,level:s};n.isLoggedIn?l.save(r,a,o):(t.enableLocalStorage&&i.save({type:"responseLevel",uuid:e,answerData:r}),a({status:"success"}))},report:function(e,t,n,i){return u.query({uuid:e,reason:t},n,i)},getLatestOpinions:function(e,t,n,i){return o.query({size:e.size,lastOpiUUID:t},{reviewed:e.reviewed},n,i)},getRecentOpinions:function(e,t,n,i){return r.query({size:e.size,lastOpiUUID:t},{reviewed:e.reviewed},n,i)}})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s);i.$inject=["$resource","applicationData","appContextSrv","anonymousAnswersSrv"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i){"ngInject";function s(t){d=!1,(t.length>=c||e.latestOpinions&&t.length)&&(l=t.pop()),e.latestOpinions||(e.latestOpinions=t),p.length&&e.responseSelected(p.pop())}function o(){var n=void 0,i=c,o=null;d=!0,e.latestOpinions&&(i=1,o=e.latestOpinions[e.latestOpinions.length-1].uuid),n="object"===u?{size:i}:i,a["default"].isDefined(t.opinionsProvider)?e.opinionsProvider().then(function(e){s(e)}):r(n,o,s,a["default"].noop)}var r=void 0,l=null,u="object",c=a["default"].isDefined(t.size)?parseInt(e.size)+1:4,d=!1,p=[];switch(e.headerMessage=n.i18n.opinions.latestOpinionOn,e.header&&(e.headerMessage=e.header),e.appData=n,e.limit=c,e.mode){case"followed":u="number",r=i.getFollowedOpinions,e.headerMessage=n.i18n.opinions.myOpinionFeed,e.linkMore="/opi/user/followed_opinions";break;case"latest":r=i.getLatestOpinions;break;case"feed":e.linkMore="";break;case"reviewed":default:e.linkMore="/opi/myfeed#/opinions",r=i.getRecentOpinions}e.responseSelected=function(t){if(d)return void p.push(t);var n=e.latestOpinions.indexOf(t);n>-1&&e.latestOpinions.splice(n,1),e.loadNextOpi()},e.loadNextOpi=function(){l&&(e.latestOpinions.push(l),l=null,o())},o()}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s);i.$inject=["$scope","$attrs","applicationData","opinionSrv"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(103),s=n(i),a=t(306),o=n(a),r=function(e,t,n){"ngInject";function i(i,a){function o(){r.css("height",l.height()-u-r.offset().top),r.perfectScrollbar("update")}var r=(0,s["default"])(".latest-opinions",a),l=(0,s["default"])("body"),u=(0,s["default"])(".unified-footer").outerHeight(),c=!!i.reportEnabled&&JSON.parse(i.reportEnabled),d=!!i.scrollEnabled&&JSON.parse(i.scrollEnabled);i.displayReport=!(!c||!n.isLoggedIn),i.displaySkip=!i.skipEnabled||JSON.parse(i.skipEnabled),i.doRecalc=!i.recalcEnabled||JSON.parse(i.recalcEnabled),i.appContext=n,d&&(o(),(0,s["default"])(e).on("resize",o),r.perfectScrollbar({suppressScrollX:!0})),i.$watch("appContext.isLoggedIn",function(e,n){e&&e!==n&&t(function(){o()})})}return{restrict:"A",replace:!0,controller:"latestOpinionsWidgetCtrl",template:o["default"],scope:{mode:"@?latestOpinionsWidget",size:"@?",scrollEnabled:"@?",reportEnabled:"@?",recalcEnabled:"@?",skipEnabled:"@?",opinionsProvider:"&?",header:"@?"},link:i}};r.$inject=["$window","$timeout","appContextSrv"],exports["default"]=r},function(e,exports){e.exports='<div class="box-component box-component-small latest-opinions-widget ng-cloak" ng-show="latestOpinions.length > 0"> <div class=box-heading> <div ng-class="{\'svgi icon-broadcast\': mode !== \'followed\'}" class=box-heading-label> {[{ headerMessage }]} </div> </div> <div class=latest-opinions> <div ng-repeat="opinion in latestOpinions | limitTo: limit" mini-opinion-widget=opinion skip-enabled=displaySkip report-enabled=displayReport recalc-enabled=doRecalc response-callback=responseSelected(opinion)></div> </div> <div ng-if=linkMore class="box-footer ng-cloak"> <a ng-if=linkMore ng-href="{[{ linkMore }]}" class="btn btn-link box-footer-more">{[{ appData.i18n.general.more }]}</a> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=s["default"].module("userInfo",[]).controller("userInfoCtrl",["appContextSrv","applicationData",function(e,t){"ngInject";this.data=e.user,this.i18n=t.i18n,this.appContextSrv=e}]);exports["default"]=a.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(143),o=n(a);t(144);var r=t(309),l=n(r),u=t(314),c=n(u),d=t(319),p=n(d),g=t(324),f=n(g),v=t(327),h=n(v),m=t(335),b=n(m),y="ct.ui.router.extras",_=s["default"].module("liveSurveysResults",[o["default"],y,l["default"],c["default"],p["default"],f["default"],h["default"]]).config(["$stateProvider","$urlRouterProvider",function(e,t){"ngInject";location.pathname.match(/\/surveys\/results/)&&(t.when("","/"),t.otherwise("/"),e.state("list",{url:"/",views:{"main-view":{template:b["default"],controller:"liveSurveysListCtrl",controllerAs:"liveSurveysList"},"right-column-view":{template:"<section live-survey-share></section>"}}}).state("survey",{url:"/survey/:uuid",views:{"main-view":{template:'<live-survey-results standalone="false"></live-survey-results>'},"right-column-view":{template:"<section live-survey-share></section><section related-nodes-articles></section>"}}}).state("survey.question",{url:"/question/{question_uuid}/{section}"}))}]);exports["default"]=_.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(137),o=n(a),r=t(310),l=n(r),u=t(311),c=n(u),d=t(312),p=n(d),g=s["default"].module("relatedNodesArticles",[o["default"]]).service("relatedNodesArticlesSrv",l["default"]).controller("relatedNodesArticlesCtrl",c["default"]).directive("relatedNodesArticles",p["default"]);exports["default"]=g.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){"ngInject";var t=e("/opi/myfeed/get_survey_nodes",{},{query:{method:"POST",isArray:!0}}),n=e("/node_objects/",{},{query:{method:"POST",isArray:!0}});(0,a["default"])(this,{getRelatedNodes:function(e){return t.query({},{survey_uuid:e}).$promise},getRelatedArticles:function(e,t,i){return n.query({},{uuid:e,type:"articles",limit:t,site_id:i}).$promise}})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s);i.$inject=["$resource"],exports["default"]=i},function(e,exports){"use strict";function t(e,t,n){"ngInject";var i=this,s=e.uuid,a=4;i.labels=n.i18n,i.getRelatedNodeArticles=function(){t.getRelatedNodes(s).then(function(e){i.relatedThings=e.length>0?e:[]}).then(function(){return i.relatedThings.length>0?t.getRelatedArticles(i.relatedThings.map(function(e){return e.uuid}),a,n.siteId):[]}).then(function(e){e.length>0&&(i.relatedArticles=e)})},s&&i.getRelatedNodeArticles()}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$stateParams","relatedNodesArticlesSrv","applicationData"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(313),s=n(i),a=function(){"ngInject";return{restrict:"A",replace:!0,controller:"relatedNodesArticlesCtrl",controllerAs:"relatedNodesArticles",template:s["default"],scope:{}}};exports["default"]=a},function(e,exports){e.exports='<section> <div class="simple-box opi-thing-links" ng-show="relatedNodesArticles.relatedThings.length > 0"> <div class=simple-box-header>{[{ ::relatedNodesArticles.labels.live_survey_results.see_more_on.header }]}</div> <ul class=things-list> <li ng-repeat="thing in relatedNodesArticles.relatedThings" ng-class="{\'even\': $odd, \'odd\': $even}"> <a ng-href={[{thing.url}]} ng-style="{ \'background-image\': \'url({[{thing.thumbnail}]})\' }"> <span class=thing-name>{[{thing.name}]}</span> </a> </li> </ul> </div> <div class="simple-box related-articles" ng-show="relatedNodesArticles.relatedArticles.length > 0"> <ul> <li ng-repeat="article in relatedNodesArticles.relatedArticles"> <a ng-href={[{article.url}]} class=link-dark> <span class=article-thumbnail ng-style="{ \'background-image\': \'url({[{article.image}]}?ch=100&amp;w=120)\' }"></span> <span class=article-title>{[{article.title}]}</span> </a> </li> </ul> </div> </section> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(315),o=n(a),r=t(316),l=n(r),u=t(317),c=n(u),d=s["default"].module("liveSurveyShare",[]).service("liveSurveyShareSrv",o["default"]).controller("LiveSurveyShareCtrl",l["default"]).directive("liveSurveyShare",c["default"]);exports["default"]=d.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(){"ngInject";(0,a["default"])(this,{shared:{shareBox:{}}})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s);exports["default"]=i},function(e,exports){"use strict";function t(e,t,n){"ngInject";var i=this;this.shareBox={link:"",title:""},this.labels=n.i18n,this.liveSurveyShareSrv=t,
e.$watch(function(){return i.liveSurveyShareSrv.shared.shareBox},function(e){i.shareBox.link=e.link,i.shareBox.title=e.title})}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$scope","liveSurveyShareSrv","applicationData"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(318),s=n(i),a=function(){"ngInject";return{restrict:"A",replace:!0,controller:"LiveSurveyShareCtrl",controllerAs:"liveSurveyShare",template:s["default"]}};exports["default"]=a},function(e,exports){e.exports='<section class="clearfix simple-box social-bookmakrs-container"> <span class=bookmark-label>{{ ::liveSurveyShare.labels.live_survey_results.social_bookmarks.header }}</span> <div class="share-tiles share-box" share-box=liveSurveyShare.shareBox></div> </section> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(137),o=n(a),r=t(314),l=n(r),u=t(153),c=n(u),d=t(320),p=n(d),g=t(321),f=n(g),v=t(322),h=n(v),m=s["default"].module("liveSurveyResults",[o["default"],l["default"],c["default"]]).service("liveSurveyResultsSrv",p["default"]).controller("liveSurveyResultsCtrl",f["default"]).component("liveSurveyResults",h["default"]);exports["default"]=m.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){"ngInject";var t=e("/opi/surveys/results/:uuid/data",{},{query:{method:"GET",params:{uuid:"@uuid"},isArray:!1}});(0,a["default"])(this,{getSurveyResults:function(e){return t.query({uuid:e}).$promise}})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s);i.$inject=["$resource"],exports["default"]=i},function(e,exports){"use strict";function t(e,t,n,i,s,a,o,r){"ngInject";var l=this;l.$onInit=function(){function u(){var e="";if(l.surveyData.finalResults)if(e=l.labels.live_survey_results.surveys_results.description.replace("%total%",l.surveyData.total),l.surveyData.surveyDate){var t=l.labels.live_survey_results.surveys_results.end_date.replace("%survey_date%",i("date")(l.surveyData.surveyDate,"mediumDate"));e=e.replace("%survey_date%"," "+t)}else e=e.replace("%survey_date%","");else e=l.labels.live_survey_results.surveys_results.interim_survey_results,l.surveyData.surveyDate&&(e+=" "+l.labels.live_survey_results.surveys_results.interim_survey_results_date.replace("%survey_date%",i("date")(l.surveyData.surveyDate,"short"))),e+=".";return e}function c(){var e=n.absUrl().replace(/#.*/,"");return e+"/survey/"+d+"/"}var d=e.params.uuid||l.uuid||null,p="/opi/share/surveys/results/survey/";l.labels=s.i18n,l.shareBox={link:[n.protocol(),"://",n.host(),p,d].join(""),title:""},l.getSurveyResults=function(){l.isLoading=!0,o.getSurveyResults(d).then(function(e){l.isLoading=!1,l.questionUuid&&(e.questionResults=e.questionResults.filter(function(e){return e.questionUUID===l.questionUuid})),l.surveyData=e,l.header=l.labels.live_survey_results.surveys_results.results.replace("%s",e.name),l.resultsDescription=u(),l.shareBox.title=l.header,r.shared.shareBox=l.shareBox})},d&&(l.getSurveyResults(),l.standalone||t(function(){a.set("live-survey-results-"+d,c())},0,!1))}}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$state","$timeout","$location","$filter","applicationData","disqus","liveSurveyResultsSrv","liveSurveyShareSrv"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(323),s=n(i),a={bindings:{uuid:"@?",questionUuid:"@?",standalone:"=",withoutHeader:"@?",withoutRedirects:"@?",questionsLimit:"@?",questionSection:"@?"},controller:"liveSurveyResultsCtrl",template:s["default"]};exports["default"]=a},function(e,exports){e.exports='<div ng-if=::!$ctrl.standalone ng-show=$ctrl.isLoading class=loading><img src=/opi/images/content-mini-loader.gif /></div> <div ng-show=!$ctrl.isLoading class=live-survey-results> <header ng-if=::!$ctrl.standalone class=header> <div class="clearfix header-additional"> <div class=survey-results-text> <span class="svgi icon-live-survey-results active see-results"></span> <span>{[{ ::$ctrl.labels.live_survey_results.surveys_results.header }]}</span> </div> <a class=return-link ui-sref=list>&lt;&lt;&lt; {[{ ::$ctrl.labels.live_survey_results.surveys_results.back_to_list_mobile }]}</a> <span class=survey-results-date>{[{ $ctrl.surveyData.resultsDate | date:\'mediumDate\' }]}</span> </div> <div class=header-main> <a class=return-link ui-sref=list>&lt;&lt;&lt; {[{ ::$ctrl.labels.live_survey_results.surveys_results.back_to_list }]}</a> <div class=survey-name ng-bind-html=::$ctrl.header></div> <p ng-bind-html=$ctrl.resultsDescription></p> </div> <div class="header-share clearfix"> <div class=contact-info> <span class=contact-header>{[{ $ctrl.labels.live_survey_results.rhs_sideabar.header }]} </span> <span class=contact-info-header>{[{ $ctrl.labels.live_survey_results.contact_info.press_office_header }]}</span> {[{ $ctrl.labels.live_survey_results.contact_info.press_office_phone }]} </div> <div class="survey-share clearfix"> <div class=bookmark-label>{[{ $ctrl.labels.live_survey_results.social_bookmarks.header }]} <span class=bookmark-label-extended> {[{ $ctrl.labels.live_survey_results.social_bookmarks.header_extended }]}</span></div> <div class=share-box share-box=$ctrl.shareBox></div> </div> </div> </header> <header ng-if=::$ctrl.standalone> <p class=results-description ng-bind-html=$ctrl.resultsDescription></p> </header> <section ng-repeat="questionResult in $ctrl.surveyData.questionResults track by $index" question-results survey-uuid=$ctrl.surveyData.surveyUUID question=questionResult sections=$ctrl.surveyData.sections default-section=$ctrl.surveyData.default_section question-section=$ctrl.questionSection standalone=$ctrl.standalone question-no="$index + 1" survey-name=$ctrl.surveyData.name> </section> <div class=disqus ng-if=::!$ctrl.standalone> <div id=disqus_thread ng-show=$ctrl.surveyData.finalResults></div> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(137),o=n(a),r=t(314),l=n(r),u=t(325),c=n(u),d=t(326),p=n(d),g=s["default"].module("liveSurveysList",[o["default"],l["default"]]).service("liveSurveysListSrv",c["default"]).controller("liveSurveysListCtrl",p["default"]);exports["default"]=g.name},function(e,exports){"use strict";function t(e){"ngInject";var t=e("surveys/list?from=:from&limit=:limit",{},{query:{method:"GET",isArray:!0}});this.get=function(e,n){return t.query({from:e,limit:n}).$promise}}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$resource"],exports["default"]=t},function(e,exports){"use strict";function t(e,t,n,i){"ngInject";function s(){o(c,u+1)}function a(){c=l.surveys[l.surveys.length-1].uuid,o(c,u+1)}function o(e,t){l.isLoading=!0,n.get(e,t).then(function(e){e=e.map(r),l.isLoading=!1,l.showLoadMoreBtn=e.length>u,l.surveys=l.surveys.concat(e.slice(0,u))})["catch"](function(){})}function r(t){return t.url=[e.absUrl(),p,t.uuid].join(""),t}var l=this,u=10,c=null,d="/opi/share/surveys/results/",p="survey/";return l.surveys=[],l.labels=t.i18n,l.loadMoreSurveys=a,l.showLoadMoreBtn=!1,l.shareBox={link:[e.protocol(),"://",e.host(),d].join(""),title:l.labels.live_survey_results.surveys_list.header},i.shared.shareBox=l.shareBox,s()}Object.defineProperty(exports,"__esModule",{value:!0}),t.$inject=["$location","applicationData","liveSurveysListSrv","liveSurveyShareSrv"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(143),o=n(a),r=t(328),l=n(r),u=t(333),c=n(u),d=s["default"].module("questionResults",[o["default"]]).controller("questionResultsCtrl",l["default"]).directive("questionResults",c["default"]);exports["default"]=d.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i,s,o){"ngInject";function l(e,t){var n=e===y.question.questionUUID;d((n||y.standalone)&&t&&b(t)?t:_),(n||y.standalone)&&c()}function u(e,t){var n=e&&(0,r["default"])(e.target).closest(".section-option").data().sectionName||t;window.ga&&ga("send","event",o.gaq.namespace,"Live Results segment change","Segment "+n+" clicked"),b(n)&&(d(n),c(),(0,r["default"])(e.currentTarget).hasClass("section-options")&&h())}function c(){e.standalone||n.path("/survey/"+T+"/question/"+y.question.questionUUID+"/"+y.currentSection).replace(),y.shareBox.link=[n.protocol(),"://",n.host(),k,T,x,y.question.questionUUID,"/",y.currentSection].join("")}function d(e){y.currentSection=e,y.currentSectionIcon=w[e].icon,y.currentSectionName=w[e].header,y.header=w[y.currentSection].header,y.answerOptions=g(y.question.answerResults,y.currentSection),y.headerKeys=p(y.currentSection),y.headerLabels=w[e].headerItems}function p(e){if(e===_)return[];var t=[];for(var n in w[y.currentSection].headerItems)t.push(n);return t}function g(e,t){return t===_?[]:e.map(function(e){return{label:e.label,overall:e.overall,answers:e[w[t].valueObject]}})}function f(e,t){var n=(0,r["default"])(e.target).closest(".section-option"),a=i.find(".tooltip"),o=n.length>0&&n.data().sectionName||t;return b(o)?(y.tooltipText=w[o].header,void s(function(){var e=n.width(),t=n.position().left,i=5,s=a.width(),o=t+e/2,r=o-s/2,l=e*y.sections.length;a.attr("style",""),r+s>=l?a.css({right:o-l-i}):a.css({left:r}),a.hasClass("active")||a.addClass("active")},0)):void a.removeClass("active")}function v(){i.find(".tooltip").removeClass("active")}function h(){i.find(".section-options").toggleClass("active")}function m(e){return{name:e,iconName:w[e].icon,iconNameDisabled:w[e].iconDisabled,enabled:b(e)}}function b(e){var t=y.question.answerResults[0];if(!t)return!1;var n=w[e];return!!n&&t[n.valueObject]}var y=this,_=e.defaultSection||"",S=t.params.question_uuid||"",M=t.params.section||e.questionSection,w=e.sections,k="/opi/share/surveys/results/survey/",x="/question/",T=e.surveyUuid||t.params.uuid;y.labels=o.i18n,y.questionNo=e.questionNo,y.question=e.question,y.currentSection=e.defaultSection,y.header=w[_].header,y.sections=(0,a["default"])(w).map(m),y.currentSectionIcon=y.sections.filter(function(e){return e.name===y.currentSection}).iconName,y.currentSectionName=w[y.currentSection].header,y.headerKeys=[],y.answerOptions=[],y.tooltipText="",y.goToSection=u,y.toogleTooltipText=f,y.hideTooltip=v,y.toogleMobileNavigation=h,y.standalone=e.standalone,y.shareBox={link:[n.protocol(),"://",n.host(),k,T,x,y.question.questionUUID,"/",y.currentSection].join(""),title:e.surveyName},l(S,M)}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(329),a=n(s),o=t(103),r=n(o);i.$inject=["$scope","$state","$location","$element","$timeout","applicationData"],exports["default"]=i},,,,,function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(334),s=n(i),a=function(){"ngInject";return{restrict:"EA",replace:!0,transclude:!0,controller:"questionResultsCtrl",controllerAs:"questionResults",template:s["default"],scope:{question:"=?",surveyUuid:"=?",questionNo:"=?",surveyName:"=?",sections:"=?",defaultSection:"=?",questionSection:"=?",standalone:"=?"}}};exports["default"]=a},function(e,exports){e.exports='<section class=question-result> <section class=mobile-navigation ng-show=questionResults.question.finalResults> <div class=section-select-container> <div class="section-selected section-option clearfix" ng-click=questionResults.toogleMobileNavigation()> <div class="svgi {[{ questionResults.currentSectionIcon }]}"></div> <div class=section-name>{[{ questionResults.currentSectionName }]}</div> <div class=triangle-down-dark></div> </div> <div class=section-options ng-click=questionResults.goToSection($event)> <div ng-repeat="section in ::questionResults.sections track by $index" class="section-option clearfix" data-section-name="{[{ section.name }]}" ng-class="{ \'section-selected\': questionResults.currentSection === section.name, \'disabled\' : !section.enabled }"> <div class=svgi ng-class="{ \'{[{section.iconName}]}\' : section.enabled, \'{[{section.iconNameDisabled}]}\' : !section.enabled }"></div> <div class=section-name>{[{ ::section.name }]}</div> </div> </div> </div> </section> <section ng-if=questionResults.questionNo class=question-header> <span class=question-number>{[{ ::questionResults.questionNo }]}.</span> {[{ ::questionResults.question.label }]} </section> <section ng-switch on=questionResults.currentSection> <div ng-switch-when=toplines> <div class=section-header>{[{ ::questionResults.labels.live_survey_results.sections.toplines.header }]}</div> <div class=toplines> <div class=section-answer ng-repeat="answer in ::questionResults.question.answerResults"> <div class="section-answer-title clearfix"> <span>{[{ ::answer.label }]}</span> <span class=pull-right>{[{ ::answer.overall }]}%</span> </div> <div class=bar-container> <div class=bar ng-style="{\'width\': answer.overall + \'%\'}"></div> </div> </div> </div> </div> <div ng-switch-default> <div class=section-answers> <div class=answer-option ng-repeat="answerOption in ::questionResults.answerOptions track by $index"> <div class=answer-option-label>{[{ ::answerOption.label }]}</div> <div class="answer-option-demographics clearfix"> <span class=answer-option-header>{[{ ::questionResults.labels.live_survey_results.question_results.total }]}</span> <span class="answer-option-value answer-total-value">{[{ ::answerOption.overall }]}%</span> </div> <div class="answer-option-demographics clearfix" ng-repeat="headerKey in ::questionResults.headerKeys track by $index"> <span class=answer-option-header>{[{ ::questionResults.headerLabels[headerKey] }]}</span> <span class=answer-option-value> {[{ ::answerOption.answers[headerKey] }]}%</span> </div> </div> </div> <table class=section-answers-table> <thead> <tr class=section-answer-row> <th class="section-header section-col-question"> {[{ ::questionResults.labels.live_survey_results.sections[questionResults.currentSection].header }]}<span class=pull-right>%</span> </th> <th class="section-col-total section-col-item-header">{[{ ::questionResults.labels.live_survey_results.question_results.total }]}</th> <th class=section-col-sepearator></th> <th class=section-col-item-header ng-repeat-start="headerKey in ::questionResults.headerKeys track by $index"> {[{ ::questionResults.headerLabels[headerKey] }]} </th> <th ng-repeat-end class=section-col-sepearator></th> </tr> </thead> <tbody class=section-answers> <tr class=section-answer-row ng-repeat="answerOption in ::questionResults.answerOptions track by $index"> <td class=section-col-question>{[{ answerOption.label }]}</td> <td class="section-col-item section-col-total"> {[{ ::answerOption.overall }]} </td> <td class=section-col-sepearator></td> <td class=section-col-item ng-repeat-start="headerKey in ::questionResults.headerKeys track by $index"> {[{ ::answerOption.answers[headerKey] }]} </td> <td ng-repeat-end class=section-col-sepearator></td> </tr> </tbody> </table> </div> </section> <section class=navigation ng-show=questionResults.question.finalResults> <div class=tooltip> <div class=tooltip-content> {[{ ::questionResults.labels.live_survey_results.question_results.seeResults }]} {[{ questionResults.tooltipText }]} </div> <div class=triangle-down></div> </div> <div class=nav-section ng-click=questionResults.goToSection($event) ng-mouseleave=questionResults.hideTooltip()> <div ng-repeat="section in ::questionResults.sections track by $index" class=section-option data-section-name="{[{ section.name }]}" ng-class="{ \'active\': questionResults.currentSection === section.name, \'enabled\' : section.enabled }" ng-mouseover=questionResults.toogleTooltipText($event)> <div class=triangle-up></div> <div class=nav-button> <div class=svgi ng-class="{ \'{[{section.iconName}]}\' : section.enabled, \'{[{section.iconNameDisabled}]}\' : !section.enabled }"></div> <div class=img-fade></div> </div> </div> </div> </section> <section class="share clearfix"> <div class=share-title>{[{ questionResults.labels.live_survey_results.social_bookmarks.header }]}</div> <div class=share-box share-box=questionResults.shareBox share-icon-type=grey-light></div> </section> </section> '},function(e,exports){e.exports='<div class=live-survey-list> <h2>{[{ ::liveSurveysList.labels.live_survey_results.surveys_list.header }]}</h2> <div class="mobile-rhs clearfix"> <section class="simple-box contact-info"> <span class=rhs-header>{[{ ::liveSurveysList.labels.live_survey_results.rhs_sideabar.header }]} </span> <span class=contact-info-header>{[{ ::liveSurveysList.labels.live_survey_results.contact_info.press_office_header }]}</span> {[{ ::liveSurveysList.labels.live_survey_results.contact_info.press_office_phone }]} </section> <section class="clearfix simple-box social-bookmakrs-container"> <span class=bookmark-label>{[{ ::liveSurveysList.labels.live_survey_results.social_bookmarks.header }]}</span> <div class="share-tiles share-box" share-box=liveSurveysList.shareBox></div> </section> </div> <ul ng-show="liveSurveysList.surveys.length > 0"> <li ng-repeat="survey in liveSurveysList.surveys track by $index"> <a ng-href={[{survey.url}]}> <span class="svgi icon-archive"></span> <span> <span class=survey-name>{[{ ::survey.name }]}</span> <span ng-if="survey.questions.length > 0" class=question>{[{ ::survey.questions[0].label }]}</span> <span class=date> {[{ ::survey.live_results_to | date: \'mediumDate\' }]} </span> <span class="svgi icon-menu-arrow"></span> </span> </a> </li> </ul> <div class=loading ng-show=liveSurveysList.isLoading><img src=/opi/images/content-mini-loader.gif /></div> <div class=load-more-container> <button ng-show="!liveSurveysList.isLoading && liveSurveysList.showLoadMoreBtn" class="btn load-more" ng-click=liveSurveysList.loadMoreSurveys($event)>{[{ ::liveSurveysList.labels.general.loadMore }]}</button> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(337),o=n(a),r=t(364),l=n(r),u=t(368),c=n(u),d=t(369),p=n(d),g=s["default"].module("ratings",[o["default"],l["default"]]).service("Ratings",c["default"]).directive("ratings",p["default"]);exports["default"]=g.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(338),o=n(a),r=t(358),l=n(r),u=s["default"].module("thing",[o["default"]]).directive("thing",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(153),o=n(a),r=t(339),l=n(r),u=t(346),c=n(u),d=t(349),p=n(d),g=t(352),f=n(g),v=t(353),h=n(v),m=t(354),b=n(m),y=s["default"].module("opinions",[o["default"],l["default"],c["default"],p["default"]]).service("Opinions",f["default"]).factory("NoOpinion",h["default"]).directive("opinions",b["default"]);exports["default"]=y.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(340),o=n(a),r=s["default"].module("opinion",[]).directive("opinion",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(172),s=n(i),a=t(103),o=n(a);t(341);var r=t(131),l=n(r),u=t(342),c=n(u),d=t(345),p=n(d),g={get:function(e){var t={offset:[-13,-1],effect:"slide",delay:200,direction:"down",bounce:"true"};return"undefined"!=typeof e&&(t.tip=e,t.delay=500,t.events={def:"click, mouseleave",tooltip:"click mouseenter, mouseleave"}),t},getDynamic:function(){return{bottom:{direction:"down",bounce:!1}}}},f=function(e,t){var n="/opi/widgets/opinionrespond/"+e+"/report",i={uuid:e,reason:t};o["default"].ajax({type:"POST",url:n,data:(0,s["default"])(i),dataType:"json",contentType:"application/json; charset=utf-8",timeout:1e4,cache:!1}).then(function(e){(0,o["default"])(".report_options","#opinion_report_opinion_tabs_container").fadeOut("fast",function(){var t=null;switch(e.status){case"success":t=".success";break;case"duplicate":t=".duplicate";break;default:t=".error"}(0,o["default"])(t,"#opinion_report_opinion_tabs_container").fadeIn("fast")})})["catch"](function(e){console.error(e)})},v=function(e,t,n,i,s,a,r,u,d,v,h,m){"ngInject";return{require:"^opinions",restrict:"E",scope:{opinion:"=opinionData",isEmbedded:"=?",inModal:"=?",riposteSaveCallback:"&?",modalCloseCallback:"&?"},template:c["default"],link:function(c,b,y,_){function S(){var e=(0,o["default"])(".modal-content");b.find("blockquote").css({height:e.height(),width:e.width()})}var M=t.filters||"",w=t.subViewName||"",k="opinions"+w,x=l["default"].copy(h.opinionDescriptors),T="",D=l["default"].isDefined(y.riposteSaveCallback);return c.labels=h.labels,c.opinion.response=c.opinion.response||{tags:[],text:"",agree:""},c.showNextButton=!1,c.showHorizontalProgress=!1,c.textBoxDisabled=!1,c.dirty=!1,c.appContext=v,c.isEnabled=!c.opinion.mine&&(v.isLoggedIn||c.isEmbedded),_.addOpinion(c,b),c.addOwnOpinion=c.labels.add_own_opinion.replace("%thing_name%",c.opinion.thing_name),c.displayOpinionBox=void 0!==c.opinion.thing_node_id&&!c.isEmbedded&&0===b.parents(".modal").length,c.textBoxContent=c.opinion.response.text,l["default"].forEach(x,function(e){c.opinion.response&&c.opinion.response.tags&&(e.selected=c.opinion.response.tags.indexOf(e.uuid)!==-1)}),c.descriptors=x,c.response_buttons=c.opinion.responseButtons||l["default"].copy(h.responses.getResponseButtonsAsArray()),c.predicate="level",c.showCloseButton=!_.isMyfeedWidget()||c.isEmbedded,c.isThingOpinion=_.isThingOpinion(),c.$on("$destroy",function(){_.removeOpinion(c)}),c.thingThumnailIcon={id:c.opinion.thing_node_id,type:"icon",iconClass:c.opinion.thing_class,iconUrl:c.opinion.thing_thumbnail,size:c.opinion.member_avatar===!1?"icon-lg":""},c.memberIconData={id:c.opinion.member_id,type:"icon",iconUrl:c.opinion.member_avatar,mine:c.opinion.mine},c.memberData={id:c.opinion.member_id,type:"link"},c.thingData={id:c.opinion.thing_node_id,type:"link",title:c.opinion.thing_name},c.ellipsisSeparator=" ",c.opinion.content.indexOf(" ")===-1&&(c.ellipsisSeparator=""),c.setContent=function(){!v.device.isMobile&&c.opinion.content.length>150?(c.content=c.opinion.short_content,c.opinion.long_content=c.opinion.content.trim().replace(/(\r\n|\n\r|\r|\n){2,}/g,"\n\n").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")):c.content=c.opinion.content},(0,o["default"])(s).on("resize",function(){c.inModal&&v.device.isMobile&&S()}),c.setContent(),v.device.isMobile?c.inModal&&n(function(){S()},0,!1):n(function(){(0,o["default"])(".report-to-yougov",b).tooltip(g.get("#report_opinion_container")).dynamic(g.getDynamic()),b.on("click",".see-results",function(e){e.preventDefault(),e.stopPropagation(),d.loadWidget({uuid:c.opinion.uuid},"opinionResults")})},0,!1),c.isEnabled?(c.bindEvents=function(){b.on("click",function(e){e.stopPropagation(),v.device.isMobile||c.$apply(function(){!c.active&&c.isEnabled&&(_.selectOpinion(c),c.textBoxDisabled=!1,c.displayEditButton=!1,(0,o["default"])(".save-response-text",b).removeAttr("style"),n(function(){c.opinion.response.text&&((0,o["default"])(".opinion-respond-text-box",b).val(c.opinion.response.text),b.addClass("done")),(0,o["default"])(".report-to-yougov.white",b).tooltip(g.get("#report_opinion_container")).dynamic(g.getDynamic()),(0,o["default"])(".opinion-respond-text-box",b).characterLimit()},0,!1))})}),(0,o["default"])(".dismiss",b).on("click",function(e){e.stopPropagation(),v.device.isMobile||(a.query({view_name:k,filter_name:M,uuid:c.opinion.uuid}),b.addClass("done"),c.dirty=!0)}),b.on("click",".opinion-respond-text-box",function(){(0,o["default"])(".opinion-respond-text-box",b).css({color:"#333333"}),c.dirty=!0}),b.on("blur",".opinion-respond-text-box",function(){(0,o["default"])(this).val()||(0,o["default"])(".opinion-respond-text-box",b).css("color","")}),b.on("click",".save-response-text",function(t){t.preventDefault(),ga("send","event",h.gaq.namespace,"Opi Response","Saving");var i=(0,o["default"])(".opinion-respond-text-box",b),s=(0,o["default"])("textarea",b);return T=s.val(),T===s.attr("placeholder")&&(T=""),i.opiCapsLimit(),i.data("caps-validation")===!1?void(0,o["default"])(".allcaps_validation_error",b).fadeIn(50,function(){n(function(){(0,o["default"])(".allcaps_validation_error",b).fadeOut(100)},3e3,!1)}):(i.blur(),(v.device.isMobile||c.inModal)&&((0,o["default"])(".response_save_failed",b).hide(),c.showHorizontalProgress=!0),void e.saveResponseText(c.opinion.uuid,T,function(){ga("send","event",h.gaq.namespace,"Opi Response","Save success"),b.addClass("done"),c.opinion.response.text=T,D&&c.riposteSaveCallback({riposte:T}),c.inModal?(c.showHorizontalProgress=!1,c.$emit("closeModal")):_.closeOpinion(c)},function(){ga("send","event",h.gaq.namespace,"Opi Response","Saving failed"),c.inModal&&(c.showHorizontalProgress=!1,c.textBoxDisabled=!1,c.displayEditButton=!1,(0,o["default"])(".response_save_failed",b).fadeIn(50,function(){n(function(){(0,o["default"])(".response_save_failed",b).fadeOut(100)},3e3,!1)}))}))}),b.on("click",".add-own-opinion-box",function(e){e.stopPropagation(),e.preventDefault(),o["default"].startReview(c.opinion.thing_node_id)})},c.reportToYouGov=function(e){e.preventDefault(),e.stopPropagation(),(0,o["default"])(".qaradio","#report_opinion_container").removeClass("qaradio_selected"),(0,o["default"])(".success, .error, .duplicate","#report_opinion_container").hide(),(0,o["default"])(".report_options","#report_opinion_container").show(),(0,o["default"])("#report_opinion_container").data("uuid",c.opinion.uuid),(0,o["default"])(".qaradio","#report_opinion_container").off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),ga("send","event",h.gaq.namespace,"Opi Response","Inappropriate comment reported"),(0,o["default"])(this).addClass("qaradio_selected"),(0,o["default"])(".qaradio span","#report_opinion_container").css("color",""),(0,o["default"])(".qaradio","#report_opinion_container").off("click").on("click",function(e){e.preventDefault(),e.stopPropagation()}),f(c.opinion.uuid,(0,o["default"])(".qaradio_selected > span","#report_opinion_container").text())})},c.thingPreview=function(e){e.preventDefault(),e.stopPropagation(),c.inModal&&c.$emit("closeModal"),v.isEmbedded||r.loadThingPreview(c.opinion.thing_uuid,c.opinion.thing_url)},c.profilePreview=function(e){e.preventDefault(),e.stopPropagation(),c.inModal&&c.$emit("closeModal"),v.isEmbedded||u.loadPreview(c.opinion.member_id)},n(function(){c.bindEvents()},0,!1),c.close=function(){c.showNextButton=!1,_.closeOpinion(c)},c.openOpinionPopup=function(){if(!c.inModal){var e=c.$new();c.opinion.showCloseBtn=!0,c.opinion.responseButtons=c.response_buttons,e.widget={data:[c.opinion]},c.opinion.modal=i.open({template:'\n                        <button ng-click="$close()" class="close-btn action-btn opinion-close-btn">×</button>\n                        <opinions opinion-widget-data="widget" in-modal="true" type="latest"></opinions>\n                    ',scope:e,windowClass:"mobile-popup",controller:function(e){e.$on("modal.closing",function(){e.opinion.modal=null,n(function(){e.widget.data[0].selectedResponse&&(_.lightBulletNavItem(e.widget.data[0].selectedResponse),_.nextSlide()),e.$destroy()},500,!1)})}})}},c.noOpinion=function(e){_.noOpinion(e)},c.openReportToYougovPopup=function(e){e.preventDefault(),c.opinion.modal&&c.opinion.modal.close(),m.open(c.opinion.uuid)},c.inModal&&_.selectOpinion(c,!0),c.$watch("dirty",function(e){v.device.isMobile?c.saveButtonLabel=c.labels.save:e?c.saveButtonLabel=c.labels.opinion_save_close:c.inModal?c.saveButtonLabel=c.labels.cancel:c.saveButtonLabel=c.labels.go_back}),void(c.writeOwnOpinion=function(e){e.stopPropagation(),d.loadDirective(p["default"],{widget:d.getWidget({uuid:c.opinion.thing_uuid},"thingOpinionBox")})})):void b.on("click",function(e){e.preventDefault(),e.stopPropagation(),d.loadWidget({uuid:c.opinion.uuid},"opinionResults")})}}};v.$inject=["Opinions","$routeParams","$timeout","$modal","$window","NoOpinion","ThingPreview","profilePreviewService","Lightbox","appContextSrv","applicationData","reportToYougovServicePopup"],exports["default"]=v},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=t(155),s=n(i),a=t(103),o=n(a),r="characterLimit",l=!1,u=!1,c={};o["default"][r]=function(e,t){var n={eventNamespace:"characterLimit",transitionFast:50,transitionSlow:500,characterLimit:500},i=function(){c=(0,s["default"])({},n,t),"undefined"!=typeof t&&"undefined"!=typeof t.textSelector?(u=e,e=(0,o["default"])(t.textSelector,u)):u=e.parent(),e.data("character-limit")&&(c.characterLimit=e.data("characterLimit")),d(),a()},a=function(t){e.val().length>c.characterLimit&&!function(){void 0===t||8===t.which||46===t.which||t.which>=37&&t.which<=40||t.preventDefault(),e.val((0,o["default"])(e).val().substring(0,c.characterLimit));var n=(0,o["default"])(".counter_element_trimmed",u);n.fadeIn("slow",function(){setTimeout(function(){n.fadeOut(3e3)},3e3)})}()},r=function(t){t.text(e.val().length+" / "+c.characterLimit),e.val().length>c.characterLimit-1?(t.css("color","#EF2D27"),(0,o["default"])(e).data("character-limit-message")&&t.text(t.text()+" "+(0,o["default"])(e).data("character-limit-message"))):t.css("color","")},d=function(){var t=(0,o["default"])(".counter_element",u);(0,o["default"])(e).on("keydown",function(e){r(t),a(e)}),(0,o["default"])(e).on("focus",function(){r(t),t.fadeIn(c.transitionSlow),l=setInterval(function(){r(t),a()},100)}),(0,o["default"])(e).on("blur",function(){clearInterval(l),t.fadeOut(c.transitionFast)})};i()},o["default"].fn[r]=function(e){return this.each(function(){if(void 0===(0,o["default"])(this).data(r)){var t=new o["default"][r]((0,o["default"])(this),e);(0,o["default"])(this).data(r,t)}})}},function(e,exports,t){e.exports="<div ng-if=appContext.device.isMobile>"+t(343)+"</div> <div ng-if=!appContext.device.isMobile>"+t(344)+"</div> "},function(e,exports){e.exports='<blockquote> <div ng-show=opinion.selectedResponse class=selected-response-container> <div class="selected-response {[{ opinion.selectedResponse.css_class }]}"> <span class=selected-label>{[{ opinion.selectedResponse.label }]}</span> </div> </div> <div class=statement ng-click=openOpinionPopup()> <span class="svgi quote-left icon-quote-light"></span> <div ng-if=!inModal class=opinion-content ellipsis ellipsis-symbol="<span class=\'ellipsis-symbol\'>(...)</span>" ellipsis-separator="{[{ ellipsisSeparator }]}" ng-bind-html=content></div> <div ng-if=inModal class=opinion-content ng-bind-html=content></div> <div class=opi-member> <span class=by> {[{ ::labels.by }]}</span> <span class=member-label> {[{ ::labels.member }]}</span> {[{ ::memberData.id }]} {[{ ::labels.about }]} {[{ ::opinion.time_ago }]} </div> </div> <a class="report-to-yougov svgi icon-nuke opinion-report-button" href=# ng-click=openReportToYougovPopup($event)></a> </blockquote> <div class=response-buttons> <div ng-repeat="response in response_buttons | orderBy:predicate:reverse track by $index " response-button class="response-button svgi {[{ response.css_class }]}" level="{[{ ::response.level }]}" uuid=opinion.uuid css-class=response.css_class response-agree=opinion.response.agree is-mobile=appContext.device.isMobile response=response> </div> </div> <div class=no-opinion-btn ng-click=noOpinion(opinion.uuid)>{[{ ::labels.no_opinion }]}<span class="svgi icon-no-opinion"></span></div> ';
},function(e,exports){e.exports='<div class="clearfix response" ng-class="{active: active, disabled: opinion.mine || (!appContext.isLoggedIn && !isEmbedded)}"> <div class=clearfix> <button ng-click=close($event) ng-show="active && showCloseButton" class=return-btn><span ng-if=isEmbedded>{[{ ::appData.i18n.general.return }]}</span><i class=icon-return></i></button> <div class=thumbnails> <div ng-if=opinion.member_avatar class="member-avatar second-thumb" ng-style="{ \'background-image\': \'url(\' + opinion.member_avatar + \')\' }" ng-click=profilePreview($event)> <span class=mine ng-if=opinion.mine></span> </div> <div thumbnail type=thingThumnailIcon.iconClass thumbnail-url=thingThumnailIcon.iconUrl size=thingThumnailIcon.size on-click-action=thingPreview($event)></div> </div> <div class=opi> <div class="opi-header clearfix"> <div class="svgi icon-quote"></div> <div class=opi-header-labels ng-if=!isThingOpinion> <a href=# class=thing-link ng-click=thingPreview($event) ng-class="{disabled: appContext.isEmbedded}">{[{ ::thingData.title }]}</a> <div class=opi-member> {[{ ::opinion.time_ago }]} <span class=by> {[{ ::labels.by }]} </span> <a href=# class=member-link ng-click=profilePreview($event) ng-class="{disabled: appContext.isEmbedded}">{[{ ::labels.member }]} {[{ ::memberData.id }]}</a> </div> </div> <div class=opi-header-labels ng-if=isThingOpinion> <div> <a href=# class=title ng-click=profilePreview($event) ng-class="{disabled: appContext.isEmbedded}">{[{ ::labels.member }]} {[{ ::memberData.id }]}</a> <div class=opi-member>{[{ opinion.time_ago }]}</div> </div> <a class="stats svgi icon-see-results see-results" href=# ng-if=opinion.mine><span class=stats-counter>{[{ opinion.response_count }]}</span></a> </div> </div> <div class=opi-content> <span ng-show=opinion.rated_class class="small-icon svgi icon-rating-{[{ opinion.rated_class }]}"></span> <span ng-bind-html=content></span> </div> </div> <div class="response-panel clearfix" ng-show=!active ng-if=!opinion.mine> <div class=buttons-wrapper> <div class="response-buttons pull-left response-buttons-xs"> <div data-response-button ng-repeat="response in response_buttons | orderBy:predicate:reverse" class=response-button data-level="{[{ response.level }]}" data-label=response.label data-uuid=opinion.uuid data-css-class=response.css_class data-response-agree=opinion.response.agree data-is-mobile=appContext.device.isMobile response=response ng-transclude> <span class="response-button-icon no-answer svgi {[{ response.css_class }]}" ng-class="{\'selected\' : response.buttonSelected, \'disabled\' : response.buttonDeselected, \'icon-x\': response.level < 0, \'icon-tick\': response.level > 0}"></span> </div> </div> <div ng-if=!isEmbedded class="more-buttons inline"> <a class="stats svgi icon-see-results see-results" href=#><span class=stats-counter>{[{ opinion.response_count }]}</span></a> <a class="report-to-yougov svgi icon-nuke opinion-report-button" href=# ng-click=reportToYouGov($event)></a> </div> </div> <div class=response-value-wrapper> <div class="response-value response-buttons response-buttons-xs"></div> <button class="btn btn-secondary more-btn" ng-if=!isEmbedded>{[{ ::labels.respond }]}</button> </div> </div> </div> <div class="more-content clearfix" ng-if=isEnabled> <div ng-if=showMoreContent> <div class="response-buttons section clearfix"> <div data-response-button ng-repeat="response in response_buttons | orderBy:predicate:reverse" class="response-button no-answer svgi {[{ response.css_class }]}" data-level="{[{ response.level }]}" data-uuid=opinion.uuid data-response-agree=opinion.response.agree response=response ng-transclude> <span class=text>{[{ ::response.label }]}</span> </div> </div> <div class="descriptors section clearfix"> <label class=descriptor-header>{[{ ::labels.opinion_descriptor_header }]}</label> <div class=opinion-descriptor data-opinion-descriptor ng-repeat="descriptor in descriptors" data-descriptor=descriptor data-uuid=opinion.uuid></div> </div> <div class="clearfix opinion-respond section"> <label class=opinion-header>{[{ ::labels.your_response }]}</label> <div class="opinion-respond-text-box-container clearfix" ng-class="{\'text-box-message-saved\': textBoxDisabled}"> <textarea ng-model=textBoxContent ng-hide=textBoxDisabled placeholder="{[{ ::labels.opinions_textareaPlaceholder }]}" class=opinion-respond-text-box data-character-limit="{{ response_character_limit }}" data-character-limit-message="{{ response_character_limit_message }}"></textarea> <div class=reaponse_message_container ng-hide=textBoxDisabled> <div class="allcaps_validation_error yougovredtext hidden">{[{ ::labels.opinion_all_caps_message }]}</div> <div class="response_save_failed yougovredtext hidden">{[{ ::labels.response_save_failed_message }]}</div> <div class="hidden counter_element"></div> </div> </div> <div class=buttons-set> <button ng-if=!inModal follow-member initial-status=opinion.follow_status user-id=opinion.member_id class="btn btn-default follow-member pull-left svgi icon-follow"></button> <button ng-if="!isEmbedded && !inModal" class="btn btn-default see-results pull-left svgi icon-see-results"><span>{[{ ::labels.see_results }]} ({[{ opinion.response_count }]})</span></button> <div class=progress-horizontal ng-if=inModal><img src=/opi/images/horizontal_progress.gif ng-show=showHorizontalProgress class=ng-hide /></div> <button class="btn save-response-text" ng-hide=displayEditButton ng-class="{\'btn\': !appContext.device.isMobile, \'btn-primary\' : dirty, \'btn-secondary\' : !dirty }"> {[{ saveButtonLabel }]} </button> </div> </div> <div> <div class=add-own-opinion-box ng-if=displayOpinionBox ng-click=writeOwnOpinion($event)><i class=icon-opinion-bubble></i><span>{[{ addOwnOpinion }]}</span></div> </div> <div class="yg-buttons opinion-yg-buttons" ng-if="isEmbedded && active && showNextButton"> <button data-role=button class="yg-btn yg-btn-inverse" ng-click=close($event)> <span class="svgi icon-arrow-right"></span> </button> </div> </div> </div> </div> '},function(e,exports){e.exports='<div class="ratingWidget widget content-page clearfix"> <div ratings rating-widget-data=widget in-modal=true box-container=boxContainer></div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(347),o=n(a),r=s["default"].module("opinionDescriptor",[]).directive("opinionDescriptor",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(348),s=n(i),a=function(){"ngInject";return{require:"^opinions",restrict:"A",transclude:!1,scope:{descriptor:"=",uuid:"="},link:function(e,t,n,i){var s=i.getSelectedDescriptors(e.uuid);(e.descriptor.selected||s&&s.indexOf(e.descriptor.uuid)!==-1)&&i.selectDescriptor(e.uuid,e,t,!0),e.toggleDescriptor=function(n){n.preventDefault(),n.stopPropagation(),i.selectDescriptor(e.uuid,e,t),i.markSelectedOpinionAsDirty()}},replace:!0,template:s["default"]}};exports["default"]=a},function(e,exports){e.exports='<button ng-click=toggleDescriptor($event) class=descriptor ng-class="{selected: descriptor.selected}">{[{ ::descriptor.label }]}</button> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(350),o=n(a),r=s["default"].module("responseButton",[]).directive("responseButton",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(103),s=n(i),a=t(351),o=n(a),r=function(e,t){"ngInject";return{require:"^opinions",restrict:"A",transclude:!0,scope:{uuid:"=",level:"@",responseAgree:"=",label:"=?",cssClass:"=",isMobile:"=",response:"="},link:function(n,i,a,o){function r(){u=(0,s["default"])(".response-value",l)}var l=i.parents(".response"),u=void 0;o.addResponseButton(n,i),n.isEnabled=t.isLoggedIn,n.$on("$destroy",function(){o.removeResponseButton(n)}),e(function(){var e=o.getSelectedResponseButton(n.uuid);r(),(Number(n.responseAgree)===Number(n.level)||e&&e.level===n.level)&&(n.response.buttonSelected=!1,n.responseAgree=null,o.selectResponseButton(n,n.response.buttonSelected,n.level,!0),(0,s["default"])(".buttons-wrapper",l).addClass("selected"))},0),i.on("mouseenter",function(){n.isMobile||(u.show().css({left:"120px",top:"3px"}),(0,s["default"])(".more-btn",l).hide(),o.displayResponse(n.level,l,!0),(0,s["default"])(".stats",l).hide())}),i.on("mouseleave",function(){if(!n.isMobile){var e=o.getSelectedResponseButton(n.uuid);u.removeAttr("style").empty(),(0,s["default"])(".more-btn",l).removeAttr("style"),(0,s["default"])(".stats",l).removeAttr("style"),e&&o.displayResponse(e.level,l)}}),i.on("click",function(e){e.preventDefault(),e.stopPropagation();var t=n.response.buttonSelected,i=t?0:a.level;t?(0,s["default"])(".buttons-wrapper",l).removeClass("selected"):(0,s["default"])(".buttons-wrapper",l).addClass("selected"),o.selectResponseButton(n,t,i,!1),o.markSelectedOpinionAsDirty()})},template:o["default"],replace:!0}};r.$inject=["$timeout","appContextSrv"],exports["default"]=r},function(e,exports){e.exports="<a href=# ng-class=\"{'selected' : response.buttonSelected, 'disabled' : response.buttonDeselected, 'icon-x': level < 0, 'icon-tick': level > 0, 'no-answer': !response.buttonSelected}\"></a> "},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){"ngInject";var i=[],s={url:"/opi/myfeed/load_opinions",actions:{query:{method:"POST",params:{size:"@size",view_name:"@view_name",filter_name:"@filter_name",load_more:"@load_more",widget_id:"@widget_id"},isArray:!0}},options:{cancellable:!0}},o={url:"/opi/browse/:thing_uuid/opinions/:lastOpiUuid?size=:size",actions:{query:{method:"POST",isArray:!0}},options:{cancellable:!0}},l={url:"/opi/widgets/opinionrespond/:uuid/savedescriptors",actions:{save:{method:"POST",params:{uuid:"@uuid"}}},options:{cancellable:!0}},u={url:"/opi/widgets/opinionrespond/:uuid/savetext",actions:{save:{method:"POST",params:{uuid:"@uuid"}}},options:{cancellable:!0}},c={url:"/opi/browse/:thingUuid/opi",actions:{save:{method:"POST",params:{}}},options:{cancellable:!0}},d={url:"/opi/browse/:thingUuid/opi/:opiUuid/update",actions:{save:{method:"POST"}},options:{cancellable:!0}},p=e(s.url,{},s.actions,s.options),g=e(o.url,{},o.actions,o.options),f=e(l.url,{},l.actions,l.options),v=e(u.url,{},u.actions,u.options),h=e(c.url,{},c.actions,c.options),m=e(d.url,{},d.actions,d.options),b=function(e,n,s,a,o,r,l,u){var c=t.opinionsData.length;return c>0&&c>=e?(i=t.opinionsData.slice(0,e),l(i)):i=o.uuid&&o.thing_type?g.query({size:e,thing_uuid:o.uuid,lastOpiUuid:o.lastOpiUuid},{},l,u):p.query({size:e,view_name:n,filter_name:s,load_more:a,widget_id:r},l,u),i},y=function(e){i=e},_=function(e){var t=!0,n=!1,s=void 0;try{for(var a,o=(0,r["default"])(i);!(t=(a=o.next()).done);t=!0){var l=a.value;if(l.uuid===e)return l}}catch(u){n=!0,s=u}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw s}}return null},S=function(e,t,n,i){f.save({uuid:e,descriptors:t},n,i)},M=function(e,t,n,i){v.save({uuid:e,text:t},n,i)},w=function(e,t,n,i){h.save({thingUuid:e},{opinion:t},n,i)},k=function(e,t,n,i,s){void 0===e?h.save({thingUuid:t},{opinion:n},i,s):m.save({opiUuid:e,thingUuid:t},{opinion:n},i,s)};(0,a["default"])(this,{getOpinions:b,setOpinions:y,getOpinionByUUID:_,getFollowedOpinions:n.getFollowedOpinions,agreeResponse:n.agreeResponse,saveDescriptors:S,saveResponseText:M,addOpi:w,updateOpi:k})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s),o=t(22),r=n(o);i.$inject=["$resource","applicationData","opinionSrv"],exports["default"]=i},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(e){"ngInject";var t={url:"/opi/myfeed/no_opinion/?view_name=:view_name&filter_name=:filter_name&uuid=:uuid",actions:{query:{method:"POST",params:{view_name:"@view_name",filter_name:"@filter_name",uuid:"@uuid"}}}};return e(t.url,{},t.actions)};t.$inject=["$resource"],exports["default"]=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(22),s=n(i),a=t(155),o=n(a),r=t(103),l=n(r),u=t(131),c=n(u),d=t(355),p=n(d),g={all:{loadMore:!0,infiniteLoad:!0,opinionsNumber:10,maxOpinions:25,closePrevious:!0,hideOtherOpinions:!1},latest:{loadMore:!1,infiniteLoad:!1,tickNumber:0,opinionsNumber:3,hideOtherOpinions:!0},thingOpinions:{loadMore:!1,infiniteLoad:!1,opinionsNumber:10,hideOtherOpinions:!1,closePrevious:!0},thingOpinionsFeed:{loadMore:!0,infiniteLoad:!0,opinionsNumber:10,maxOpinions:25,closePrevious:!0,hideOtherOpinions:!1},transitionFast:225,transitionSlow:300},f=function(e,t,n,i,a,r,u){"ngInject";return{restrict:"EA",scope:{changeHeaders:"&?",showReturnButton:"&?",opinionWidgetData:"<",showLoadMoreOpinions:"<?",isEmbedded:"<?",inModal:"<?",riposteChangeCallback:"&?",levelChangeCallback:"&?",limited:"@?",thingData:"<?"},template:p["default"],controller:["$scope","$element","$attrs",function(d,p,f){var v=this,h=d.opinionWidgetData||{},m=h.data||[],b=h.widget_id||"",y={},_=[],S={},M="all"===f.type,w="latest"===f.type,k=null,x={},T=f.type||"latest",D={},O={},E=0,A=0,R=n.filters||"",C=n.subViewName||"",P="opinions"+C,I=(0,l["default"])(document),q=(0,l["default"])(window),N=d.thingData||{},j=!1,F=null,L=c["default"].isDefined(f.riposteChangeCallback),B=c["default"].isDefined(f.levelChangeCallback),H=c["default"].isDefined(f.followedOpinions),U=H?e.getFollowedOpinions:e.getOpinions,z=c["default"].isDefined(f.limited),W=z?d.limited:10,Q=0;d.$watch("appContext.device.isMobile",function(){Q=0,S={},_=[]}),(0,o["default"])(y,g),d.labels=r.labels,d.ratedName="",d.showNextButton=!0,d.hideContent=M,d.isFeed=M,d.isLimitedFeed=z,d.isFollowedOpinionsFeed=H,d.appContext=u,d.opinions=[],d.currentSlideIndex=Q,d.$watch("opinionWidgetData.data",function(e){e&&(m=e||[],d.opinions=e)}),"thingOpinions"===T&&(d.$on("opinionChanged",function(){v.refreshOpinions()}),d.$on("likeboxSelected",function(){v.refreshOpinions()})),d.$on("$destroy",function(){q.off("scroll",v.scrollHandler),d.getOpinionsQuery&&d.getOpinionsQuery.$cancelRequest(),d.loadOpinionsQuery&&d.loadOpinionsQuery.$cancelRequest()}),v.setLabels=function(e){d.labels.opinions_textareaPlaceholder=e?"":r.i18n.opinions.typeResponseHere},v.setLabels(u.device.isMobile),v.scrollHandler=function(){var e=470;I.scrollTop()+q.height()>=(0,l["default"])(".my-feed-content").height()-e&&m.length<A&&!j&&(j=!0,(0,l["default"])(".load-more").remove(),p.append(t('<div class="infinite-load"><div data-loading></div></div>')(d)),d.loadMore(!1,!1,function(){j=!1}),d.$apply())},v.bindScroll=function(){var e=t('\n                    <div ng-click="loadMore(true)" class="load-more">\n                        <span class="load-more-text"> {[{ ::labels.load_more }]} </span>\n                        <div data-loading></div>\n                    </div>\n                ')(d);y[T].loadMore&&(y[T].infiniteLoad?q.on("scroll",v.scrollHandler):p.append(e))},v.loadOpinionSuccess=function(e){m=d.opinions=e,d.getOpinionsQuery=null,(0,l["default"])(".loading").remove(),a.$broadcast("checkNavPosition"),d.hideContent=!1,M||p.closest(".widget").show(),"thingOpinions"===T&&p.parents(".thing-opinions").removeClass("hidden"),e.length>0&&e[0].uuid?(N.lastOpiUuid=e[e.length-1].uuid,a.$broadcast("dataLoaded"),d.isLimitedFeed||v.bindScroll()):0===e.length&&v.handleEmptyResponse(),"thingOpinionsFeed"===T&&(d.$parent.displayEmptyMessage=0===d.opinions.length,d.$parent.haveOpinions=d.opinions.length>0),0===d.opinions.length&&H&&(0,l["default"])(".followed-opinions-message-container").html(r.labels.empty_feed_message)},v.handleEmptyResponse=function(){a.$broadcast("opinionEmpytData"),M?d.isEmpty=!0:u.isLoggedIn?p.closest(".widget").hide():p.parents(".widget").hide(),d.hideContent=!1,(0,l["default"])(".loading").remove()},v.loadOpinions=function(){if(w){var e=u.device.isMobile?r.labels.mobile_opinion_subheader.replace("%thing_name%",m[0].thing_name):d.opinionWidgetData.subheader;return void(d.changeHeaders&&d.changeHeaders({header:d.opinionWidgetData.header,subheader:e}))}A=y[T].maxOpinions,H?d.getOpinionsQuery=U(W,null,v.loadOpinionSuccess,v.handleEmptyResponse):d.getOpinionsQuery=U(y[T].opinionsNumber,P,R,0,N,b,v.loadOpinionSuccess,v.handleEmptyResponse)},d.$watch("opinions",function(){y[T].loadMore&&m.length>0&&m.length>=A&&((0,l["default"])(".infinite-load").remove(),p.append(t('\n                        <div ng-click="loadMore(true)" class="load-more">\n                            <span class="load-more-text"> {[{ labels.load_more }]} </span>\n                            <div data-loading></div>\n                        </div>\n                    ')(d)))}),d.close=function(){k&&v.closeOpinion(k)},d.loadMore=function(e,t,n){function i(e){j=!1,d.spinner=!1,t&&(m=d.opinions=[],_=[]),m=m.concat(e),d.loadOpinionsQuery=null,d.opinions=m,(0,l["default"])(".load-more",p).remove(),(0,l["default"])(".infinite-load",p).remove(),(0,l["default"])(".load-opinions",p).remove(),a.$broadcast("checkNavPosition"),e.length>0&&e[0].uuid?(n&&n(),N.lastOpiUuid=e[e.length-1].uuid,ga("send","event",r.gaq.namespace,"LoadMoreOpinions Load",location.hash)):w&&(a.$broadcast("opinionEmpytData"),p.closest(".widget").slideUp())}function s(){(0,l["default"])(".load-more span:first-child",p).show(),(0,l["default"])(".infinite-load",p).remove(),j=!1,a.$broadcast("error")}e&&(A+=y[T].maxOpinions,ga("send","event",r.gaq.namespace,"LoadMoreOpinions Load Manual",location.hash)),j=!0,w?d.spinner=!0:(0,l["default"])(".load-more span:first-child",p).hide(),H?d.getOpinionsQuery=U(W,N.lastOpiUuid,i,s):d.loadOpinionsQuery=U(y[T].opinionsNumber,P,R,1,N,b,i,s)},v.displayError=function(e){d.displayError?d.displayError(e):d.isError=!0},v.forceSelectThing=function(){var e=!0,t=!1,n=void 0;try{for(var a,o=(0,s["default"])(_);!(e=(a=o.next()).done);e=!0){var r=a.value;r!==k&&r.$element.parent().css("display","none")}}catch(l){t=!0,n=l}finally{try{!e&&o["return"]&&o["return"]()}finally{if(t)throw n}}i(function(){d.$broadcast("animationFinish")},0)},v.selectOpinion=function(e,t){d.showReturnButton&&d.showReturnButton({value:!0}),y[T].closePrevious&&k&&v.closeOpinion(k),k=e,e.active=!0,e.showNextButton=!0,e.showMoreContent=!0,d.showNextButton=!1,d.hideMoreButton=!0,F=k.$element.position(),M||p.css("min-height",p.height()),t?v.forceSelectThing():y[T].hideOtherOpinions?c["default"].forEach(_,function(n){1===_.length&&d.$broadcast("animationFinish",t),n!==e&&(n.$element.fadeOut(y.transitionFast,function(){(0,l["default"])(this).css("visibility","hidden"),E++,d.$broadcast("animationFinish")}),n.active=!1)}):(e.active=!0,v.afterOpinionSelected(e),i(function(){(0,l["default"])(".more-content",e.$element).slideDown(y.transitionSlow,function(){a.$broadcast("checkNavPosition"),a.$broadcast("checkOpinionSummaryPanelPosition"),(0,l["default"])(this).css("overflow","visible")})},0))},d.$on("animationFinish",function(e,t){E===_.length-1&&k&&(t?(v.afterOpinionSelected(k),k.active=!0):(k.$element.css({position:"absolute",left:F.left,top:F.top,"z-index":100}),k.$element.animate({top:0},y.transitionFast,function(){(0,l["default"])(".more-content",k.$element).slideDown(y.transitionFast,function(){(0,l["default"])(this).css("overflow","visible")}),k.$element.css("position","relative"),v.afterOpinionSelected(k),k.active=!0,k.$apply()})),E=0)}),d.$on("bodyClicked",function(){M&&k&&v.closeOpinion(k)}),v.afterOpinionSelected=function(e){e.content=e.opinion.long_content||e.opinion.content,e.memberData.isClickable=!0,e.thingData.isClickable=!0,e.memberIconData.isClickable=!0,e.thingThumnailIcon.isClickable=!0},v.closeOpinion=function(e){e.content=e.opinion.short_content,e.memberData.isClickable=!1,e.thingData.isClickable=!1,e.memberIconData.isClickable=!1,e.thingThumnailIcon.isClickable=!1,e.dirty=!1,y[T].hideOtherOpinions&&k.$element.css("position","absolute"),k=null,(0,l["default"])(".more-content",e.$element).slideUp(y.transitionSlow,function(){e.active=!1,e.showMoreContent=!1,(0,l["default"])(this).removeAttr("style"),e.$apply(),a.$broadcast("checkOpinionSummaryPanelPosition"),a.$broadcast("checkNavPosition"),y[T].hideOtherOpinions&&e.$element.velocity({left:F.left,top:F.top},{duration:y.transitionFast,complete:function(){e.$element.removeAttr("style"),d.hideMoreButton=!1,c["default"].forEach(_,function(t){t!==e&&(t.$element.fadeIn(y.transitionFast).css("visibility","visible"),t.active=!1,p.removeAttr("style"),t.$apply())}),d.showReturnButton&&d.showReturnButton({value:!1}),d.$apply()}}),d.showNextButton=!0})},v.reloadOpinion=function(e){var t=v.getOpinionIndexByUUID(e);_.getOpinions(function(e){d.opinions[t]=e[0]})},v.getOpinionIndexByUUID=function(e){return m.findIndex(function(t){return t.uuid===e})},v.bindEvents=function(){i(function(){(0,l["default"])(".return-btn",p.parent()).on("click",function(){d.close()})},0,!1)},v.addOpinion=function(e,t){y[T].hideOtherOpinions&&(x[e.uuid]={ticked:!1}),e.$element=t,_.push(e)},v.removeOpinion=function(e){var t=_.indexOf(e);_.splice(t,1)},v.removeResponseButton=function(e){S[e.opiUuid]&&delete S[e.opiUuid]},v.finishWidget=function(){var e=p.parents(".widget"),t=e.find(".sub-header"),n=e.find(".responses");n.css({height:n.outerHeight()+t.outerHeight()}),t.hide(),d.isFinished=!0,e.css({overflow:"hidden"}).velocity({opacity:0},{duration:300,delay:1e3}).velocity({height:0,margin:0,"min-height":0},{duration:500,complete:function(){d.$emit("widgets.remove",h)}})},v.nextSlide=function(e,t){Q+=1,e=e||0,u.device.isMobile&&(Q>=_.length&&!t?v.finishWidget():i(function(){d.currentSlideIndex=Q,d.$broadcast("slides.changeTo",Q)},e))},v.lightBulletNavItem=function(e){p.find(".swiper-pagination-bullet").eq(Q).removeClass(function(e,t){return(t.match(/\bresponse-\S+/g)||[]).join(" ")}).addClass("response-"+e.css_class)},v.addResponseButton=function(e,t){S[e.uuid]=S[e.uuid]||[],e.$element=t,S[e.uuid].push(e)},v.selectResponseButton=function(t,n,i,s){ga("send","event",r.gaq.namespace,"Response button",'"'+i+'"');var a=t.$element.parents(".response");v.deselectResponseButtons(t,a);var o=v.getOpinionIndexByUUID(t.uuid);d.opinions[o].selectedResponse=null,c["default"].forEach(S[t.uuid],function(e){n||(e.level===t.level?(e.response.buttonSelected=!0,(0,l["default"])(".response-value-wrapper",a).addClass("selected"),d.opinions[o].selectedResponse=t.response,v.lightBulletNavItem(t.response),d.opinions[o].modal?d.opinions[o].modal.close():u.device.isMobile&&v.nextSlide(300)):e.response.buttonDeselected=!0)}),d.$apply(),s?v.agreeResponseSuccessCallback(t,a,s):(e.agreeResponse(t.uuid,i,function(){ga("send","event",r.gaq.namespace,"Response button","Saved"),v.agreeResponseSuccessCallback(t,a)},function(){ga("send","event",r.gaq.namespace,"Response button","Saving failed"),v.deselectResponseButtons(t,a)}),B&&d.levelChangeCallback({level:i}))},v.getThumbnailOverlayElement=function(e){return(0,l["default"])(".response-button-selected-overlay",e)},v.showThumbnailOverlayElement=function(e,t){var n=v.getThumbnailOverlayElement(e);n.addClass(t).show(),i(function(){n.addClass(t&&t.indexOf("mildly")>-1?"active-mildly":"active")},50,!1)},v.hideThumbnailOverlayElement=function(e){v.getThumbnailOverlayElement(e).hide().attr("class","response-button-selected-overlay")},v.deselectResponseButtons=function(e,t){(0,l["default"])(".response-value-wrapper",t).removeClass("selected"),c["default"].forEach(S[e.uuid],function(e){e.response.buttonDeselected=!1,e.response.buttonSelected=!1}),O[e.uuid]=null},v.agreeResponseSuccessCallback=function(e,t){t.addClass("done"),e.response.buttonSelected&&(O[e.uuid]=e,v.displayResponse(e.level,t))},v.getSelectedResponseButton=function(e){return O[e]||null},v.displayResponse=function(e,t){var n=(0,l["default"])(".response-value",t);switch(e){case"-2":n.html('<span class="response-button respose-button-xs no-answer svgi disagree icon-x">');break;case"-1":n.html('<span class="response-button respose-button-xs no-answer svgi disagree-mildly icon-x">');break;case"1":n.html('<span class="response-button respose-button-xs no-answer svgi agree-mildly icon-tick">');break;case"2":n.html('<span class="response-button respose-button-xs no-answer svgi agree icon-tick">')}n.append("<span>"+r.responses.getLabelByLevel(e)+"</span>")},v.selectDescriptor=function(t,n,i,s){var a=i.parents(".response");D[t]=D[t]||[],n.descriptorSelected=!n.descriptorSelected,n.descriptor.selected=n.descriptorSelected,a.addClass("done"),n.descriptorSelected?D[t].indexOf(n.descriptor.uuid)===-1&&D[t].push(n.descriptor.uuid):v.removeDescriptorFromSelected(t,n),s||e.saveDescriptors(t,D[t],function(){},function(){n.descriptorSelected=!n.descriptorSelected,n.descriptor.selected=n.descriptorSelected,v.removeDescriptorFromSelected(t,n),a.removeClass("done")})},v.getSelectedDescriptors=function(e){return D[e]||null},v.isFeed=function(){return M},v.isMyfeedWidget=function(){return w},v.isThingOpinion=function(){return"undefined"!=typeof N.uuid&&"undefined"!=typeof N.thing_type},v.removeDescriptorFromSelected=function(e,t){var n=D[e].indexOf(t.descriptor.uuid);D[e].splice(n,1)},v.refreshOpinions=function(){N.lastOpiUuid="",v.loadOpinions()},v.markSelectedOpinionAsDirty=function(){k&&(k.dirty=!0)},d.isThingOpinion=v.isThingOpinion(),d.loadMoreOpinions=function(e){e&&e.preventDefault(),d.showReturnButton&&d.showReturnButton({value:!1}),j||d.loadMore(!1,!0,function(){})},d.riposteSaveCallback=function(e){L&&d.riposteChangeCallback({riposte:e})},d.slideChanged=function(e){Q=e,i(function(){var e=r.labels.mobile_opinion_subheader.replace("%thing_name%",m[Q].thing_name);d.currentSlideIndex=Q,d.changeHeaders&&d.changeHeaders({header:d.opinionWidgetData.header,subheader:e})})},v.noOpinion=function(e){var t=v.getOpinionIndexByUUID(e);t!==-1&&(d.opinions[t].selectedResponse="no-opinion",d.opinions[t].modal?d.opinions[t].modal.close():v.nextSlide())},d.isSaveBtnDisabled=!0}],link:function(e,t,n,i){i.loadOpinions(),i.bindEvents()}}};f.$inject=["Opinions","$compile","$routeParams","$timeout","$rootScope","applicationData","appContextSrv"],exports["default"]=f},function(e,exports,t){e.exports="<div ng-if=appContext.device.isMobile>"+t(356)+"</div> <div ng-if=!appContext.device.isMobile>"+t(357)+"</div> "},function(e,exports){e.exports='<div ng-show="opinions.length > 1 && !isFinished" class=swiper-pagination></div> <slide-box ng-if=!isFinished class=swiper-container on-slide-change-start=slideChanged(slideIndex) ng-class="{\'single-opinion\': opinions.length === 1}"> <div ng-repeat="opinion in ::opinions track by $index" class="slide swiper-slide opinions"> <opinion opinion-data=opinion modal-close-callback=modalCloseCallback() class=opinion in-modal=inModal></opinion> </div> </slide-box> <success-banner class=success-banner ng-if=isFinished></success-banner> '},function(e,exports){e.exports='<div ng-if="isFeed && !isFollowedOpinionsFeed" ng-include src="\'/opi/widgets/angular/view/empty\'"></div> <div ng-if=isFeed ng-include src="\'/opi/widgets/angular/view/error\'"></div> <div ng-repeat="opinion in opinions" class="clearfix fade-in response-container" ng-class="{active: opinion.active, last: $last, first: $first}"> <opinion opinion-data=opinion in-modal=inModal is-embedded=isEmbedded riposte-save-callback=riposteSaveCallback(riposte)></opinion> </div> <div class=more-like-this-wrapper ng-if=!isFeed ng-hide="hideMoreButton || !showLoadMoreOpinions"> <a ng-href=# ng-click=loadMoreOpinions($event) class="pull-right more-like-this" ng-hide="hideMoreButton || !showLoadMoreOpinions"> <span class=text>{[{ labels.refresh }]}</span> <span class="svgi icon-refresh-gray" ng-class="{spinner: spinner}"></span></a> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(103),o=n(a);t(341);var r=t(359),l=n(r),u=function(e,t,n,i,a,r,u,c,d,p){"ngInject";return{require:"^ratings",restrict:"EA",scope:{thing:"<",uuid:"<",draggable:"<?",showCloseButton:"<?",showLikeBoxes:"=?",descriptorsInUse:"<?",close:"&",isEmbedded:"<?",column:"<?",row:"<?",inModal:"<?",isPreview:"<?",isNodeRating:"<?",opiSaveCallback:"&?",ratingSaveCallback:"&?",standalone:"@?"},template:l["default"],link:function(l,g,f,v){function h(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function m(){var e=["descriptors","textbox"];return 0===h(0,1)&&(e=["textbox","descriptors"]),e}function b(){"descriptors"===l.activePage?v.changeHeaders(v.HEADERS.mobileDescriptors.header,v.HEADERS.mobileDescriptors.subheader):v.changeHeaders(v.HEADERS.mobileRatedOpinion.header,v.HEADERS.mobileRatedOpinion.subheader.replace("%thing_name%",l.thing.thing_name).replace("%rated_name%",l.thing.ratedName.toLowerCase()))}function y(){l.loadDescriptors=!0,l.descriptorsInUse=[],c.getDescriptors(l.thing.uuid,N).then(function(t){l.loadDescriptors=!1,p.device.isMobile&&(l.descriptorSlides=S(t)),l.descriptors=t,l.descriptorsInUse=c.getSelectedDescriptors(l.thing.uuid),l.showDescriptors=t.length>0,v.isFeed()&&e(function(){v.changeContentHeight()},0,!1)})}function _(e,t){var n=_.canvas||(_.canvas=document.createElement("canvas")),i=n.getContext("2d");i.font=t;var s=i.measureText(e);return s.width}function S(e){var t=40,n=37,i=5,s=1,a=1,o=g.find(".thing-wrapper"),r=n,l=0,u=o.outerHeight()-t,c=o.outerHeight()-t,d=[0],p=[],f=0;if(e){for(var v=0,h=e.length;v<h;v++)f=_(e[v].name,"400 15px raleway")+2*i+2*s+a,l+=f,l>=c&&(l=f,r+=n),r>=u&&(d.push(v),r=n);for(var m=0,b=d.length;m<b-1;m++)p.push(e.slice(d[m],d[m+1]));return p.push(e.slice(d[d.length-1])),p}}function M(){var e=(0,o["default"])(".opinion-respond-text-box",g);p.device.isMobile||e.characterLimit(),e.on("click",function(t){t.preventDefault(),t.stopPropagation(),(0,o["default"])(".allcaps_validation_error",g).fadeOut(100),p.device.isMobile||e.css("color","#333333").velocity({height:"180px"},150,function(){l.$apply(function(){l.thing.done=!0,l.dirty=!0}),v.isFeed()&&v.changeContentHeight()})}),e.on("blur",function(){e.val()||p.device.isMobile||e.css("color","#333333").velocity({height:"110px"},150,function(){v.isFeed()&&v.changeContentHeight()})})}function w(){p.device.isMobile&&(0,o["default"])(i).on("orientationchange",function(){!l.inModal&&v.isRated()&&p.device.isMobile&&(l.descriptorSlides=[],l.$digest(),e(function(){l.descriptorSlides=S(l.descriptors)},300))})}function k(){M(),y(),w()}if(l.thing){var x=!1,T=t.filters||"",D=t.subViewName||"",O=v.isRated()?d.i18n.general.reviews:d.i18n.general.ratings,E=O+D,A=l.thing.thing_type.replace(/\s/g,"_").toLowerCase(),R=s["default"].copy(angular_data.likeboxes[A])||[],C=300,P=["icon-rating-love","icon-rating-happy","icon-rating-neutral","icon-rating-sad","icon-rating-hate","icon-rating-star-gold","icon-rating-star-silver","icon-rating-star-bronze","icon-rating-not-interested"],I=l.thing.type&&"moreSuggestion"===l.thing.type,q=s["default"].isDefined(f.opiSaveCallback),N=20,j=s["default"].isDefined(f.ratingSaveCallback),F=null,L=!1;l.showDescriptorPanel=!angular_data.types||!angular_data.types[A]||angular_data.types[A].showDescriptorPanel,l.showDescriptors=!1,l.showLikeBoxes=!0,l.labels=d.labels,l.appData=d,l.labels.save=d.labels.response_save_button,l.whatDoYouThinkLabel=l.labels.what_do_you_think.replace("%thing_name%",l.thing.label),l.appContext=p,l.isMoreSuggestions=I,l.accordionPanels={isAddOpinionOpen:!1,isLikeboxesOpen:!1,isDescriptorOpen:!1},l.thing.rated_class=l.thing.rated_class||"",l.thing_name_label=l.thing.thing_name_label||l.thing.label,l.nodeData={id:l.thing.uuid,type:"link",title:l.thing.thing_name},l.isRating=!v.isRated(),l.descriptorSlides=[],l.pages=m(),l.activePage=l.pages[0],l.activePageIndex=0,(0,
o["default"])(".thing-thumbnail > div",g).css("backgroundImage","url("+l.thing.thumbnail+")"),l.thing.done&&g.addClass("done"),l.standalone||v.addThing(l,g),l.$watch("appContext.device.isMobile",function(t){l.isReviewMode=!(!t||!v.isRated()),t?(l.likeboxes=l.quickRateLikeboxes(),N=200,v.isRated()&&e(function(){k(),b()},0,!1)):N=20}),l.getBackgroundStyle=function(){return l.thing.thumbnail?{"background-image":"url("+l.thing.thumbnail+")"}:{}},l.quickRateLikeboxes=function(){var e=[];return s["default"].forEach(R,function(t){for(var n=0,i=P.length;n<i;n++)if(t.css_class.indexOf(P[n])!==-1){e.push(t);break}}),e},l.hasNotInterested=function(){for(var e=!1,t=0,n=R.length;t<n;t++)if(R[t].css_class.indexOf("icon-rating-not-interested")!==-1){e=!0;break}return e},l.hasNotInterested()||R.push({name:d.labels.no_opinion,css_class:"icon-no-opinion"}),l.dissmissRating=function(){l.thing.done=!0,l.thing.rated_class="icon-no-opinion",l.dirty=!0;var t=(0,o["default"])(".thing-thumbnail .thing-like",g),n=t.clone(!0);n.removeClass().addClass("svgi thing-like").addClass("animate").addClass("done").addClass("icon-no-opinion"),t.before(n),t.remove(),r.unrate(l.thing.uuid,function(){},function(){}),u.query({view_name:E,filter_name:T,uuid:l.uuid},function(){n.removeClass("animate").addClass("show")}),l.active?l.inModal||l.isNodeRating||l.close():e(function(){p.device.isMobile?l.close():v.removeThing(l)},C),l.$emit("noOpinionSelected",l.thing),p.device.isMobile?l.thing.ratedName=l.labels.no_opinion:(l.thing.thing_name_label=l.thing_name_label=l.labels.no_opinion,l.thing.ratedName=l.thing_name_label)},l.draggable&&!function(){var t=null;g.draggable({revert:function(e){return!e&&(x=!0,!0)},revertDuration:200,stack:".rating",scroll:!1,containment:"window",cursor:"move",cursorAt:{top:50,left:50},start:function(n,i){n.stopPropagation(),(0,o["default"])(i.helper).hide(),t=(0,o["default"])(".thing-like",g).attr("class").replace("animate","show"),e(function(){(0,o["default"])(i.helper).fadeIn(100)},100,!1),(0,o["default"])(i.helper).css("z-index",100),v.dragThingStart(l,angular_data.likeboxes[A])},drag:function(e,t){g.find(".rating").addClass("helper")},stop:function(e,n){g.find(".rating").removeClass("helper"),x&&(v.dragThingStop(l),x=!1,(0,o["default"])(".thing-like",g).removeClass().addClass(t))}}).data("data",{thing:l.thing,likeboxes:R})}(),l.bindSelect2=function(){var e=!0,t=l.isPreview||l.inModal?"538px":"500px";g.find(".select2-input").off("keyup");var n=g.find(".adjectives").select2({placeholder:l.labels.add_adjectives,multiple:!0,minimumInputLength:3,openOnEnter:!0,closeOnSelect:!0,dropdownCss:{width:t,"margin-left":"-1px","border-color":"#cccccc"},formatNoMatches:function(){return d.i18n.ratings.notFound},query:function(e){var t={results:[]};r.searchDescriptors(l.thing.uuid,e.term,function(n){n.length>0&&s["default"].forEach(n,function(e){t.results.push({id:e.uuid,text:e.name})}),e.callback(t)},s["default"].noop)}});n.on("select2-close",function(){g.find(".add-on").removeClass("focused")}),g.find(".icon-plus").hover(function(){e=!1},function(){e=!0}),g.on("focus",".select2-input",function(){g.find(".add-on").addClass("focused")}),(0,o["default"])(g).on("blur",".select2-input",function(){(0,o["default"])(".select2-no-results").length>0&&e&&g.find(".adjectives").select2("close")}),g.find(".adjectives").off("change").on("change",function(e){if(e.added){var t=e.added;l.addCommonDesctiptor(t)}})},l.addCommonDesctiptor=function(e){var t=c.addCommonDescriptor(l.thing.uuid,e);t&&(l.descriptors.unshift(t),p.device.isMobile&&(l.descriptorSlides=S(l.descriptors))),l.descriptorsInUse=c.getSelectedDescriptors(l.thing.uuid),g.find(".adjectives").select2("data",[])},g.on("click",function(e){return e.stopPropagation(),I&&!g.hasClass("disabled")?void l.$emit("moreThings"):void(!l.thing.uuid||v.isSelectedThing()||g.find(".rating").hasClass("helper")||g.hasClass("dropped")||g.hasClass("disabled")||v.selectThing(l))}),l.$on("thingSelected",function(){l.descriptors=[],l.add_more=l.labels.add_opinion,l.thing_info="",l.active=!0,l.showLikeBoxes=!0,l.markLikeboxAsSelected(),l.likeboxes=R,v.isRated()&&v.changeHeaders(v.HEADERS.describe.header.replace("__thing_name__",l.thing.thing_name),v.HEADERS.describe.subheader.replace("__thing_name__",l.thing.thing_name)),l.sumariseYourOpinion=v.HEADERS.sumarise.header.replace("__thing_name__",l.thing.thing_name),l.$digest(),e(function(){k(),l.bindSelect2()},0,!1),l.loadThingInfo()}),l.loadMoreDescriptors=function(){l.descriptors=c.getMoreDescriptors(l.thing.uuid)},l.loadThingInfo=function(){e(function(){l.thing_info=r.getThingsInfo(l.thing.uuid,function(){v.isFeed()&&v.changeContentHeight()},function(){})},0)},l.onLikeboxOver=function(e,t,n){e.preventDefault(),e.stopPropagation(),t=t||{},n?(l.thing_name_label=t.name,(0,o["default"])(".quick-rate .svgi",g).not(e.currentTarget).addClass("disabled")):(0,o["default"])(".like-box-name",g).text(t.name)},l.onLikeboxLeave=function(e,t,n){e.preventDefault(),e.stopPropagation(),n?(l.thing_name_label=l.thing.label,(0,o["default"])(".quick-rate .svgi",g).removeClass("disabled")):(0,o["default"])(".like-box-name",g).text(l.ratedName||"")},l.markLikeboxAsSelected=function(){l.thing.rated_class&&s["default"].forEach(R,function(e){if(e.disabled=!0,l.thing.rated_class.indexOf(e.css_class)!==-1)return l.thing.ratedName=e.name,e.active=!0,void(e.disabled=!1)})},l.selectLikebox=function(t,i,s){if(t.stopPropagation(),t.preventDefault(),!L){if(ga("send","event",d.gaq.namespace,"Rating selected "+(s?"(quickrate)":""),i.rating_id),l.isPreview&&ga("send","event",d.gaq.namespace,"Node preview popup","Rating selected"),l.thing.rated_class=i.css_class,g.addClass("done"),i.name&&(l.thing.ratedName=i.name),l.thing.done=!0,l.dirty=!0,!i.rating_id)return void l.dissmissRating();var a=v.isRated()?"small-icon":"",r=(0,o["default"])(".thing-like",g),u=r.clone(!0);L=!0,u.removeClass().addClass("svgi thing-like").addClass(a).addClass("animate").addClass(i.css_class),r.before(u),r.remove(),l.thing.thing_name_label=l.thing_name_label=l.thing.label,v.addThingToRated(l.thing.thing_type.replace(/\s/g,"_").toLowerCase(),l.thing.uuid,i.likeboxbucket_key),e(function(){v.isRated()||l.isPreview||l.inModal||(u.removeClass("animate").addClass("show"),l.close())},C),j&&l.ratingSaveCallback({rating:i.css_class}),v.rate(l.thing.uuid,i.rating_id,function(){n.$broadcast("likeboxSelected",l.thing,v.getSurveyUuid()),L=!1},function(){L=!1,ga("send","event",d.gaq.namespace,"Rating "+(s?"(quickrate) ":"")+"saving failed",i.rating_id),(0,o["default"])(".like-box",g).not(t.currentTarget).css({opacity:1})})}},l.deselectDescriptor=function(e,t,n){e.preventDefault(),e.stopPropagation(),c.deselectDescriptor(t,n),l.descriptorsInUse=c.getSelectedDescriptors(t)},l.displayLikeBoxes=function(e){e.preventDefault(),e.stopPropagation(),l.showOpinionTextBox=!1,l.showLikeBoxes=!l.showLikeBoxes},l.displayOpinionBox=function(t){t&&(t.preventDefault(),t.stopPropagation()),l.showLikeBoxes=!1,l.showOpinionTextBox=!l.showOpinionTextBox,v.isFeed()&&e(function(){v.changeContentHeight()},0,!1)},l.displayDescriptors=function(t){t.preventDefault(),t.stopPropagation(),l.showLikeBoxes=!1,l.showDescriptorBox=!l.showDescriptorBox,v.isFeed()&&e(function(){v.changeContentHeight()},0,!1)},l.closeAction=function(t){t&&(t.preventDefault(),t.stopPropagation()),l.showLikeBoxes?l.showLikeBoxes=!l.showLikeBoxes:l.showDescriptorBox?l.showDescriptorBox=!l.showDescriptorBox:l.showOpinionTextBox?l.showOpinionTextBox=!l.showOpinionTextBox:l.close(),v.isFeed()&&e(function(){v.changeContentHeight()},0,!1)},l.closeOpenedThing=function(e){v.isSelectedThing()&&(e.stopPropagation(),l.close())},l.addOther=function(){F=(0,o["default"])(document).scrollTop(),(0,o["default"])(".off-canvas-wrapper").css({height:"100%",overflow:"hidden",width:"100%",position:"fixed"}),g.find(".descriptors-search").addClass("visible").find(".desc-input").focus()},l.closeAddOtherPopup=function(){(0,o["default"])(".off-canvas-wrapper").removeAttr("style"),(0,o["default"])(document).scrollTop(F),e(function(){g.find(".descriptors-search").removeClass("visible")},300,!1)},l.goToNextOrFinish=function(e){e&&e.preventDefault(),l.activePageIndex+1<l.pages.length?l.goToNextPage(e):v.finishWidget()},l.goToNextPage=function(){var e=l.activePageIndex+1;l.activePage=l.pages[e],l.activePageIndex=e,b()},l.goToPreviousPage=function(e){e.preventDefault();var t=l.activePageIndex-1;t>=0&&(l.activePage=l.pages[t],l.activePageIndex=t,b())},l.$watch("thing.rated_class",function(e){e&&(l.markLikeboxAsSelected(),!v.isRated()&&v.getSurveyUuid()&&g.addClass("done"))}),l.slideChanged=function(e){l.hideSlideNextIcon=e===l.descriptorSlides.length-1,l.$digest()},l.$watch("dirty",function(e){e?l.saveButtonLabel=l.labels.opinion_save_close:l.inModal?l.saveButtonLabel=l.labels.cancel:l.saveButtonLabel=l.labels.go_back}),l.$on("$destroy",function(){c.destroyDescriptors(l.thing.uuid)}),l.removeWidget=v.removeWidget,(l.inModal||l.isNodeRating)&&v.selectThing(l,!0),l.isPreview&&(ga("send","event",d.gaq.namespace,"Node preview popup","Open"),l.visitFullPage=function(){ga("send","event",d.gaq.namespace,"Node preview popup","Visit full page")}),l.saveResponse=function(t){t.preventDefault(),t.stopPropagation();var i=(0,o["default"])("textarea",g),s=i.val(),r=(0,o["default"])(".opinion-respond-text-box",g);return r.opiCapsLimit(),r.blur(),s===i.attr("placeholder")&&(s=""),p.device.isMobile||r.velocity({height:"105px"},150,function(){v.isFeed()&&v.changeContentHeight()}),r.data("caps-validation")===!1?void(0,o["default"])(".allcaps_validation_error",g).fadeIn(50,function(){e(function(){(0,o["default"])(".allcaps_validation_error",g).fadeOut(100)},3e3,!1)}):(q&&l.opiSaveCallback({opi:s}),l.isPreview&&ga("send","event",d.gaq.namespace,"Node preview popup","Opinion written"),l.inModal?l.$emit("closeModal"):l.isNodeRating?l.accordionPanels.isAddOpinionOpen=!1:l.close(),l.isSaved=!0,void a.updateOpi(l.thing.opi_uuid,l.thing.uuid,s,function(e){l.thing.opi=s,e.uuid?(l.thing.done=!0,l.thing.opi_uuid=e.uuid,g.addClass("done")):delete l.thing.opi_uuid,p.device.isMobile&&l.goToNextOrFinish(),n.$broadcast("opinionChanged",s)},function(){}))}}}}};u.$inject=["$timeout","$routeParams","$rootScope","$window","Opinions","Ratings","NoOpinion","Descriptors","applicationData","appContextSrv"],exports["default"]=u},function(e,exports,t){e.exports='<div ng-if="appContext.device.isMobile && !isReviewMode">'+t(360)+'</div> <div ng-if="appContext.device.isMobile && isReviewMode">'+t(361)+"</div> <div ng-if=!appContext.device.isMobile>"+t(362)+"</div> "},function(e,exports){e.exports='<div class=rating ng-class="{done: thing.done, placeholder: thing.placeholder}"> <div class=thing-thumbnail> <span class="svgi icon-back-rating-white"></span> <span class="node-type-icon-white {[{ ::thing.thing_class }]}"></span> <div ng-style=::getBackgroundStyle()> <div class=thing-icon-container ng-click=closeOpenedThing($event)> <div class="svgi thing-like {[{ thing.rated_class }]}" ng-class="{\'show\' : thing.rated_class.length > 0 }"></div> <div ng-if=thing.ratedName class=rated-name>{[{ thing.ratedName }]}</div> </div> <div class=thing-container> <div class="thing-name clickable"> <span class=quick-rate-label>{[{ ::appData.labels.quick_rate }]} </span> <span>{[{ ::thing_name_label }]}</span> </div> </div> </div> </div> <ul ng-if=::thing.showLikeBoxes class=likeboxes> <li ng-repeat="likebox in ::quickRateLikeboxes() track by $index"> <a href=# ng-class="{\'activated\': likebox.active, \'deactivated\' : likebox.disabled}" class="svgi {[{ ::likebox.css_class }]}" ng-click="selectLikebox($event, likebox, true)"></a> </li> </ul> <a ng-if=::thing.showLikeBoxes href=# class=no-opinion-btn ng-click="selectLikebox($event, {}, false)">{[{ ::appData.labels.no_opinion }]}<span class="svgi icon-no-opinion"></span></a> </div> '},function(e,exports){e.exports='<div class=thing-review> <div ng-show="activePage === \'descriptors\' && descriptorSlides.length > 1" class=swiper-pagination></div> <div class=thing-wrapper> <div class=thing-thumbnail> <span class="node-type-icon-white {[{ ::thing.thing_class }]}"></span> <div ng-style=::getBackgroundStyle()></div> </div> <div ng-if="activePage === \'descriptors\'" class=descriptors> <div class=descriptors-buttons> <slide-box ng-if="descriptorSlides.length > 0" class=swiper-container on-slide-change-start=slideChanged(slideIndex)> <div ng-repeat="slide in descriptorSlides track by $index" class="slide swiper-slide"> <thing-descriptor ng-repeat="descriptor in slide track by descriptor.id" descriptor=descriptor uuid=thing.uuid thing-id=thing.thing_id class="common thing-descriptor"> </thing-descriptor> </div> </slide-box> </div> </div> <div ng-if="activePage === \'textbox\'" class=opinion-texbox> <div class=opinion-respond-text-box-container> <div class=counter ng-class="{\'limit-reached\' : labels.response_character_limit - thing.opi.length ===0}">{[{ labels.response_character_limit - thing.opi.length }]}</div> <textarea ng-model=thing.opi class=opinion-respond-text-box maxlength="{[{ ::labels.response_character_limit }]}" placeholder="{[{ ::appData.i18n.general.typeHere || \'Type here...\' }]}"></textarea> <div class=reaponse_message_container> <div class="allcaps_validation_error hidden">{[{ ::labels.opinion_all_caps_message }]}</div> <div class=opinion-added ng-if=isSaved>{[{ ::labels.opinion_added }]}</div> </div> </div> <button class="save-response-text btn" ng-click=saveResponse($event) ng-class="{\'btn-secondary\': !isSaved, \'btn-primary\': isSaved}">{[{ labels.save }]}</button> </div> </div> <div ng-if="activePage === \'descriptors\'" class="btn add-other-adjectives" ng-click=addOther()>{[{ ::labels.add_adjectives }]} <span class=plus>+</span></div> <div ng-if="activePage === \'textbox\'" class="btn no-opinion no-opinion-btn" ng-click=goToNextOrFinish($event)>{[{ ::labels.no_opinion }]}<span class="svgi icon-no-opinion"></span></div> </div> <div class=thing-review-nav> <button class=btn ng-click=goToPreviousPage($event) ng-class="{\'disabled\' : activePageIndex === 0}">{[{ ::labels.prev }]}</button> <div>{[{ activePageIndex + 1 }]}/{[{ ::pages.length }]}</div> <button class=btn ng-click=goToNextOrFinish($event)>{[{ ::labels.next }]}</button> </div> <descriptors-search class=descriptors-search selected-descriptors=descriptorsInUse add-common-descriptor=addCommonDesctiptor(descriptor) thing-uuid=thing.uuid close-modal=closeAddOtherPopup()></descriptors-search> '},function(e,exports,t){e.exports='<div class=rating ng-class="{active: active, done: thing.done, preview: isPreview, \'more-suggestions\': isMoreSuggestions, mobile: appContext.mobileBrowser.any()}"> <div class=frame ng-if="isRating && !thing.rated_class && !appContext.mobileBrowser.any()"></div> <div class=thing-thumbnail ng-if=!isNodeRating> <span class="node-type-icon-white {[{ thing.thing_class }]}"></span> <div class=clickable ng-style=getBackgroundStyle()> <div class="thing-icon-container clickable"> <div class="svgi thing-like clickable {[{ thing.rated_class }]}" ng-class="{\'show\' : thing.rated_class.length > 0 }"></div> </div> <ul class=quick-rate ng-if="isRating && !thing.rated_class && !appContext.mobileBrowser.any()"> <li ng-repeat="likebox in quickRateLikeboxes() | limitTo: 6"> <a href=# class="svgi {[{ likebox.css_class }]}" ng-click="selectLikebox($event, likebox, true)" ng-mouseenter="onLikeboxOver($event, likebox, true)" ng-mouseleave="onLikeboxLeave($event, likebox, true)"></a> </li> </ul> <div class=thing-container> <div class="thing-name clickable"><span class=clickable>{[{ thing_name_label }]}</span></div> </div> </div> </div> <div class="more-content clearfix" ng-if=active>'+t(363)+"</div> </div> "},function(e,exports){e.exports='<button ng-click=close($event) ng-show=showCloseButton class=return-btn>{[{ labels.return }]} <i class=icon-return></i></button> <div class="rating-info clearfix" ng-if=!isNodeRating> <div class=thing-title>{[{ thing.label }]}</div> <div class=thing-info-wrapper> <div ng-repeat="thingInfo in thing_info" class=thing-info> <div><label>{[{ ::thingInfo.label }]} </label> <span>{[{ ::thingInfo.info.label }]}</span></div> </div> </div> <div ng-if="isPreview && thing.wiki_content"> <div class="wiki-info redlinks"> {[{ thing.wiki_content.summary }]} <a ng-href="{[{ thing.wiki_content.url }]}" target=_blank>(...)</a> </div> </div> <div> <div ng-if="thing.reviewable == 1 && !isEmbedded && !isPreview"> <a ng-href="{[{ thing.thing_url }]}" ng-click=visitPage(); class="btn btn-secondary visit-page"><span class="svgi icon-visit-page"></span>{[{ labels.visit_page }]}</a> </div> </div> </div> <div class=preview-content ng-if=isPreview> <a ng-if="thing.reviewable == 1" ng-href="{[{ thing.thing_url }]}" ng-click=visitFullPage() class="btn btn-secondary visit-page visit-page-sm"><span class="svgi icon-visit-page"></span>{[{ labels.visit_full_page }]}</a> <div ng-if="thing.similar_things.data.length > 0" things-summary=thing.similar_things></div> <div ng-if="thing.graph_votes.length > 0" ratings-distribution=thing></div> <div ng-if="appContext.isLoggedIn && thing.reviewable == 1" class="header-question panel-heading"> {[{ whatDoYouThinkLabel }]} </div> </div> <div class="rating-content clearfix" accordion close-others=false ng-if="appContext.isLoggedIn && thing.reviewable == 1 || isEmbedded"> <div accordion-group is-initially-open=showLikeBoxes is-open=accordionPanels.isLikeboxesOpen> <div accordion-heading> <div class=accordion-caret ng-class="{expanded: accordionPanels.isLikeboxesOpen}"></div> <label>{[{ labels.your_rating }]} </label> <span class=like-box-name>{[{ thing.ratedName }]}</span> </div> <div class=like-boxes> <div class=like-box ng-class="{\'active\': likebox.active, \'disabled\' : likebox.disabled, \'last\': $last}" ng-repeat="likebox in likeboxes" ng-click="selectLikebox($event, likebox)" ng-mouseenter="onLikeboxOver($event, likebox)" ng-mouseleave="onLikeboxLeave($event, likebox)"> <div class="svgi {[{ likebox.css_class }]}"></div> </div> </div> </div> <div accordion-group is-initially-open="!isPreview && !isNodeRating" is-open=accordionPanels.isDescriptorOpen ng-show="showDescriptorPanel && showDescriptors"> <div accordion-heading> <div class=accordion-caret ng-class="{expanded: accordionPanels.isDescriptorOpen}"></div> <div class=selected-descriptors> <label class=selected-descriptors-label>{[{ labels.your_descriptors }]} </label> <div class="btn common" data-descriptor=descriptor data-uuid=thing.uuid ng-repeat="descriptor in descriptorsInUse"> {[{ descriptor.name }]} <a href=# class=select2-search-choice-close ng-click="deselectDescriptor($event, thing.uuid, descriptor)" tabindex=-1></a> </div> </div> </div> <div class=descriptors> <div class=descriptors-buttons> <thing-descriptor ng-repeat="descriptor in descriptors" descriptor=descriptor uuid=thing.uuid descriptor-type="{[{ descriptor.type }]}" class="common thing-descriptor"> </thing-descriptor> <button class="btn btn-secondary load-more-descriptors" ng-click=loadMoreDescriptors() ng-if="descriptors.length > 0" ng-disabled=disableLoadMoreBtn>{[{ labels.load_more }]}</button> </div> <div class=actions> <div class=input-append> <input type=hidden class="adjectives select2-offscreen" value=""> </div> <span class="btn btn-secondary add-on svgi icon-plus" ng-click=addToCustomDescriptors($event)></span> </div> <div class=descriptor-loader data-loading ng-if="descriptors.length === 0"></div> </div> </div> <div accordion-group is-initially-open="!isPreview && !isNodeRating" is-open=accordionPanels.isAddOpinionOpen> <div class=add-opinion> <div accordion-heading> <div class=accordion-caret ng-class="{expanded: accordionPanels.isAddOpinionOpen}"></div> <label>{[{ labels.your_opinion }]}</label> </div> <div class="opinion-respond-text-box-container clearfix"> <textarea class=opinion-respond-text-box placeholder="{[{ sumariseYourOpinion }]}" data-character-limit="{{ response_character_limit }}" data-character-limit-message="{{ response_character_limit_message }}" ng-model=thing.opi></textarea> <div class=reaponse_message_container> <div class="allcaps_validation_error yougovredtext hidden">{[{ labels.opinion_all_caps_message }]}</div> <div class="hidden counter_element"></div> </div> </div> <button class="btn save-response-text pull-right" ng-click=saveResponse($event) ng-class="{\'btn-primary\' : dirty, \'btn-secondary\' : !dirty }" title="Save your response">{[{ saveButtonLabel }]}</button> </div> </div> </div> <div class=preview-content ng-if=isPreview> <a ng-if="thing.reviewable == 1" ng-href="{[{ thing.thing_url }]}" ng-click=visitFullPage() class="btn btn-secondary visit-page visit-page-lg"><span class="svgi icon-visit-page"></span>{[{ labels.visit_full_page }]}</a> </div> <div class=yg-buttons ng-if=isEmbedded> <button data-role=button class="next yg-btn yg-btn-inverse" ng-click=close($event)><i class="icon-chevron-right icon-white"></i></button> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(365),o=n(a),r=t(366),l=n(r),u=s["default"].module("thingDescriptor",[]).service("Descriptors",o["default"]).directive("thingDescriptor",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){"ngInject";var n=20,i=n,s={},o={},l={},u={},c={},d=function(e,t){return s[e].findIndex(function(e){return e&&e.descriptor.uuid===t})},p=function(e,t){var n=d(e,t);return n!==-1&&s[e][n]},g=function(e){s[e]=[]},f=function(e,t){return u[e]=u[e]||[],u[e].indexOf(t)===-1&&u[e].push(t),u[e]},v=function(n){var i=t.defer();return c[n]=e.getThingDescriptors(n,function(e){c[n]=null,e.commonSelected&&e.commonSelected.length>0&&(o[n]=o[n].concat(e.commonSelected.map(function(e){return e.inUse=!0,e}))),e.common&&e.common.length>0&&(o[n]=o[n].concat(e.common.map(function(e){return e.inUse=!1,e})));var t=!0,s=!1,a=void 0;try{for(var l,u=(0,r["default"])(o[n]);!(t=(l=u.next()).done);t=!0){var d=l.value;d.inUse&&f(n,d)}}catch(p){s=!0,a=p}finally{try{!t&&u["return"]&&u["return"]()}finally{if(s)throw a}}i.resolve(o[n])},function(){}),i.promise},h=function(e,t){return o[e]=[],u[e]=[],s[e]=[],l[e]=0,i=t?t:n,v(e).then(function(e){return e.slice(0,i)})},m=function(e){g(e),l[e]+=n,l[e]>=o[e].length&&(l[e]=0);var t=l[e]+i,s=o[e].slice(l[e],t),a=!0,c=!1,d=void 0;try{for(var p,f=(0,r["default"])(s);!(a=(p=f.next()).done);a=!0){var v=p.value;v.inUse=u[e].indexOf(v)!==-1}}catch(h){c=!0,d=h}finally{try{!a&&f["return"]&&f["return"]()}finally{if(c)throw d}}return s},b=function(e,t,n,i){t.$element=n,t.descriptor.selected=t.descriptor.inUse,t.$attrs=i;var a=d(e,t.descriptor.uuid);a===-1?s[e].push(t):s[e][a]=t},y=function(e,t){var n=u[e].indexOf(t);n!==-1&&u[e].splice(n,1)},_=function(e){return u[e].map(function(e){return e.uuid})},S=function(t,n,i,s,a){var o=_(t);e.updateThingDescriptors(t,o,s,function(){a(),y(t,n)})},M=function(e,t,n){return t.descriptor.selected=!t.descriptor.selected,t.descriptor.selected?f(e,t.descriptor):y(e,t.descriptor),S(e,t.descriptor,t.descriptor.selected,function(){n.parents(".rating").addClass("done")},function(){t.descriptor.selected=!t.descriptor.selected}),u},w=function(e,t){var n=p(e,t.uuid);n?M(e,n,n.$element):(y(e,t),S(e,t,!1,function(){},function(){}))},k=function(e,t,n){var i=!0,s=!1,a=void 0;try{for(var o,l=(0,r["default"])(u[e]);!(i=(o=l.next()).done);i=!0){var c=o.value;if(c.uuid===t||c.name.toLowerCase()===n.toLowerCase())return!0}}catch(d){s=!0,a=d}finally{try{!i&&l["return"]&&l["return"]()}finally{if(s)throw a}}return!1},x=function(e){return u[e]},T=function(e,t){var n=p(e,t.uuid),i=null;if(!k(e,t.uuid,""))if(n)n.active||M(e,n,n.$element);else{i={uuid:t.id,name:t.text,inUse:!0},f(e,i),S(e,i,!0,function(){},function(){});var s=o[e].findIndex(function(e){return e.uuid===i.uuid});s!==-1&&o[e].splice(s,1),o[e].unshift(i)}return i},D=function(e){delete s[e],delete o[e],delete l[e],delete u[e],c[e]&&(c[e].$cancelRequest(),delete c[e])};(0,a["default"])(this,{addDescriptor:b,getDescriptors:h,getMoreDescriptors:m,toggleDescriptor:M,deselectDescriptor:w,selectedDescriptors:u,getSelectedDescriptors:x,addCommonDescriptor:T,destroyDescriptors:D})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s),o=t(22),r=n(o);i.$inject=["Ratings","$q"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(367),s=n(i),a=function(e){"ngInject";return{require:"^ratings",restrict:"E",scope:{descriptor:"<",uuid:"<"},template:s["default"],link:function(t,n,i,s){e.addDescriptor(t.uuid,t,n,i),t.descriptor.label=t.descriptor.name,t.toggleDescriptor=function(i){i.preventDefault(),i.stopPropagation(),t.$parent.thing.done=!0,s.markSelectedThingAsDirty(),e.toggleDescriptor(t.uuid,t,n),s.selectDescriptor(t.uuid,t,n),n.find("button").blur()}}}};a.$inject=["Descriptors"],exports["default"]=a},function(e,exports){e.exports='<button ng-click=toggleDescriptor($event) class=descriptor ng-class="{selected: descriptor.selected}">{[{ ::descriptor.label }]}</button> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){"ngInject";var t=[],n=[],i={url:"/opi/myfeed/load_things_to_rate",actions:{query:{method:"POST",params:{size:"@size",view_name:"@view_name",filter_name:"@filter_name",load_more:"@load_more",widget_id:"@widget_id"},isArray:!0,async:!1}},options:{cancellable:!0}},s={url:"/opi/myfeed/load_rated_things",actions:{query:{method:"POST",params:{size:"@size",view_name:"@view_name",filter_name:"@filter_name",load_more:"@load_more",widget_id:"@widget_id"},isArray:!0}},options:{cancellable:!0}},o={url:"/opi/browse/:thingUuid/rate/:ratingId",actions:{save:{method:"POST"}},options:{cancellable:!0}},r={url:"/opi/browse/:thingUuid/info_json",actions:{query:{method:"POST",isArray:!0}},options:{cancellable:!0}},l={url:"/opi/browse/:thingUuid/unrate",actions:{query:{method:"POST"}},options:{cancellable:!0}},u={url:"/opi/browse/:thingUuid/thing_data/json",actions:{query:{method:"POST"}},options:{cancellable:!0}},c={url:"/opi/myfeed/:thingUuid/load_descriptors",actions:{query:{method:"POST",isArray:!1}},options:{cancellable:!0}},d={url:"/opi/browse/:id/opinion/update/descriptors",actions:{save:{method:"POST",params:{id:"@id"}}},options:{cancellable:!0}},p={url:"/opi/browse/:thingUuid/opinion/search/descriptors/:term",actions:{query:{method:"POST",isArray:!0}},options:{cancellable:!0}},g={url:"/opi/browse/:thingUuid/opinion/custom/descriptor",actions:{save:{method:"POST"}},options:{cancellable:!0}},f={url:"/opi/browse/:thingUuid/opinion/custom/descriptor/:descId",actions:{save:{method:"POST"}},options:{cancellable:!0}},v=e(i.url,{},i.actions,i.options),h=e(s.url,{},s.actions,s.options),m=e(o.url,{},o.actions,o.options),b=e(r.url,{},r.actions,r.options),y=e(l.url,{},l.actions,l.options),_=e(c.url,{},c.actions,c.options),S=e(d.url,{},d.actions,d.options),M=e(p.url,{},p.actions,p.options),w=e(g.url,{},g.actions,g.options),k=e(f.url,{},f.actions,{},f.options),x=e(u.url,{},u.actions,u.options),T=function(e,t,n,i,s,a,o,r){return t?A(e,n,i,s,a,o,r):D(e,n,i,s,a,o,r)},D=function(e,n,i,s,a,o,r){var l=angular_data.things_to_rate_data&&angular_data.things_to_rate_data.length;return l>0&&l>=e?(t=angular_data.things_to_rate_data.slice(0,e),o()):t=v.query({size:e,view_name:n,filter_name:i,load_more:s,widget_id:a},o,r),t},O=function(e,t,n){return b.query({thingUuid:e},{},t,n)},E=function(e,t,n){return x.query({uuid:e},{},t,n)},A=function(e,t,i,s,a,o,r){var l=angular_data.rated_things&&angular_data.rated_things.length;return l>0&&l>=e?(n=angular_data.rated_things.slice(0,e),o()):n=h.query({size:e,view_name:t,filter_name:i,load_more:s,widget_id:a},o,r),n},R=function(e){t=e},C=function(e,t,n,i){m.save({thingUuid:e,ratingId:t},{},n,i)},P=function(e,t,n){y.query({thingUuid:e},{},t,n)},I=function(e,t,n){return _.query({thingUuid:e},{},t,n)},q=function(e,t,n,i){S.save({id:e},{descriptors:t},n,i)},N=function(e,t,n,i){M.query({thingUuid:e,term:t},{},n,i)},j=function(e,t,n,i){w.save({thingUuid:e,name:t},{},n,i)},F=function(e,t,n,i,s){k.save({thingUuid:e,descId:t,inUse:n},{},i,s)};(0,a["default"])(this,{getThings:T,setThings:R,getThingsInfo:O,getThingData:E,rate:C,unrate:P,searchDescriptors:N,addCustomDescriptor:j,updateCustomDescriptor:F,getThingDescriptors:I,updateThingDescriptors:q})}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(155),a=n(s);i.$inject=["$resource"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(103),o=n(a),r=t(131),l=n(r),u=t(370),c=n(u),d=t(379),p=n(d),g={ratings:{widget:{tickNumber:0,thingsNumber:9,transitionFast:225,transitionSlow:300,additionalThingsNumber:12,draggable:!1,gridColumns:3,gridColumnsMobile:2,maxRatings:1e3},feed:{tickNumber:0,thingsNumber:24,additionalThingsNumber:12,transitionFast:225,transitionSlow:300,maxRatings:75,draggable:!0,gridColumns:3,gridColumnsMobile:2}},rated:{widget:{tickNumber:0,thingsNumber:3,transitionFast:225,transitionSlow:300,additionalThingsNumber:12,draggable:!1,gridColumns:3,gridColumnsMobile:2,maxRatings:1e3},feed:{tickNumber:0,thingsNumber:24,additionalThingsNumber:12,transitionFast:225,transitionSlow:300,maxRatings:75,draggable:!1,gridColumns:3,gridColumnsMobile:2}}},f=function(e,t,n,i,a,r,u,d){"ngInject";return{restrict:"EA",template:p["default"],scope:{changeHeaders:"<",showReturnButton:"<",ratingWidgetData:"<",isEmbedded:"<",inModal:"<?",isPreview:"<?",boxContainer:"<?",opiChangeCallback:"&?",ratingChangeCallback:"&?",isNodeRating:"<?",surveyUuid:"@?"},controller:["$scope","$element","$attrs",function(p,f,v){var h=180,m=9,b=3,y=this,_=p.ratingWidgetData||{},S=_.data||[],M=_.widget_id||"",w={},k=[],x=200,T=null,D={},O=v.type||"widget",E="feed"===v.type,A={},R=[],C=[],P=[],I=void 0!==v.rated||!1,q=null,N=I?"reviews":"ratings",j=i.filters||"",F=i.subViewName||"",L=N+F,B=!1,H=!1,U=(0,o["default"])(document),z=(0,o["default"])(window),W=!1,Q=null,Y=p.surveyUuid||null,G=l["default"].isDefined(v.opiChangeCallback),K=l["default"].isDefined(v.ratingChangeCallback),J=l["default"].isDefined(v.boxContainer),V=[],X=0;J&&p.ratingWidgetData.$promise&&p.ratingWidgetData.$promise.then(function(){p.boxContainer.setHeader(p.ratingWidgetData.header),p.boxContainer.ready()}),!I&&g.ratings?(0,s["default"])(w,g.ratings):I&&g.rated&&(0,s["default"])(w,g.rated),I||(p.drawers=angular_data.drawers),p.descriptorsInUse={},p.showNextButton=!0,p.labels=u.labels,p.hideContent=E,p.appContext=d,p.gridColumns=b=w[O].gridColumns,p.likeboxes=angular_data.likeboxes,p.draggable=w[O].draggable,p.showCloseButton=E||p.isEmbedded||null!==Y,p.isFeed=E,p.hideMoreLikeThisWrapper=null!==Y,p.isLoading=H,p.selectedThing=!1,p.slides=[],p.ratingsCount=m,y.Descriptors=r,q=w[O].maxRatings,y.HEADERS={yourOpinion:{header:p.labels.rate_opinion,subheader:p.labels.rate_opinion_subheader},describe:{header:p.labels.describe,subheader:p.labels.describe_subheader},sumarise:{header:p.labels.thing_enter_opinion},mobileDescriptors:{header:S&&S[0]&&S[0].label,subheader:u.labels.mobile_adjectives_subheader.replace("%thing_name%",S[0]&&S[0].label||"")},mobileRatedOpinion:{header:S&&S[0]&&S[0].label,subheader:u.labels.mobile_rated_opinion_subheader}},p.$watch("appContext.device.isMobile",function(e){p.isReviewMode=!(!e||!I),k=[],p.thingToRate=null,T=null,y.bindEvents()}),p.$on("$destroy",function(){p.getThingsQuery&&p.getThingsQuery.$cancelRequest(),p.loadAdditionalThingsQuery&&p.loadAdditionalThingsQuery.$cancelRequest(),z.off("scroll",y.scrollHandler)}),y.alignGrid=function(e){!T||e?(p.$emit("thingActive",{active:!1,text:"",reload:!0}),p.grid=C=Q.reloadGrid(b),p.$apply()):W=!0},y.loadThings=function(){
if(!E){if(_.header&&_.subheader){var e=d.device.isMobile&&I?y.HEADERS.mobileDescriptors.header:_.header,n=d.device.isMobile&&I?y.HEADERS.mobileDescriptors.subheader:_.subheader;p.changeHeaders&&p.changeHeaders(e,n)}return Q=new c["default"]([],b),p.grid=C=Q.getGrid(),void(p.isEmbedded&&(p.additionalThingsData=P=S.slice(w[O].thingsNumber,w[O].thingsNumber+w[O].additionalThingsNumber)))}p.getThingsQuery=t.getThings(w[O].thingsNumber+w[O].additionalThingsNumber,I,L,j,0,M,function(e){p.getThingsQuery=null,(0,o["default"])(".loading",f.parents(".single-type-feed")).remove(),p.hideContent=!1,e.length>0&&e[0].uuid?(a.$broadcast("dataLoaded"),a.$broadcast("checkNavPosition"),Q=new c["default"](e.slice(0,w[O].thingsNumber),b),p.grid=C=Q.getGrid(),p.additionalThingsData=P=e.slice(w[O].thingsNumber,w[O].thingsNumber+w[O].additionalThingsNumber),y.bindScroll()):E&&(p.isEmpty=!0)},function(){E?p.isError=!0:f.closest(".widget").hide(),a.$broadcast("error"),p.hideContent=!1,(0,o["default"])(".loading",f.parents(".single-type-feed")).remove()})},y.bindScroll=function(){E&&z.on("scroll",y.scrollHandler)},y.scrollHandler=function(){var e=(0,o["default"])("#drawer-box")||null,t=(0,o["default"])("#drawer-box").offset()||{},n=160,i=!1;t.top=t.top||0,U.scrollTop()>n?(y.checkDrawerPosition(),U.scrollTop()+z.height()>(0,o["default"])(".my-feed-content").height()&&!i&&(i=!0,p.loadMore(function(){i=!1}))):e.css("top",75)},y.rate=function(e,n,i,s){t.rate(e,n,i,s)},y.addThing=function(e,t){e.$element=t,k.indexOf(e)===-1&&y.getThingByUUID(e.uuid)===-1&&k.push(e)},y.getThingByUUID=function(e){for(var t=0,n=k.length;t<n;t++)if(k[t].thing.uuid===e)return k[t];return-1},y.removeThing=function(e,t){if(E)e.$element.parent().slideUp("fast",function(){Q.removeDataFromGrid(e.row,e.column),y.loadThing(C[e.column].length,e.column)});else if(t){d.device.isMobile||Q.removeDataFromGrid(e.row,e.column);var n=k.indexOf(e);n!==-1&&k.splice(n,1)}},y.hideThing=function(e){e.$element.fadeOut(500)},y.loadThing=function(e,t){var n=null;P.length>0?(n=P.shift(),Q.addElementToGrid(e,t,n)):y.loadAdditionalThings(y.loadThing,function(){})},p.safeApply=function(e){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?this.$eval(e):this.$apply(e)},y.forceSelectThing=function(){for(var e=0,t=k.length;e<t;e++)k[e]!==T&&k[e].$element.parent().css("display","none");n(function(){T.$broadcast("thingSelected"),p.$emit("thingActive",{active:!0,text:y.HEADERS.yourOpinion.subheader.replace("__thing_name__",T.thing.thing_name)})},0)},y.selectThing=function(e,t){T||(T=e,d.device.isMobile||(p.showNextButton=!1,p.hideMoreButton=!0,D=e.$element.position(),p.showReturnButton&&p.showReturnButton(!0),(0,o["default"])(".next-widget").hide(),d.isEmbedded&&J&&p.boxContainer.hideNextButton()),E?y.selectFeedThing(e):t?y.forceSelectThing():d.device.isMobile?I||n(function(){T.thing.showLikeBoxes=!0,p.thingToRate=T.thing}):y.selectWidgetThing(e))},y.disableWidgetThings=function(){if(!d.device.isMobile)for(var e=0,t=k.length;e<t;e++)k[e]!==T&&(k[e].$element.parent().css({opacity:.25}),k[e].$element.addClass("disabled"))},y.enableWidgetThings=function(){if(!d.device.isMobile)for(var e=0,t=k.length;e<t;e++)k[e]!==T&&(k[e].$element.parent().css({opacity:1}),k[e].$element.removeClass("disabled"))},y.selectFeedThing=function(){for(var e=0,t=k.length;e<t;e++)w[O].draggable&&k[e].$element.draggable({disabled:!0}),k[e]!==T&&(k[e].$element.parent().css({opacity:.25}),k[e].$element.addClass("disabled"));T.$element.stop().css({position:"absolute",left:D.left,top:D.top,zIndex:100}).velocity({left:0},{duration:w[O].transitionFast,complete:function(){T.active=!0,T.$apply(),(0,o["default"])(".more-content",T.$element).fadeIn(w[O].transitionSlow),T.$element.css({opacity:1}),T.$broadcast("thingSelected"),y.changeContentHeight()}})},y.selectWidgetThing=function(){var e=(0,o["default"])(T.$element),t=f.find(".ratings-wrapper");e.css({position:"absolute",left:D.left,top:D.top,zIndex:100}),y.disableWidgetThings(),t.css({"min-height":t.height()}),e.stop().animate({top:0,left:0},w[O].transitionFast,"linear",function(){p.$emit("thingActive",{active:!0,text:y.HEADERS.yourOpinion.subheader.replace("__thing_name__",T.thing.thing_name)}),T.$broadcast("thingSelected");for(var t=0,n=k.length;t<n;t++)k[t]!==T&&k[t].$element.parent().css("display","none");e.removeAttr("style")})},y.finishWidget=function(){var e=f.parents(".widget");e.find(".widget-content").css({height:e.height()}),e.find(".sub-header").hide(),p.isFinished=!0,e.css({overflow:"hidden"}).velocity({opacity:0},{duration:300,delay:1e3}).velocity({height:0,minHeight:0,margin:0},{duration:500,complete:function(){p.$emit("widgets.remove",_)}})},y.closeThing=function(e){if(e=e||!E||I||!1,d.device.isMobile)return T=null,void(p.thingToRate=null);T&&T.thing_info&&T.thing_info.$cancelRequest(),W&&(W=!1,p.grid=C=Q.reloadGrid(b)),E||(0,o["default"])(T.$element).css({position:"absolute",left:0,top:0}),T.thing.removeAfterClose&&(e=!1),r.destroyDescriptors(T.thing.uuid),T.likeboxes=[],T.descriptors=[],T.showDescriptorBox=!1,T.descriptorsInUse=[],T.dirty=!1,d.isEmbedded&&J&&p.boxContainer.showNextButton(),p.hideMoreButton=!1;for(var t=0,n=k.length;t<n;t++)w[O].draggable&&k[t].$element.draggable({disabled:!1}),k[t]!==T&&(k[t].$element.parent().css({visibility:"visible",display:"block",opacity:1}),k[t].$element.removeClass("disabled"));(0,o["default"])(".more-content",T.$element).fadeOut(w[O].transitionFast,function(){e&&T.$element.velocity({top:D.top,left:D.left},w[O].transitionFast,function(){T.active=!1,I||(T.addOpinion=!1),T.$element.removeAttr("style"),T.$apply(),T=null,(0,o["default"])(".next-widget").show(),p.$emit("thingActive",{active:!1,text:""}),E&&y.changeContentHeight()})}),(0,o["default"])(".adjectives").select2("destroy"),p.showReturnButton&&p.showReturnButton(!1),E||f.removeAttr("style"),e||T.$element.fadeOut(400,function(){p.$emit("thingActive",{active:!1,text:""}),y.removeThing(T,!0),T.active=!1,T.likeboxes=[],T.descriptors=[],T=null,p.$apply()})},y.addDrawer=function(e,t){e.$element=t,R.push(e)},y.dragThingStart=function(e,t){var n=l["default"].copy(angular_data.drawers)||[],i=!1;t=t||[],l["default"].forEach(k,function(t){t!==e&&(t.$element.css({opacity:.1}),w[O].draggable&&t.$element.draggable({disabled:!0}))});for(var s=0;s<n.length;s++){i=!1;for(var a=0;a<t.length;a++)n[s].likeboxbucket_key===t[a].likeboxbucket_key&&(n[s]=t[a],i=!0);i||(n[s].disable=!0)}if(n.length<=t.length)for(var o=0;o<t.length;o++){i=!1;for(var r=0;r<n.length;r++)if(n[r].likeboxbucket_key===t[o].likeboxbucket_key){i=!0;break}i||void 0===t[o].likeboxbucket_key||n.push(t[o])}p.drawers=n,p.$apply(),ga("send","event",angular_data.gaq_label.myfeed,"Ratings DragStart",location.hash)},y.dragThingStop=function(){l["default"].forEach(k,function(e){e.$element.css({opacity:1,zIndex:""}),w[O].draggable&&e.$element.draggable({disabled:!1})}),p.drawers=angular_data.drawers,p.$apply()},y.addThingToRated=function(e,t,n){A[e]=A[e]||[],y.getRatedThing(t)||A[e].push({uuid:t,likeboxbucket_key:n})},y.removeThingFromRated=function(e){l["default"].forEach(A,function(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})},y.getRatedThing=function(e){var t=null;return l["default"].forEach(A,function(n){for(var i=0,s=n.length;i<s;i++)if(n[i].uuid===e){t=n[i];break}}),t},y.loadAdditionalThings=function(n,i){var s=S.length,r=w[O].additionalThingsNumber;if(!B&&!H){for(H=!0;(s+r)%3!==0;)r+=1;E?f.append(e("<div class='data-loading load-things' data-loading></div>")(p)):p.spinner=!0,p.loadAdditionalThingsQuery=t.getThings(r,I,L,j,1,M,function(e){return H=!1,p.spinner=!1,(0,o["default"])(".load-things").remove(),0!==e.length&&e[0].uuid?(p.loadAdditionalThingsQuery=null,P=P.concat(e),p.additionalThingsData=P,void(n&&n())):(i&&i(),a.$broadcast("ratingsEmpytData"),void(B=!0))},function(){a.$broadcast("error"),i&&i(),B=!0,(0,o["default"])(".load-things").remove()})}},y.changeHeaders=function(e,t){E||p.changeHeaders&&p.changeHeaders(e,t)},y.isRated=function(){return I},y.selectDescriptor=function(e){p.descriptorsInUse=y.Descriptors.getSelectedDescriptors(e),p.isPreview&&ga("send","event",u.gaq.namespace,"Node preview popup","Descriptor clicked")},y.bindEvents=function(){n(function(){(0,o["default"])(".return-btn",f.parent()).off().on("click",function(){p.close()})},0,!1)},y.changeContentHeight=function(){var e=void 0;n(function(){if(f.css("min-height",0),T)if(E){var t=C[Q.getLongestColumn(b)].length;e=(0,o["default"])(".more-content",T.$element).height()-(t-T.row)*h+(0,o["default"])(".load-more",f).height(),e>0&&f.css("min-height",f.height()+e)}else f.css("min-height",(0,o["default"])(".more-content",T.$element).height()+10);else if(!T&&!E){var n=C[Q.getLongestColumn(b)]||[];x=n.length*h+10,f.css("min-height",x)}},0,!1)},y.isSelectedThing=function(){return null!==T},y.checkDrawerPosition=function(){var e=(0,o["default"])("#drawer-box")||null,t=40,n=115,i=(0,o["default"])(document);i.scrollTop()+e.height()<=(0,o["default"])(document).height()-t&&e.css("bottom","auto").css("top",i.scrollTop()-n+10)},y.isFeed=function(){return E},y.getSurveyUuid=function(){return Y},y.markSelectedThingAsDirty=function(){T&&(T.dirty=!0)},p.loadMore=function(e){return T?void e():(Q.getSizeOfGrid()<q&&P.length>0&&(C=Q.addDataToGrid(P,b),p.grid=C,p.additionalThingsData=P=[],p.safeApply(),a.$broadcast("checkNavPosition"),n(function(){y.checkDrawerPosition()},0)),void(e&&e()))},p.getMoreThings=function(){(0,o["default"])(".load-more").append(e("<div class='data-loading' data-loading></div>")(p)),(0,o["default"])(".load-more span:first-child",f).hide(),q+=q,ga("send","event",angular_data.gaq_label.myfeed,"LoadMoreRatings Load Manual",location.hash),p.loadMore(function(){(0,o["default"])(".load-more").remove()})},p.close=function(e){e&&e.stopPropagation(),T&&y.closeThing(!0),E||y.changeHeaders(_.header,_.subheader)},p.$watch("grid",function(){Q&&Q.getSizeOfGrid(b)>=q&&((0,o["default"])(".load-more",f).length||f.append(e('<div ng-click="getMoreThings()" class="load-more"><span class="load-more-text"> {[{ labels.load_more }]} </span></div>')(p)))},!1),p.$watch("additionalThingsData",function(e){E&&e&&e.length>=0&&e.length<=w[O].thingsNumber&&y.loadAdditionalThings(function(){n(function(){p.safeApply(),z.scroll(),ga&&ga("send","event",angular_data.gaq_label.myfeed,"LoadMoreRatings Load",location.hash)},0)},function(){})},!1),p.$watch("ratingWidgetData.data",function(e){e&&(C=Q?Q.clearGrid():[],p.grid=C,d.device.isMobile||(k=[]),e.length>0?(C=Q.addDataToGrid(e,b),p.limitedOptions=!I&&e.length<m-3,p.slides=y.createSlides(y.fillWithPlaceholders(e),V)):(0===p.slides.length&&(p.slides=y.createSlides(y.fillWithPlaceholders(e),V),I||(p.limitedOptions=!0)),y.finishSlides()))}),p.$on("bodyClicked",function(){E&&T&&y.closeThing(T)}),p.$on("moreThings",y.disableWidgetThings),p.$on("searchStart",y.disableWidgetThings),p.$on("loadMoreSuggestionsSuccess",y.enableWidgetThings),p.$on("loadMoreSuggestionsFailure",y.enableWidgetThings),p.$on("updateThingsError",y.enableWidgetThings),p.$on("updateRatedValues",function(e,t){for(var n=0,i=t.length;n<i;n++){var s=y.getThingByUUID(t[n].uuid);s!==-1&&(s.thing.rated_class=t[n].rated_class,s.thing.done=!0)}}),p.$on("selectThing",function(e,t){var i=y.getThingByUUID(t.uuid);d.device.isMobile&&(T=null,p.thingToRate=null),i===-1?(t.removeAfterClose=!0,C=Q.addDataToGrid(t,b),n(function(){i=d.device.isMobile?{thing:t}:y.getThingByUUID(t.uuid),y.selectThing(i)},0)):y.selectThing(i)}),y.dedupeThings=function(e){return e.filter(function(e){return y.getThingByUUID(e.uuid)===-1})},y.getNonRatedThingIndexFromSlide=function(e){for(var t=-1,n=0,i=V[e].data.length;n<i;n++)""===V[e].data[n].rated_class&&(t=n);return t},y.getEmptySlide=function(){for(var e=[],t={},n=0;n<m;n++)t={id:e.length,thing_type:S&&S[0]&&S[0].thing_type,thing_class:S&&S[0]&&S[0].thing_class},e.push(t);return{index:-1,data:e}},y.hasEmptySlide=function(){var e=V.filter(function(e){return e.index===-1});return e.length>0},y.removeEmptySlide=function(e){y.hasEmptySlide()&&(e.pop(),p.slides=e)},y.fillWithPlaceholders=function(e){for(var t=e.length-1;t<m-1;t++)e.push({id:e.length,thing_type:"",thing_class:"",placeholder:!0});return e},y.createSlides=function(e,t){var n=y.dedupeThings(e),i=n.splice(0,w[O].thingsNumber);return t=y.addToSlides(i,t),e.length>=m&&!y.hasEmptySlide()&&t.push(y.getEmptySlide()),t},y.addToSlides=function(e,t){return t.splice(-1,0,{index:t.length,data:e}),t},y.getSlideIndexByThingUUID=function(e){for(var t=0,n=V.length;t<n;t++)for(var i=0,s=V[t].data.length;i<s;i++)if(V[t].data[i].uuid===e)return t;return-1},y.finishSlides=function(){y.removeEmptySlide(V)},y.loadMoreRatings=function(e){e&&e.preventDefault();var t=P.splice(0,w[O].thingsNumber);if(C=Q.clearGrid(),p.grid=C,!d.device.isMobile){var i=(0,o["default"])(".ratings",f);i.css("min-height",i.outerHeight())}t.length>0?((0,o["default"])(".load-things",f).remove(),C=Q.addDataToGrid(t,b),p.slides=y.addToSlides(y.fillWithPlaceholders(t),V),n(function(){y.enableWidgetThings()},0,!1)):H||(H=!1,y.loadAdditionalThings(y.loadMoreRatings,function(){y.getThingByUUID(t.uuid)&&d.device.isMobile?y.finishSlides():(f.closest(".widget").slideUp(),n(function(){(0,o["default"])(".ratings",f).removeAttr("style")},0,!1))}))},p.opiSaveCallback=function(e){G&&p.opiChangeCallback({opi:e})},p.ratingSaveCallback=function(e){K&&p.ratingChangeCallback({rating:e})},p.isRated=y.isRated(),p.loadMoreRatings=y.loadMoreRatings,p.loadSlide=function(){p.surveyUuid?p.$emit("moreThings"):y.loadMoreRatings()},p.slideChanged=function(e){e>=X&&y.hasEmptySlide()&&(e===V.length-2||e===V.length-1)&&p.loadSlide(),X=e},this.loadThings(),this.bindEvents()}]}};f.$inject=["$compile","Ratings","$timeout","$routeParams","$rootScope","Descriptors","applicationData","appContextSrv"],exports["default"]=f},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(371),s=n(i),a=t(175),o=n(a),r=t(176),l=n(r),u=t(131),c=n(u),d=function(){function e(t,n){(0,o["default"])(this,e),this.grid=[],this.gridElements=[],this.maxColumns=n||3,t&&this.addRows(t)}return(0,l["default"])(e,[{key:"flattenArray",value:function(e){return e.reduce(function(e,t){return t.some(Array.isArray)?e.concat(this.flattenArray(t)):e.concat(t)},[])}},{key:"prepareColumnsArray",value:function(){return this.grid.slice(0,this.maxColumns).filter(function(e){return!!e}).map(function(e){return e.length})}},{key:"getShortestColumn",value:function(){var e=this.prepareColumnsArray(),t=Math.min.apply(Math,(0,s["default"])(e));return e.indexOf(t)}},{key:"getLongestColumn",value:function(){var e=this.prepareColumnsArray(),t=Math.max.apply(Math,(0,s["default"])(e));return e.indexOf(t)}},{key:"getSizeOfGrid",value:function(){return this.gridElements.length}},{key:"addRows",value:function(e){for(;e.length>0;)for(var t=0,n=0;n<this.maxColumns;n+=1){this.grid[t]=this.grid[t]||[];var i=e.shift();i&&(this.grid[t].push(i),this.gridElements.push(i),t+=1)}return this.grid}},{key:"fillColumns",value:function(e){for(var t=this.getShortestColumn(),n=this.getLongestColumn();t!==n&&e.length>0;){this.grid[t]=this.grid[t]||[];var i=e.shift();i&&(this.grid[t].push(i),this.gridElements.push(i),t+=1),t=this.getShortestColumn(this.maxColumns)}return this.grid}},{key:"addDataToGrid",value:function(e){var t=[].concat(e);return this.fillColumns(t,this.grid),this.addRows(t,this.grid),this.grid}},{key:"removeMoreSuggestion",value:function(){for(var e=0,t=this.grid.length;e<t;e++)for(var n=0,i=this.grid[e].length;n<i;n++)if("moreSuggestion"===this.grid[e][n].type){var s=this.gridElements.indexOf(this.grid[e][n]);s!==-1&&this.gridElements.splice(s,1),this.grid[e].splice(n,1);break}}},{key:"removeDataFromGrid",value:function(e,t){var n=this.gridElements.indexOf(this.grid[t][e]);n!==-1&&this.gridElements.splice(n,1),this.grid[t].splice(e,1)}},{key:"addElementToGrid",value:function(e,t,n){var i=c["default"].copy(n);void 0===this.grid[t][e]&&(this.grid[t][e]=i,this.gridElements.push(i))}},{key:"getGrid",value:function(){return this.grid}},{key:"clearGrid",value:function(){return this.grid=[],this.gridElements=[],this.grid}},{key:"setMaxColumns",value:function(e){this.maxColumns=e||3}},{key:"reloadGrid",value:function(e){var t=c["default"].copy(this.gridElements);return this.clearGrid(),this.setMaxColumns(e),this.grid=this.addRows(t),this.grid}}]),e}();exports["default"]=d},,,,,,,,,function(e,exports,t){e.exports='<div ng-if="appContext.device.isMobile && !isReviewMode">'+t(380)+'</div> <div ng-if="appContext.device.isMobile && isReviewMode">'+t(381)+"</div> <div ng-if=!appContext.device.isMobile>"+t(382)+"</div> "},function(e,exports){e.exports='<div class="ratings clearfix"> <slide-box class=swiper-container on-slide-change-start=slideChanged(slideIndex)> <div ng-repeat="slide in slides track by slide.index" class="slide swiper-slide"> <div ng-repeat="thing in slide.data track by (thing.uuid || thing.id)" thing=::thing uuid=::thing.uuid close=close() show-like-boxes=::showLikeBoxes rating-save-callback=ratingSaveCallback(rating)> </div> </div> </slide-box> <div ng-if=::limitedOptions class=limited-options>{[{ ::labels.limited_options }]}</div> <div ng-if=thingToRate thing=thingToRate uuid=::thingToRate.uuid close=close() show-like-boxes=::thingToRate.showLikeBoxes rating-save-callback=ratingSaveCallback(rating) standalone=true class=thing-open></div> </div> '},function(e,exports){e.exports="<div ng-if=!isFinished class=ratings> <div class=slide> <div thing=::ratingWidgetData.data[0] uuid=::ratingWidgetData.data[0].uuid rating-save-callback=ratingSaveCallback(rating)> </div> </div> </div> <success-banner class=success-banner ng-if=isFinished></success-banner> "},function(e,exports){e.exports='<div class=ratings-wrapper ng-class="{\'widget\': isFeed || isEmbedded}" ng-hide=hideContent> <div ng-if=isFeed class=drawer-containter> <div class=drawer-header> <div class=nav-header>{[{ ::labels.my_ratings}]}</div> <p class=header-text>{[{ ::labels.my_ratings_text}]}</p> </div> <div id=drawer-box> <div drawer ng-repeat="drawer in drawers"></div> </div> </div> <div class="ratings clearfix"> <div ng-include ng-if=isFeed src="\'/opi/widgets/angular/view/empty\'"></div> <div ng-include ng-if=isFeed src="\'/opi/widgets/angular/view/error\'"></div> <div ng-repeat="column in grid" class=column ng-class="{last: $last, first: $first}"> <div ng-repeat="thing in column" class="clearfix thing-wrapper"> <div data-thing=thing is-preview=isPreview is-node-rating=isNodeRating column=$parent.$index row=$index is-embedded=isEmbedded descriptors-in-use=descriptorsInUse uuid=thing.uuid show-close-button="\n                     showCloseButton" close=close() draggable=draggable show-like-boxes=showLikeBoxes in-modal=inModal opi-save-callback=opiSaveCallback(opi) rating-save-callback=ratingSaveCallback(rating)></div> </div> </div> </div> <div class="more-like-this-wrapper widget-footer" ng-hide=hideMoreButton ng-if="!isFeed && !inModal && !hideMoreLikeThisWrapper && !isNodeRating"> <a ng-href=# ng-click=loadMoreRatings($event) ng-hide=hideMoreButton class="pull-right more-like-this" ng-hide=showButton><span class=text>{[{ ::labels.refresh }]}</span> <span class="svgi icon-refresh-gray" ng-class="{spinner: spinner}"></span></a> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(384),o=n(a),r=t(547),l=n(r),u=t(548),c=n(u),d=t(551),p=n(d),g=s["default"].module("surveyWidget",[o["default"],l["default"],c["default"]]).component("ygSurveyWidget",p["default"]);exports["default"]=g.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(385),o=n(a),r=t(545),l=n(r),u=s["default"].module("survey",[o["default"]]).component("ygSurvey",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(386),o=n(a),r=t(389),l=n(r),u=t(399),c=n(u),d=t(416),p=n(d),g=t(434),f=n(g),v=t(404),h=n(v),m=t(538),b=n(m),y=t(543),_=n(y),S=s["default"].module("question",[o["default"],p["default"],c["default"],f["default"],h["default"],l["default"],b["default"]]).component("ygQuestion",_["default"]);exports["default"]=S.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(387),o=n(a),r=s["default"].module("singleSelect",[]).component("ygSingleSelect",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(175),o=n(a),r=t(176),l=n(r),u=t(388),c=n(u),d=function(){function e(){"ngInject";(0,o["default"])(this,e),this.textChoiceValid=!0}return(0,l["default"])(e,[{key:"$onInit",value:function(){var e=this;this.answerModel={},this.selectedAnswers?(this.answerModel=this.answerOptions.find(function(t){return t.answer_option_uuid===e.selectedAnswers[0].answer_option_uuid}),this.textChoice=this.selectedAnswers.filter(function(e){return e.text_choice}).map(function(e){return e.text_choice}),this.showResults=this.hasResults(this.answerOptions),this.onChange()):this.selectedAnswers=[],this.onAnswerValidityChange({validity:this.selectedAnswers.length>0})}},{key:"isAnswerOptionChecked",value:function(e){return this.answerModel===e}},{key:"hasResults",value:function(e){return e.reduce(function(e,t){return e+t.result},0)>0}},{key:"updateOpenTextValidity",value:function(e){var t=e.validity;this.textChoiceValid=t,this.onAnswerValidityChange({validity:this.textChoiceValid})}},{key:"updateOpenText",value:function(e){var t=e.answer;this.onSelectAnswer({answer:(0,s["default"])({},{simple_choices:[].concat(this.answerModel)},t)})}},{key:"onChange",value:function(e,t){e&&e.question_ref&&!t&&(this.openTextAnswer=null,this.updateOpenTextValidity({validity:!0})),this.onSelectAnswer({answer:{simple_choices:[].concat([this.answerModel])}}),this.showResults||(this.showResults=this.hasResults(this.answerOptions)),this.onAnswerValidityChange({validity:this.textChoiceValid})}}]),e}(),p={bindings:{answerOptions:"<",selectedAnswers:"<?",resultLabel:"@?",onSelectAnswer:"&",onAnswerValidityChange:"&"},controller:d,template:c["default"]};exports["default"]=p},function(e,exports){e.exports='<div ng-repeat="answerOption in ::$ctrl.answerOptions" class=answer-option ng-class="{\'answer-options-results\': $ctrl.showResults}"> <label> <input type=radio ng-model=$ctrl.answerModel ng-value=answerOption ng-change="$ctrl.onChange(answerOption, checked)"> <span class=answer-option-tick></span> <span class=answer-option-label>{[{ ::answerOption.label }]}</span> <yg-open-question ng-if="answerOption.question_ref && answerOption === $ctrl.answerModel" options="{placeholder: $ctrl.labels.answers.opneText.placeholder || \'Please specify\'}" answer-option-uuid=answerOption.answer_option_uuid question=answerOption.question_ref selected-answers=$ctrl.textChoice on-select-answer=$ctrl.updateOpenText({answer}) on-answer-validity-change=$ctrl.updateOpenTextValidity({validity})></yg-open-question> <span class=answer-option-percentage>{[{ ::answerOption.result }]}%</span> </label> <span class=answer-option-bar-container> <span class=answer-option-bar ng-style="{width: answerOption.result + \'px\'}"></span> </span> </div> <div ng-if="$ctrl.showResults && $ctrl.resultLabel" class=legend-box>{[{ ::$ctrl.resultLabel }]}</div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(390),o=n(a),r=t(391),l=n(r),u=s["default"].module("ratingsQuestion",[]).controller("ratingsQuestionCtrl",o["default"]).directive("ygRatingsQuestion",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,i,s,o){"ngInject";var r=8,l=this,u=a["default"].copy(e.question.suggested_ratings),c={things:{data:e.question.suggested_ratings},ratedThings:[],ticks:[],minTicks:e.question.minimum||5,selectedTicks:0},d={thingName:""},p={primaryFilters:e.question.primary_filters||[]},g=1,f=null,v=!1,h=null,m=void 0;e.onAnswerValidityChange({validity:!0}),e.appContext=o,e.labels=s.labels,l.hasSuggestedButton=function(e){return e.some(function(e){return e.type&&"moreSuggestion"===e.type})},l.addMoreSuggestionButton=function(e){return!l.hasSuggestedButton(e)&&!o.device.isMobile&&(e.push({label:s.labels.more_suggestions,thing_name:s.labels.more_suggestions,thing_type:"",uuid:"",thumbnail:"",thing_class:"svgi icon-refresh-green",thing_info:[],rated_class:"",reviewable:"",type:"moreSuggestion"}),e)},l.getThingIndex=function(t){return e.ratingsQuestion.ratedThings.findIndex(function(e){return e.uuid===t.uuid})},l.clearSearchBox=function(){e.thingSearchConfig.thingSearch.thingName=""},l.updateRatedThings=function(t){var n=l.getThingIndex(t);n===-1?(e.ratingsQuestion.ratedThings.push(t),l.selectTick(t)):e.ratingsQuestion.ratedThings[n].rated_class=t.rated_class},l.removeFromRatedThings=function(t){var n=e.ratingsQuestion.ratedThings.indexOf(t);n!==-1&&(e.ratingsQuestion.ratedThings.splice(n,1),l.removeTick(t))},l.selectTick=function(e){for(var t=!1,n=0;n<c.ticks.length;n++)if(a["default"].isNumber(c.ticks[n].label)){c.ticks[n]=e,t=!0;break}t||c.ticks.push(e)},l.removeTick=function(e){var t=c.ticks.indexOf(e);t!==-1&&c.ticks.splice(t,1)},l.loadMoreSuggestions=function(){e.ratingsQuestion.things.loadMore=!0,d.thingName?e.$broadcast("updateThings",{query:d.thingName,reset:!1}):(g+=1,f&&!o.device.isMobile&&f.$cancelRequest(),f=i.loadMoreRatingsSuggestions({survey:e.surveyUuid,question:e.question.uuid},g,function(t){t&&(t.length<r&&!o.device.isMobile&&(g=0),f=null,e.updateThings(t,null,t.length>0,!0),t.length>0&&(u=a["default"].copy(t)),e.$broadcast("loadMoreSuggestionsSuccess"))},function(){e.$broadcast("loadMoreSuggestionsFailure")}))},l.updateThingError=function(){e.$broadcast("updateThingError")},l.loadRatedValues=function(){h&&h.$cancelRequest();var t=c.things.data.map(function(e){return e.uuid}).filter(function(e){return e});h=i.getRatedValuesForThings(t,function(t){h=null,e.$broadcast("updateRatedValues",t)},function(){})},l.focusSearch=function(){a["default"].element(".search-box input").focus()},l.init=function(){c.things.data.length>0?(l.addMoreSuggestionButton(c.things.data),l.loadRatedValues()):e.displayNoResultsBox=!0,e.question.secondary_filters&&(p.secondaryFilters=e.question.secondary_filters),e.ratingsQuestion=l.ratingsQuestion=c;for(var t=0;t<c.minTicks;t++)c.ticks.push({label:t+1});e.onSelectAnswer({answer:{simple_choices:[]}})},e.openSearchPopup=function(){m=a["default"].element(document).scrollTop(),a["default"].element(".off-canvas-wrapper").css({height:"100%",overflow:"hidden",width:"100%",position:"fixed"}),t.find("things-search-popup").addClass("visible").find("input").focus()},e.closeSearchPopup=function(){a["default"].element(".off-canvas-wrapper").removeAttr("style"),a["default"].element(document).scrollTop(m),n(function(){t.find("things-search-popup").removeClass("visible")},0,!1)},e.updateThings=function(t,n,i,s){var a=u;t&&(a=t,0!==t.length||o.device.isMobile||(a=u)),e.ratingsQuestion.things.query=d.thingName,e.$broadcast("loadMoreSuggestionsSuccess"),e.displayNoResultsBox=!1,0!==a.length||s?(a.length===r||i)&&l.addMoreSuggestionButton(a):e.displayNoResultsBox=!0,t?(e.ratingsQuestion.things.forceReset=v,v=!1):(v=a.length<r,a.length>0&&l.addMoreSuggestionButton(a)),e.ratingsQuestion.things.data=a,a.length>0&&l.loadRatedValues()},e.clear=function(){e.thingSearchConfig.thingSearch.thingName=""},e.selectThing=function(t){e.$broadcast("selectThing",t)},e.thingSearchConfig={success:e.updateThings,failure:function(){},loading:{activate:!1},resource:i.getRatings,thingSearch:d,surveyUuid:e.surveyUuid,questionUuid:e.question.uuid,placeholder:(e.question.textonly||e.question.autocomplete||{placeholder:""}).placeholder||s.labels.ratings_question_search_placeholder}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(131),a=n(s);i.$inject=["$scope","$element","$timeout","MiniSurvey","applicationData","appContextSrv"],exports["default"]=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(392),s=n(i),a=t(103),o=n(a),r=t(396),l=n(r),u=function(e,t){"ngInject";return{restrict:"EA",scope:{question:"=",surveyUuid:"=",isEmbedded:"=",changeHeaders:"=",displayReturnButton:"=",onSelectAnswer:"&",onAnswerValidityChange:"&"},controller:"ratingsQuestionCtrl",template:l["default"],require:["ygRatingsQuestion"],link:function(n,i,a,r){var l=(0,s["default"])(r,1),u=l[0];e.enabled(i,!1),u.init(),n.$on("likeboxSelected",function(e,t,i){n.surveyUuid===i&&(n.thingActive||u.clearSearchBox(),u.updateRatedThings(t))}),n.$on("noOpinionSelected",function(e,t){n.thingActive||u.clearSearchBox(),u.removeFromRatedThings(t)}),n.$on("thingActive",function(e,i){var s=(0,o["default"])(".things-search-wrapper").height();t(function(){(0,o["default"])(".rating-text").css({height:s+"px"}),n.thingActive=i.active,n.ratingText=i.text,i.reload||(n.showTopNav=!i.active)})}),n.$on("moreThings",function(){u.loadMoreSuggestions()})}}};u.$inject=["$animate","$timeout"],exports["default"]=u},,,,,function(e,exports,t){e.exports="<div ng-if=appContext.device.isMobile>"+t(397)+"</div> <div ng-if=!appContext.device.isMobile>"+t(398)+"</div> "},function(e,exports){e.exports='<div class=ratings-question ng-class="{\'thing-active\': thingActive, \'focus-active\' : focusActive}"> <div class=things-search-wrapper ng-class="{\'thing-active\': thingActive}"> <div class=search-box> <div class=input-wrapper> <div class=input-append ng-click=openSearchPopup()> <span class=placeholder>{[{ ::labels.search_here }]}</span> <span class="svgi icon-magnifier"></span> </div> </div> </div> </div> <div ng-if=ratingsQuestion ratings survey-uuid="{[{ ::surveyUuid }]}" rating-widget-data=::ratingsQuestion.things></div> <div class=things-search-wrapper> <div class="selected-answers-container clearfix" ng-show="ratingsQuestion.ratedThings.length > 0 && !thingActive"> <div class=selected-answers-box> <div class="btn common selected-thing" ng-class="{suggestion : thing.suggestion}" ng-repeat="thing in ratingsQuestion.ratedThings track by $index"> <span class="thing-like svgi {[{ thing.rated_class }]}"></span> <span class=thing-name>{[{ ::thing.thing_name }]}</span> </div> </div> </div> </div> <things-search-popup search-config=thingSearchConfig select-item=selectThing(thing) selected-things=ratingsQuestion.ratedThings close-modal=closeSearchPopup()></things-search-popup> </div> '},function(e,exports){e.exports='<div class=ratings-question ng-class="{\'thing-active\': thingActive, \'focus-active\' : focusActive}"> <div class=things-search-wrapper ng-class="{\'thing-active\': thingActive}"> <div class="selected-answers-container clearfix" ng-show="ratingsQuestion.ratedThings.length > 0 && !thingActive"> <div class=selected-answers-box> <div class="btn selected-label">{[{ ::labels.you_have_selected }]}</div> <div class="btn common" ng-class="{suggestion : thing.suggestion}" ng-repeat="thing in ratingsQuestion.ratedThings track by $index" ng-click=selectThing(thing)> <span class=thing-name>{[{ ::thing.thing_name }]}</span> <span class="thing-like svgi {[{ thing.rated_class }]}"></span> </div> </div> </div> <div class=search-box> <div class=input-wrapper> <div class=input-append> <div things-search></div> <span ng-hide="thingSearchConfig.thingSearch.thingName !== \'\'" class=icon-search-dark></span> <button ng-hide="thingSearchConfig.loading.activate || thingSearchConfig.thingSearch.thingName === \'\'" ng-click=clear() class="btn btn-link svgi icon-x-close ng-cloak"></button> <opi-spinner ng-show=thingSearchConfig.loading.activate ng-class="{\'stop-animate\': !thingSearchConfig.loading.activate}"></opi-spinner> </div> <div class=no-results ng-show=displayNoResultsBox>{[{ ::labels.no_matches }]}</div> </div> </div> <div ng-if=thingActive class=rating-text><span>{[{ ratingText }]}</span></div> </div> <div ng-if="ratingsQuestion && !displayNoResultsBox" ratings survey-uuid="{[{ ::surveyUuid }]}" rating-widget-data=::ratingsQuestion.things> <div class=ratings-mask ng-click=exitSearch()></div> </div> </div> ';
},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(400),o=n(a),r=t(411),l=n(r),u=t(414),c=n(u),d=s["default"].module("listBuilder",[o["default"],l["default"]]).component("ygListBuilder",c["default"]);exports["default"]=d.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(401),o=n(a),r=t(404),l=n(r),u=t(409),c=n(u),d=s["default"].module("listBuilderDesktop",[o["default"],l["default"]]).component("ygListBuilderDesktop",c["default"]);exports["default"]=d.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(402),o=n(a),r=s["default"].module("selectedAnswers",[]).component("ygSelectedAnswers",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(403),o=n(a),r=function u(e){"ngInject";(0,s["default"])(this,u),this.labels=e.labels};r.$inject=["applicationData"];var l={bindings:{selectedAnswers:"<",unselect:"&"},controller:r,template:o["default"]};exports["default"]=l},function(e,exports){e.exports='<div class=selected-answers-container ng-if="$ctrl.selectedAnswers.length > 0"> <div class=selected-answers-box> <div class="btn selected-label">{[{ ::$ctrl.labels.you_have_selected }]}</div> <div ng-repeat="answer in $ctrl.selectedAnswers track by $id(answer)" class="btn common selected-thing"> {[{ ::answer.thing_name }]} <span class=remove-answer ng-click=$ctrl.unselect({answer})>&#215;</span> </div> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(405),o=n(a),r=t(407),l=n(r),u=s["default"].module("searchEntities",[]).directive("disableParentScroll",o["default"]).component("ygSearchEntities",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),t(103),t(406);var n=function(){"ngInject";function e(e,t){t.on("mousewheel",function(e){var n=t.scrollTop(),i=t.get(0).scrollHeight-n+e.deltaY,s=e.deltaY>0&&n-e.deltaY<=0,a=e.deltaY<0&&i<=t.height();s?(t.scrollTop(0),e.preventDefault(),e.stopPropagation()):a&&(t.scrollTop(t.get(0).scrollHeight-t.height()),e.preventDefault(),e.stopPropagation())})}var t={link:e,restrict:"A",scope:{}};return t};exports["default"]=n},,function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(103),l=n(r),u=t(408),c=n(u),d=function(){function e(t,n,i,a){"ngInject";(0,s["default"])(this,e),this.appContextSrv=n,this.labels=i.labels,this.generalLabels=i.i18n.general,this.Lightbox=a,this.$timeout=t}return e.$inject=["$timeout","appContextSrv","applicationData","Lightbox"],(0,o["default"])(e,[{key:"$onInit",value:function(){this.search={term:""},this.minChars=Number(this.minChars)}},{key:"clearFocusedSearchInput",value:function(){this.resetSearch(),this.clearResults()}},{key:"onFocus",value:function(){this.appContextSrv.device.isMobile?(this.activatedSearch=!0,this.clearFocusedSearchInput(),(0,l["default"])(".off-canvas-wrapper").css({height:"100%",overflow:"hidden",width:"100%",position:"fixed"})):this.displayResults&&this.onInputChange(this.search.term)}},{key:"resetSearch",value:function(){this.search.term="",this.displayResults||this.onInputChange(this.search.term)}},{key:"clearResults",value:function(){this.things=[]}},{key:"onBlur",value:function(){var e=this;!this.appContextSrv.device.isMobile&&this.displayResults&&(this.getSuggestionsResource&&(this.getSuggestionsResource.$cancelRequest(),this.getSuggestionsResource=null),this.$timeout(function(){e.resetSearch(),e.clearResults(),e.infoMessage=""},200))}},{key:"deactivateSerchInput",value:function(){this.appContextSrv.device.isMobile&&((0,l["default"])(".off-canvas-wrapper").removeAttr("style"),this.activatedSearch=!1)}},{key:"toggleThing",value:function(e){this.toggleSuggestion({suggestion:e}),e.selected=!e.selected,this.clearResults(),this.resetSearch(),this.deactivateSerchInput()}},{key:"suggestThing",value:function(){var e=this;this.resetSearch(),this.Lightbox.loadDirective('<opi-suggestions\n             on-cancel="cancel()"\n             box-container="boxContainer"\n             on-finish="addSuggestion(entityData)"\n             suggestion-metadata="suggestionMetadata"\n             get-types="getTypes"\n             ></opi-suggestions>',{getTypes:this.getTypes,suggestionMetadata:this.getSurveyMetadata,addSuggestion:function(t){e.toggleSuggestion({suggestion:{thing_uuid:t.uuid,thing_name:t.name}}),this.cancel()}},"suggestions-popup")}},{key:"onEnterKeyUp",value:function(e){13===e.keyCode&&this.onEnter&&this.onEnter({term:this.search.term})}},{key:"onInputChange",value:function(e){var t=this;if(this.displayResults){if(e.length<this.minChars)return this.infoMessage=this.labels.please_enter_more_chars,void this.clearResults();this.infoMessage="",this.isLoading=!0,this.getSuggestionsResource&&this.getSuggestionsResource.$cancelRequest(),this.getSuggestionsResource=this.getSuggestions({term:e,page:1}),this.getSuggestionsResource.$promise.then(function(e){0===e.length&&(t.infoMessage=t.labels.no_matches_found),t.isLoading=!1,t.things=e.map(function(e){var n=t.selectedAnswers.find(function(t){return t.thing_uuid===e.thing_uuid});return n&&(e.selected=!0),e}),t.getSuggestionsResource=null})["catch"](function(){t.isLoading=!1,t.getSuggestionsResource=null})}else this.updateSuggestions({term:e,page:1})}}]),e}(),p={bindings:{placeholderLabel:"@",displayResults:"@?",minChars:"@?",displaySuggestNew:"@",selectedAnswers:"<",toggleSuggestion:"&",getSuggestions:"&?",onEnter:"&?",updateSuggestions:"&?",getTypes:"&?",getSurveyMetadata:"&?"},controller:d,template:c["default"]};exports["default"]=p},function(e,exports){e.exports='<div class=search-entities-container ng-class="{\'focused\': $ctrl.activatedSearch}"> <label class="available-things-limit-reached ng-hide" ng-show=$ctrl.limitReached> {[{ ::question.limitMessage }]} </label> <input type=text class=available-things-filter placeholder="{[{ ::$ctrl.placeholderLabel }]}" ng-model=$ctrl.search.term ng-disabled=$ctrl.limitReached ng-focus=$ctrl.onFocus() ng-blur=$ctrl.onBlur() ng-change=$ctrl.onInputChange($ctrl.search.term) ng-trim=true ng-model-options="{ debounce: 300 }" ng-keyup=$ctrl.onEnterKeyUp($event)> <div class=input-buttons> <button type=button ng-if="$ctrl.displaySuggestNew && !$ctrl.isLoading" ng-show="$ctrl.search.term.length > 0" class="suggest-new hidden-xs" ng-click=$ctrl.suggestThing()> <i class=icon-small-plus></i> <span class=ng-binding>{[{ ::$ctrl.labels.suggest_new }]}</span> </button> <button type=button class=input-clear aria-label="{[{ ::$ctrl.labels.clear_text_field }]}" ng-hide=$ctrl.isLoading ng-click=$ctrl.clearFocusedSearchInput()> <span class=icon-container> <span class="svgi icon-x"></span> </span> </button> <button type=button class=input-cancel ng-hide=$ctrl.isLoading ng-click=$ctrl.deactivateSerchInput()>{[{ ::$ctrl.generalLabels.cancel }]}</button> <opi-spinner ng-show=$ctrl.isLoading ng-class="{\'stop-animate\': !$ctrl.isLoading}"></opi-spinner> </div> </div> <div ng-if=::$ctrl.displayResults class=things-list-container> <ul class=search-results disable-parent-scroll> <li ng-repeat="thing in $ctrl.things" ng-click=$ctrl.toggleThing(thing) class=search-result ng-class="{\'selected\': thing.selected, \'active\': thing.active}"> <div class=thing-thumbnail ng-if=::thing.thumbnail> <span class="node-type-icon-white {[{ ::thing.thing_class }]}"></span> <div class=thing-bg ng-style="{\'background-image\': \'url(\' + thing.thumbnail + \')\'}"></div> </div> <div class=search-result-info> {[{ ::thing.thing_name }]} </div> <span class="svgi icon-tick"></span> </li> <li ng-if="$ctrl.infoMessage && !$ctrl.appContextSrv.device.isMobile" class=search-info-message> {[{ $ctrl.infoMessage }]} </li> </ul> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(371),s=n(i),a=t(22),o=n(a),r=t(155),l=n(r),u=t(4),c=n(u),d=t(175),p=n(d),g=t(176),f=n(g),v=t(131),h=n(v),m=t(410),b=n(m),y=function(){function e(t){"ngInject";(0,p["default"])(this,e),this.searchParams={term:"",page:1},this.labels=t.labels,this.maxSuggestions=8}return e.$inject=["applicationData"],(0,f["default"])(e,[{key:"$onInit",value:function(){this.suggestedThings=h["default"].copy(this.suggestedThingsData),this.setSuggestions(),this.suggestedThings.length===this.maxSuggestions&&this.addMoreSuggestion(),this.selectedAnswers=this.selectedAnswersData?h["default"].copy(this.selectedAnswersData):[],this.selectedAnswers.length>0&&(this.markAsSelected(),this.onSelect({selectedAnswers:this.selectedAnswers})),this.isMultiSelect=1===Number(this.multiSelect)}},{key:"setSuggestions",value:function(){var e=this;this.suggestions=(0,c["default"])(Array,null,Array(9)).map(function(){return{placeholder:!0}}).map(function(t,n){return n<e.maxSuggestions&&e.suggestedThings[n]&&(t=(0,l["default"])({},e.suggestedThings[n])),t})}},{key:"addMoreSuggestion",value:function(){this.suggestions.splice(-1,1,{moreSuggestions:!0,thing_name:""})}},{key:"markAsSelected",value:function(){var e=this,t=!0,n=!1,i=void 0;try{for(var s,a=function(){var t=s.value,n=e.suggestions.find(function(e){return t.thing_uuid===e.thing_uuid});n&&(n.selected=!0)},r=(0,o["default"])(this.selectedAnswers);!(t=(s=r.next()).done);t=!0)a()}catch(l){n=!0,i=l}finally{try{!t&&r["return"]&&r["return"]()}finally{if(n)throw i}}}},{key:"selectPerfectMatch",value:function(e){var t=this.suggestions.find(function(t){return t.thing_name.toLowerCase()===e.toLowerCase()});t&&this.toggleSuggestion(t)}},{key:"toggleSuggestion",value:function(e){this.isMultiSelect||this.resetSelectedSuggestions(e);var t=this.selectedAnswers.findIndex(function(t){return t.thing_uuid===e.thing_uuid});this.limitMessage="",t!==-1?(this.unselectSuggestion(e),this.removeSelectedAnswer(e)):this.maxAnswers&&this.selectedAnswers.length>=this.maxAnswers?this.limitMessage=this.labels.list_builder_limit_reached_message.replace("%limit%",this.maxAnswers):(this.selectSuggestion(e),this.updateSelectedAnswers(e)),this.onSelect({selectedAnswers:this.selectedAnswers})}},{key:"selectSuggestion",value:function(e){var t=this.suggestions.find(function(t){return t.thing_uuid===e.thing_uuid});t&&(t.selected=!0,this.prevSuggestion=t)}},{key:"unselectSuggestion",value:function(e){var t=this.suggestions.find(function(t){return t.thing_uuid===e.thing_uuid});t&&(t.selected=!1)}},{key:"updateSelectedAnswers",value:function(e){if(this.isMultiSelect){var t=this.selectedAnswers.find(function(t){return t.thing_uuid===e.thing_uuid});t||(this.selectedAnswers=[].concat((0,s["default"])(this.selectedAnswers),[e]))}else this.selectedAnswers=[e]}},{key:"removeSelectedAnswer",value:function(e){this.selectedAnswers=this.selectedAnswers.filter(function(t){return t.thing_uuid!==e.thing_uuid})}},{key:"resetSelectedSuggestions",value:function(e){this.suggestions.filter(function(t){return t.thing_uuid!==e.thing_uuid}).map(function(e){return e.selected=!1,e})}},{key:"nextPage",value:function(){this.searchParams.page+=1,this.updateSuggestions(this.searchParams)}},{key:"updateSuggestions",value:function(e){var t=this;this.searchParams=e,this.isLoading=!0,this.suggestions=[],this.getSuggestionRequest&&this.getSuggestionRequest.$cancelRequest(),this.getSuggestionRequest=this.getSuggestions(e),this.getSuggestionRequest.$promise.then(function(e){t.suggestedThings=[].concat(e),t.setSuggestions(),(""===t.searchParams.term||""!==t.searchParams.term&&t.suggestedThings.length===t.maxSuggestions)&&t.addMoreSuggestion(),t.selectedAnswers&&t.markAsSelected(),e.length<t.maxSuggestions&&(t.searchParams.page=0),t.isLoading=!1,t.getSuggestionRequest=null})["catch"](function(){t.isLoading=!1})}},{key:"skipQuestion",value:function(e){e.preventDefault(),this.resetSelectedSuggestions({}),this.selectedAnswers=[],this.onSelect({answerOption:h["default"].copy(this.answerOptions)})}}]),e}(),_={bindings:{placeholderLabel:"@",multiSelect:"@?",listOptionSource:"@",maxAnswers:"<?",answerOptions:"<",suggestedThingsData:"<",selectedAnswersData:"<",onSelect:"&",getSuggestions:"&",getTypes:"&",getSurveyMetadata:"&"},controller:y,template:b["default"]};exports["default"]=_},function(e,exports){e.exports='<yg-selected-answers selected-answers=$ctrl.selectedAnswers unselect=$ctrl.toggleSuggestion(answer)></yg-selected-answers> <p ng-if=$ctrl.limitMessage class=limit-message>{[{ ::$ctrl.limitMessage }]}</p> <yg-search-entities ng-hide=$ctrl.limitMessage placeholder-label="{[{ ::$ctrl.placeholderLabel }]}" display-suggest-new="{[{ $ctrl.listOptionSource === \'entities\' ? true : \'\' }]}" update-suggestions="$ctrl.updateSuggestions({term, page})" get-types=$ctrl.getTypes() get-survey-metadata=$ctrl.getSurveyMetadata() toggle-suggestion=$ctrl.toggleSuggestion(suggestion) on-enter=$ctrl.selectPerfectMatch(term)></yg-search-entities> <div class=suggested-things ng-class="{\'limit-reached\': $ctrl.limitReached}"> <div ng-repeat="suggestion in $ctrl.suggestions track by $id(suggestion)" class=suggested-thing ng-class="{selected: suggestion.selected}"> <div ng-if=::suggestion.id class=thing-thumbnail ng-click=$ctrl.toggleSuggestion(suggestion)> <div class="node-type-icon-white {[{ ::suggestion.thing_type_class }]}"></div> <div class=frame></div> <div ng-if=::suggestion.thumbnail class=thing-image ng-style="{\'background-image\': \'url(\' + suggestion.thumbnail + \')\'}"></div> <div class=thing-name> <span>{[{ ::suggestion.thing_name }]}</span> </div> </div> <div ng-if=::suggestion.placeholder class=thumbnail-placeholder></div> <div ng-if=::suggestion.moreSuggestions class=more-suggestions ng-click=$ctrl.nextPage()> <div class=frame></div> <div class="svgi icon-refresh-green"></div> <div class=more-suggestions-label>{[{ ::$ctrl.labels.more_suggestions }]}</div> </div> </div> <opi-spinner ng-show=$ctrl.isLoading ng-class="{\'stop-animate\': !$ctrl.isLoading}"></opi-spinner> </div> <a href=# ng-if="::$ctrl.answerOptions.length > 0" class=non-of-the-above ng-click=$ctrl.skipQuestion($event)> {[{ ::$ctrl.labels.not_applicable }]} <span class=non-of-the-above-arrow></span> </a> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(401),o=n(a),r=t(412),l=n(r),u=s["default"].module("listBuilderMobile",[o["default"]]).component("ygListBuilderMobile",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(22),s=n(i),a=t(175),o=n(a),r=t(176),l=n(r),u=t(131),c=n(u),d=t(413),p=n(d),g=function(){function e(t){"ngInject";(0,o["default"])(this,e),this.mobileThingsCount=9,this.slides=[],this.currentSlideIndex=1,this.searchParams={term:"",page:1},this.labels=t.labels}return e.$inject=["applicationData"],(0,l["default"])(e,[{key:"$onInit",value:function(){this.suggestedThings=c["default"].copy(this.suggestedThingsData),this.createSlides(this.suggestedThings,this.slides),this.selectedAnswers=this.selectedAnswersData?c["default"].copy(this.selectedAnswersData):[],this.isMultiSelect=1===Number(this.multiSelect),this.selectedAnswers.length>0&&(this.onSelect({selectedAnswers:this.selectedAnswers}),this.markAsSelected())}},{key:"markAsSelected",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,a=(0,s["default"])(this.selectedAnswers);!(e=(i=a.next()).done);e=!0){var o=i.value,r=this.findThingByUUIDInSlides(o.thing_uuid,this.slides);r&&(r.selected=!0)}}catch(l){t=!0,n=l}finally{try{!e&&a["return"]&&a["return"]()}finally{if(t)throw n}}}},{key:"getEmptySlide",value:function(){for(var e=[],t=0;t<this.mobileThingsCount;t++)e.push({id:e.length,thing_type_class:this.suggestedThings[0].thing_type_class,thing_type:this.suggestedThings[0].thing_type});return{index:-1,data:e}}},{key:"findThingByUUIDInSlides",value:function(e,t){for(var n=0,i=t.length;n<i;n++)for(var s=0,a=t[n].data.length;s<a;s++)if(t[n].data[s].thing_uuid===e)return t[n].data[s]}},{key:"hasEmptySlide",value:function(){var e=this.slides.filter(function(e){return e.index===-1});return e.length>0}},{key:"createSlides",value:function(e,t){return t=this.addToSlides(e,t),e.length>=this.mobileThingsCount&&!this.hasEmptySlide()&&t.push(this.getEmptySlide()),this.slideChanged(this.currentSlideIndex),t}},{key:"addToSlides",value:function(e,t){return t.splice(-1,0,{index:t.length,data:e}),t}},{key:"removeEmptySlide",value:function(e){this.hasEmptySlide()&&(e.pop(),this.slides=e)}},{key:"slideChanged",value:function(e){e>=this.currentSlideIndex&&this.hasEmptySlide()&&(e===this.slides.length-2||e===this.slides.length-1)&&this.nextPage(),this.currentSlideIndex=e}},{key:"nextPage",value:function(){this.searchParams.page+=1,this.loadSuggestions(this.searchParams)}},{key:"loadSuggestions",value:function(e){var t=this;this.searchParams=e,this.getSuggestionRequest=this.getSuggestions(e),this.getSuggestionRequest.$promise.then(function(e){0===e.length?t.removeEmptySlide(t.slides):t.addToSlides(e,t.slides)})}},{key:"resetSelectedSuggestions",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,a=(0,s["default"])(this.selectedAnswers);!(e=(i=a.next()).done);e=!0){var o=i.value,r=this.findThingByUUIDInSlides(o.thing_uuid,this.slides);r&&(r.selected=!1)}}catch(l){t=!0,n=l}finally{try{!e&&a["return"]&&a["return"]()}finally{if(t)throw n}}}},{key:"toggleSuggestion",value:function(e){this.isMultiSelect||this.resetSelectedSuggestions(e),this.limitMessage="";var t=this.selectedAnswers.findIndex(function(t){return t.thing_uuid===e.thing_uuid});t!==-1?(this.unselectSuggestionInSlides(e),this.removeSelectedAnswer(e)):this.maxAnswers&&this.selectedAnswers.length>=this.maxAnswers?this.limitMessage=this.labels.list_builder_limit_reached_mobile_message.replace("%limit%",this.maxAnswers):(this.selectSuggestionInSlides(e),this.updateSelectedAnswers(e)),this.onSelect({selectedAnswers:this.selectedAnswers})}},{key:"selectSuggestionInSlides",value:function(e){var t=this.findThingByUUIDInSlides(e.thing_uuid,this.slides);t&&(t.selected=!0)}},{key:"unselectSuggestionInSlides",value:function(e){var t=this.findThingByUUIDInSlides(e.thing_uuid,this.slides);t&&(t.selected=!1)}},{key:"updateSelectedAnswers",value:function(e){if(this.isMultiSelect){var t=this.selectedAnswers.find(function(t){return t.thing_uuid===e.thing_uuid});t||this.selectedAnswers.push(e)}else this.selectedAnswers=[e]}},{key:"removeSelectedAnswer",value:function(e){var t=this.selectedAnswers.findIndex(function(t){return t.thing_uuid===e.thing_uuid});t!==-1&&this.selectedAnswers.splice(t,1)}},{key:"skipQuestion",value:function(e){e.preventDefault(),this.selectedAnswers=c["default"].copy(this.answerOptions),this.onSelect({answerOption:this.selectedAnswers})}}]),e}(),f={bindings:{placeholderLabel:"@",multiSelect:"@?",listOptionSource:"@",maxAnswers:"<?",answerOptions:"<",suggestedThingsData:"<",selectedAnswersData:"<",onSelect:"&",getSuggestions:"&"},controller:g,template:p["default"]};exports["default"]=f},function(e,exports){e.exports='<div class=available-things-filter> <p ng-if=$ctrl.limitMessage class=limit-message>{[{ ::$ctrl.limitMessage }]}</p> <yg-search-entities ng-hide=$ctrl.limitMessage placeholder-label="{[{ ::$ctrl.placeholderLabel }]}" display-suggest-new="{[{ $ctrl.listOptionSource === \'entities\' ? true : \'\' }]}" display-results=true selected-answers=$ctrl.selectedAnswers get-suggestions="$ctrl.getSuggestions({term, page})" toggle-suggestion=$ctrl.toggleSuggestion(suggestion)></yg-search-entities> <div class="suggested-things clearfix" ng-class="{\'limit-reached\': $ctrl.limitReached}"> <slide-box ng-if="$ctrl.slides.length > 0" class=swiper-container on-slide-change-start=$ctrl.slideChanged(slideIndex)> <div ng-repeat="slide in $ctrl.slides track by $id(slide)" class="slide swiper-slide"> <div ng-repeat="thing in slide.data track by $id(thing)" class=suggested-thing ng-class="{selected: thing.selected && thing.thing_uuid}"> <div ng-click=$ctrl.toggleSuggestion(thing) class=thing-thumbnail> <div class=frame></div> <div class="node-type-icon-white {[{ ::thing.thing_type_class }]}"></div> <div ng-if=thing.thumbnail class=thing-image ng-style="{\'background-image\': \'url(\' + thing.thumbnail + \')\'}"></div> <div class=thing-name> <span>{[{ ::thing.thing_name }]}</span> </div> </div> </div> </div> </slide-box> </div> </div> <a href=# ng-if="::$ctrl.answerOptions.length > 0" class=non-of-the-above ng-click=$ctrl.skipQuestion($event)> {[{ ::$ctrl.labels.not_applicable }]} </a> <yg-selected-answers selected-answers=$ctrl.selectedAnswers unselect=$ctrl.toggleSuggestion(answer)></yg-selected-answers> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(415),l=n(r),u=function(){function e(t){"ngInject";(0,s["default"])(this,e),this.appContextSrv=t}return e.$inject=["appContextSrv"],(0,o["default"])(e,[{key:"$onInit",value:function(){this.selectedAnswers=this.selectedAnswers||[],this.onAnswerValidityChange({validity:this.selectedAnswers.length>0})}},{key:"onSelect",value:function(e){e.selectedAnswers?(this.onSelectAnswer({answer:{list_choices:[].concat(e.selectedAnswers)}}),this.onAnswerValidityChange({validity:e.selectedAnswers.length>0})):e.answerOption&&(this.onSelectAnswer({answer:{simple_choices:[].concat(e.answerOption)}}),this.getNextQuestion())}}]),e}(),c={bindings:{multiSelect:"@",listOptionSource:"@",options:"<",answerOptions:"<",selectedAnswers:"<",suggestedThings:"<",maxAnswers:"<",onSelectAnswer:"&",getSuggestions:"&",getNextQuestion:"&?",getTypes:"&",getSurveyMetadata:"&",onAnswerValidityChange:"&"},controller:u,template:l["default"]};exports["default"]=c},function(e,exports){e.exports='<yg-list-builder-desktop ng-if=!$ctrl.appContextSrv.device.isMobile placeholder-label="{[{ ::$ctrl.options.placeholder }]}" multi-select="{[{ ::$ctrl.multiSelect }]}" answer-options=$ctrl.answerOptions list-option-source="{[{ ::$ctrl.listOptionSource }]}" max-answers=$ctrl.maxAnswers suggested-things-data=$ctrl.suggestedThings selected-answers-data=$ctrl.selectedAnswers get-suggestions="$ctrl.getSuggestions({term, page})" get-types=$ctrl.getTypes() get-survey-metadata=$ctrl.getSurveyMetadata() on-select="$ctrl.onSelect({selectedAnswers, answerOption})"></yg-list-builder-desktop> <yg-list-builder-mobile ng-if=$ctrl.appContextSrv.device.isMobile placeholder-label="{[{ ::$ctrl.options.placeholder }]}" multi-select="{[{ ::$ctrl.multiSelect }]}" answer-options=$ctrl.answerOptions list-option-source="{[{ ::$ctrl.listOptionSource }]}" max-answers=$ctrl.maxAnswers suggested-things-data=$ctrl.suggestedThings selected-answers-data=$ctrl.selectedAnswers get-suggestions="$ctrl.getSuggestions({term, page})" get-types=$ctrl.getTypes() get-survey-metadata=$ctrl.getSurveyMetadata() on-select="$ctrl.onSelect({selectedAnswers, answerOption})"></yg-list-builder-mobile> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(417),o=n(a),r=t(418),l=n(r),u=t(153),c=n(u),d=s["default"].module("multiSelect",[o["default"],c["default"]]).component("ygMultiSelect",l["default"]);exports["default"]=d.name},,function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(371),o=n(a),r=t(175),l=n(r),u=t(176),c=n(u),d=t(419),p=n(d),g=t(433),f=n(g),v=new p["default"],h=function(){function e(t){"ngInject";(0,l["default"])(this,e),v.set(this,{applicationData:t}),this.answersModel=[],this.textChoiceValid=!0,this.openTextAnswer=null,this.labels=t.i18n.surveys}return e.$inject=["applicationData"],(0,c["default"])(e,[{key:"$onInit",value:function(){var e=this;this.selectedAnswers?(this.answersModel=this.answerOptions.filter(function(t){return e.getSelectedAnswerByKey(t.answer_option_uuid)>-1}),this.textChoice=this.selectedAnswers.filter(function(e){return e.text_choice}).map(function(e){return e.text_choice}),this.showResults=this.hasResults(this.answerOptions),this.onChange()):this.selectedAnswers=[],this.onAnswerValidityChange({validity:this.selectedAnswers.length>0})}},{key:"getSelectedAnswerByKey",value:function(e){return this.selectedAnswers.findIndex(function(t){return t.answer_option_uuid===e})}},{key:"hasResults",value:function(e){return e.reduce(function(e,t){return e+t.result},0)>0}},{key:"isAnswerOptionChecked",value:function(e){return void 0!==this.answersModel.find(function(t){return t===e})}},{key:"updateAnswersModel",value:function(e){var t=this.answersModel.find(function(t){return t===e});this.answersModel=this.answersModel.filter(function(e){return e.exclusive===!1}),e.exclusive&&(this.answersModel=[]),t?this.answersModel=this.answersModel.filter(function(e){return t!==e}):this.answersModel=[].concat((0,o["default"])(this.answersModel),[e])}},{key:"updateOpenTextValidity",value:function(e){var t=e.validity;this.textChoiceValid=t,this.onAnswerValidityChange({validity:this.answersModel.length>0&&this.textChoiceValid})}},{key:"updateOpenText",value:function(e){var t=e.answer;this.openTextAnswer=t,this.onSelectAnswer({answer:(0,s["default"])({},{simple_choices:[].concat(this.answersModel)},t)})}},{key:"onChange",value:function(e,t){e&&(this.updateAnswersModel(e),e.question_ref&&!t&&(this.openTextAnswer=null,this.updateOpenTextValidity({validity:!0})));var n=(0,s["default"])({},{simple_choices:[].concat(this.answersModel)});this.openTextAnswer&&(n=(0,s["default"])({},n,this.openTextAnswer)),this.onSelectAnswer({answer:n}),this.showResults||(this.showResults=this.hasResults(this.answerOptions)),this.onAnswerValidityChange({validity:this.answersModel.length>0&&this.textChoiceValid})}}]),e}(),m={bindings:{answerOptions:"<",selectedAnswers:"<?",resultLabel:"@?",onSelectAnswer:"&",onAnswerValidityChange:"&"},controller:h,template:f["default"]};exports["default"]=m},,,,,,,,,,,,,,,function(e,exports){e.exports='<div ng-repeat="answerOption in ::$ctrl.answerOptions" class=answer-option ng-class="{\'answer-options-results\': $ctrl.showResults }"> <label> <input type=checkbox checklist-model=$ctrl.answersModel checklist-value=answerOption ng-change="$ctrl.onChange(answerOption, checked)"> <span class=answer-option-tick></span> <span class=answer-option-label> {[{ ::answerOption.label }]} </span> <yg-open-question ng-if="answerOption.question_ref && $ctrl.isAnswerOptionChecked(answerOption)" options="{placeholder: $ctrl.labels.answers.opneText.placeholder || \'Please specify\'}" answer-option-uuid=answerOption.answer_option_uuid question=answerOption.question_ref selected-answers=$ctrl.textChoice on-select-answer=$ctrl.updateOpenText({answer}) on-answer-validity-change=$ctrl.updateOpenTextValidity({validity})></yg-open-question> <span class=answer-option-percentage>{[{ ::answerOption.result }]}%</span> </label> <span class=answer-option-bar-container> <span class=answer-option-bar ng-style="{width: answerOption.result + \'px\'}"></span> </span> </div> <div ng-if="$ctrl.showResults && $ctrl.resultLabel" class=legend-box>{[{ ::$ctrl.resultLabel }]}</div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(401),o=n(a),r=t(435),l=n(r),u=s["default"].module("textonlyListBuilder",[o["default"]]).component("ygTextonlyListBuilder",l["default"]);exports["default"]=u.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(436),l=n(r),u=t(537),c=n(u),d=function(){function e(t){"ngInject";(0,s["default"])(this,e),this.searchParams={term:"",page:1},this.labels=t.labels,this.maxSuggestions=8}return e.$inject=["applicationData"],(0,o["default"])(e,[{key:"$onInit",value:function(){this.selectedAnswers=this.selectedAnswersData?(0,l["default"])(this.selectedAnswersData):[],this.multiSelect=Number(this.multiSelect)||0,this.selectedAnswers.length>0&&this.onSelect({selectedAnswers:this.selectedAnswers}),this.onAnswerValidityChange({validity:this.selectedAnswers.length>0})}},{key:"toggleSuggestion",value:function(e){this.multiSelect||this.resetSelectedSuggestions(e),this.limitMessage="";var t=this.selectedAnswers.findIndex(function(t){return t.thing_uuid===e.thing_uuid});t!==-1?this.removeSelectedAnswer(e):this.maxAnswers&&this.selectedAnswers.length>=this.maxAnswers?this.limitMessage=this.labels.list_builder_limit_reached_message.replace("%limit%",this.maxAnswers):this.updateSelectedAnswers(e),this.onSelect({selectedAnswers:this.selectedAnswers})}},{key:"updateSelectedAnswers",value:function(e){if(this.multiSelect){var t=this.selectedAnswers.find(function(t){return t.thing_uuid===e.thing_uuid});t||this.selectedAnswers.push(e)}else this.selectedAnswers=[e]}},{key:"removeSelectedAnswer",value:function(e){var t=this.selectedAnswers.findIndex(function(t){return t.thing_uuid===e.thing_uuid});t!==-1&&this.selectedAnswers.splice(t,1)}},{key:"resetSelectedSuggestions",value:function(){this.selectedAnswers=[]}},{key:"onSelect",value:function(e){e.selectedAnswers?(this.onSelectAnswer({answer:{list_choices:[].concat(e.selectedAnswers)}}),this.onAnswerValidityChange({validity:e.selectedAnswers.length>0})):e.answerOption&&(this.onSelectAnswer({answer:{simple_choices:[].concat(e.answerOption)}}),this.getNextQuestion())}},{key:"skipQuestion",value:function(e){e.preventDefault(),this.resetSelectedSuggestions(),this.onSelect({answerOption:(0,l["default"])(this.answerOptions)})}}]),e}(),p={bindings:{listOptionSource:"@",multiSelect:"@",maxAnswers:"<?",options:"<",answerOptions:"<",selectedAnswersData:"<",onSelectAnswer:"&",getSuggestions:"&",getTypes:"&",getSurveyMetadata:"&",getNextQuestion:"&",onAnswerValidityChange:"&"},controller:d,template:c["default"]};exports["default"]=p},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,exports){e.exports='<yg-selected-answers selected-answers=$ctrl.selectedAnswers unselect=$ctrl.toggleSuggestion(answer)></yg-selected-answers> <p ng-if=$ctrl.limitMessage class=limit-message>{[{ ::$ctrl.limitMessage }]}</p> <yg-search-entities ng-hide=$ctrl.limitMessage ng-class="::{\'multi-select\': $ctrl.multiSelect}" placeholder-label="{[{ $ctrl.options.placeholder || $ctrl.labels.text_only_list_builder_search_placeholder }]}" display-results=true min-chars="{[{ ($ctrl.options.preload) ? 0 : 1 }]}" display-suggest-new="{[{ $ctrl.listOptionSource === \'entities\' ? true : \'\' }]}" selected-answers=$ctrl.selectedAnswers get-types=$ctrl.getTypes() get-survey-metadata=$ctrl.getSurveyMetadata() get-suggestions="$ctrl.getSuggestions({term, page})" toggle-suggestion=$ctrl.toggleSuggestion(suggestion)></yg-search-entities> <a href=# ng-if="::$ctrl.answerOptions.length > 0" class=non-of-the-above ng-click=$ctrl.skipQuestion($event)> {[{ ::$ctrl.labels.not_applicable }]} <span class="non-of-the-above-arrow hidden-xs"></span> </a> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(539),o=n(a),r=t(153),l=n(r),u=t(541),c=n(u),d=s["default"].module("openQuestion",[o["default"],l["default"]]).component("ygOpenQuestion",c["default"]);
exports["default"]=d.name},,,function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(419),l=n(r),u=t(542),c=n(u),d=new l["default"],p=function(){function e(t,n){"ngInject";(0,s["default"])(this,e),d.set(this,{applicationData:t,configService:n}),this.labels=t.i18n.surveys}return e.$inject=["applicationData","configService"],(0,o["default"])(e,[{key:"$onInit",value:function(){var e=d.get(this),t=e.configService;this.options=this.options||{placeholder:""},this.answerModel="",this.validators={"open-text":/.*/,"open-int":/^\d+$/,"open-post-code":t.postCodeRegex||/.*/},this.formatters={"open-text":function(e){return e.toString()},"open-int":function(e){return e.toString()},"open-post-code":t.postCodeFormatter||function(e){return e}},this.selectedAnswers&&this.selectedAnswers.length>0?(this.answerModel="open-int"===this.question.type?Number(this.selectedAnswers[0].value):this.selectedAnswers[0].value,this.onAnswerValidityChange({validity:!0})):this.onAnswerValidityChange({validity:!1})}},{key:"onChange",value:function(){var e=this,t=this.form.$valid;if(this.onAnswerValidityChange({validity:t}),t){var n=[{value:this.formatters[this.question.type](this.answerModel)}];this.answerOptionUuid&&n.map(function(t){return t.answer_option_uuid=e.answerOptionUuid,t}),this.onSelectAnswer({answer:{text_choice:n}})}}}]),e}(),g={bindings:{options:"<?",question:"<",answerOptionUuid:"<?",selectedAnswers:"<?",onSelectAnswer:"&",onAnswerValidityChange:"&"},controller:p,template:c["default"]};exports["default"]=g},function(e,exports){e.exports="<form name=$ctrl.form> <label> <span class=sr-only ng-bind-html=::$ctrl.options.placeholder></span> <input ng-if=\"$ctrl.question.type === 'open-int'\" name=answer type=number ng-pattern=$ctrl.validators[$ctrl.question.type] class=answer-input ng-model=$ctrl.answerModel ng-model-options=\"{updateOn: 'default blur', debounce: {'default': 500, 'blur': 0} }\" ng-change=$ctrl.onChange() placeholder=\"{[{ ::$ctrl.options.placeholder }]}\" ng-min=$ctrl.question.minimum ng-max=$ctrl.question.maximum required> <input ng-if=\"$ctrl.question.type !== 'open-int'\" name=answer type=text ng-pattern=$ctrl.validators[$ctrl.question.type] class=answer-input ng-model=$ctrl.answerModel ng-model-options=\"{updateOn: 'default blur', debounce: {'default': 500, 'blur': 0} }\" ng-change=$ctrl.onChange() placeholder=\"{[{ ::$ctrl.options.placeholder }]}\" ng-maxlength=$ctrl.question.max_length required> </label> <ng-messages ng-style=\"{visibility: $ctrl.form.$pristine ? 'hidden' : ''}\" for=$ctrl.form.answer.$error role=alert> <ng-message when=required> {[{ ::$ctrl.labels && $ctrl.labels.answers.validation.required || 'Answer required' }]} </ng-message> <ng-message when-exp=\"['min', 'max']\"> <span ng-if=\"$ctrl.question.minimum && $ctrl.question.maximum\"> {[{ 'Please enter a value between %s and %s.'| tplReplace:$ctrl.question.minimum:$ctrl.question.maximum }]} </span> <span ng-if=\"!$ctrl.question.minimum && $ctrl.question.maximum\"> {[{ 'Please enter a value less than or equal to %s.'| tplReplace:$ctrl.question.minimum }]} </span> <span ng-if=\"$ctrl.question.minimum && !$ctrl.question.maximum\"> {[{ 'Please enter a value greater than or equal to %s.'| tplReplace:$ctrl.question.minimum }]} </span> </ng-message> <ng-message when=maxlength> {[{ 'Please enter no more than %s characters.'| tplReplace:$ctrl.question.max_length }]} </ng-message> <ng-message ng-if=\"$ctrl.question.type === 'open-post-code'\" when=pattern> {[{ ::$ctrl.labels && $ctrl.labels.answers.validation.pattern.post_code || 'Incorrect post code' }]} </ng-message> <ng-message ng-if=\"$ctrl.question.type === 'open-int'\" when=pattern> {[{ ::$ctrl.labels && $ctrl.labels.answers.validation.pattern.int || 'Value is not a number' }]} </ng-message> <ng-message ng-if=\"$ctrl.question.type !== 'open-post-code'\" when=pattern> {[{ ::$ctrl.labels && $ctrl.labels.answers.validation.generic || 'Incorrect answer' }]} </ng-message> </ng-messages> </form> "},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(175),o=n(a),r=t(176),l=n(r),u=t(544),c=n(u),d=function(){function e(){"ngInject";(0,o["default"])(this,e)}return(0,l["default"])(e,[{key:"selectAnswer",value:function(e){var t=(0,s["default"])({},{questionUuid:this.question.uuid,questionUpdate:void 0!==this.question.selected_answers},e);this.onQuestionUpdate({question:t})}}]),e}(),p={bindings:{surveyUuid:"<",question:"<",onQuestionUpdate:"&",getSuggestions:"&",getNextQuestion:"&",getTypes:"&",getSurveyMetadata:"&",onAnswerValidityChange:"&"},controller:d,template:c["default"]};exports["default"]=p},function(e,exports){e.exports='<p class=question-label ng-bind-html=::$ctrl.question.label></p> <yg-single-select ng-if="$ctrl.question.type === \'single-select\'" answer-options=$ctrl.question.answer_options selected-answers=$ctrl.question.selected_answers result-label="{[{ $ctrl.question.result_label }]}" on-select-answer=$ctrl.selectAnswer(answer) on-answer-validity-change=$ctrl.onAnswerValidityChange({validity})></yg-single-select> <yg-multi-select ng-if="$ctrl.question.type === \'multi-select\'" answer-options=$ctrl.question.answer_options selected-answers=$ctrl.question.selected_answers result-label="{[{ $ctrl.question.result_label }]}"  on-select-answer=$ctrl.selectAnswer(answer) on-answer-validity-change=$ctrl.onAnswerValidityChange({validity})></yg-multi-select> <yg-list-builder ng-if="$ctrl.question.autocomplete && ($ctrl.question.type === \'list-builder\' || $ctrl.question.type === \'multi-list-builder\')" multi-select="{[{ $ctrl.question.type === \'multi-list-builder\' ? 1 : 0 }]}" options=$ctrl.question.autocomplete list-option-source="{[{ ::$ctrl.question.list_option_source }]}" answer-options=$ctrl.question.answer_options selected-answers=$ctrl.question.selected_answers suggested-things=$ctrl.question.suggested_things max-answers=$ctrl.question.limit on-select-answer=$ctrl.selectAnswer(answer) get-suggestions="$ctrl.getSuggestions({term, page})" get-next-question=$ctrl.getNextQuestion() get-types=$ctrl.getTypes() get-survey-metadata=$ctrl.getSurveyMetadata() on-answer-validity-change=$ctrl.onAnswerValidityChange({validity})></yg-list-builder> <yg-textonly-list-builder ng-if="$ctrl.question.textonly && ($ctrl.question.type === \'list-builder\' || $ctrl.question.type === \'multi-list-builder\')" multi-select="{[{ $ctrl.question.type === \'multi-list-builder\' ? 1 : 0 }]}" options=$ctrl.question.textonly list-option-source="{[{ ::$ctrl.question.list_option_source }]}" answer-options=$ctrl.question.answer_options selected-answers-data=$ctrl.question.selected_answers max-answers=$ctrl.question.limit on-select-answer=$ctrl.selectAnswer(answer) get-suggestions="$ctrl.getSuggestions({term, page})" get-next-question=$ctrl.getNextQuestion() get-types=$ctrl.getTypes() get-survey-metadata=$ctrl.getSurveyMetadata() on-answer-validity-change=$ctrl.onAnswerValidityChange({validity})></yg-textonly-list-builder> <yg-ratings-question ng-if="$ctrl.question.type === \'ratings\'" survey-uuid=$ctrl.surveyUuid question=$ctrl.question on-select-answer=$ctrl.selectAnswer(answer) on-answer-validity-change=$ctrl.onAnswerValidityChange({validity})></yg-ratings-question> <yg-open-question ng-if="$ctrl.question.type === \'open-text\' ||\n                         $ctrl.question.type === \'open-int\' ||\n                         $ctrl.question.type === \'open-post-code\'" options=$ctrl.question.options question=$ctrl.question selected-answers=$ctrl.question.selected_answers on-select-answer=$ctrl.selectAnswer(answer) on-answer-validity-change=$ctrl.onAnswerValidityChange({validity})></yg-open-question> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(175),o=n(a),r=t(176),l=n(r),u=t(546),c=n(u),d=function(){function e(){"ngInject";(0,o["default"])(this,e)}return(0,l["default"])(e,[{key:"$onInit",value:function(){this.onAnswerValidityChange||(this.onAnswerValidityChange=function(){})}},{key:"onQuestionUpdate",value:function(e){var t=(0,s["default"])({},{surveyUuid:this.surveyUuid},e);this.onSurveyUpdate({survey:t})}}]),e}(),p={bindings:{surveyUuid:"<",questions:"<",onSurveyUpdate:"&",getSuggestions:"&",getNextQuestion:"&",getTypes:"&",getSurveyMetadata:"&",onAnswerValidityChange:"&?"},controller:d,template:c["default"],transclude:{headerSlot:"ygSurveyHeader",actionBoxSlot:"ygSurveyActionBox"}};exports["default"]=p},function(e,exports){e.exports='<header ng-transclude=headerSlot></header> <div class=questions> <yg-question ng-repeat="question in $ctrl.questions" survey-uuid=$ctrl.surveyUuid question=question on-question-update=$ctrl.onQuestionUpdate(question) get-suggestions="$ctrl.getSuggestions({term, page})" get-next-question=$ctrl.getNextQuestion() get-types=$ctrl.getTypes() get-survey-metadata=$ctrl.getSurveyMetadata() on-answer-validity-change=$ctrl.onAnswerValidityChange({validity})></yg-question> </div> <div ng-transclude=actionBoxSlot></div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(175),o=n(a),r=t(131),l=n(r),u=t(137),c=n(u),d=function g(e,t){"ngInject";(0,o["default"])(this,g);var n=e("/opi/myfeed/survey/:surveyUuid/question/:questionUuid/answers/save?update=:questionUpdate",null,{save:{method:"POST",params:{surveyUuid:"@surveyUuid",questionUuid:"@questionUuid",questionUpdate:"@questionUpdate"},interceptor:t}},{cancellable:!0}),i=e("/opi/myfeed/survey/:surveyUuid/dismiss",null,{dismiss:{method:"POST",params:{surveyUuid:"@surveyUuid"},interceptor:t}},{cancellable:!0}),a=e("/opi/surveys/uuid/:surveyUuid/home/1",null,{query:{params:{surveyUuid:"@surveyUuid"},isArray:!0}}),r=e("/opi/surveys/:sequenceUuid/home/:slot",null,{query:{method:"POST",params:{sequenceUuid:"@sequenceUuid",slot:"@slot"},isArray:!0}}),l=e("/opi/myfeed/survey/:surveyUuid/question/:questionUuid/previous",null,{get:{interceptor:t}},{cancellable:!0}),u=e("/opi/myfeed/survey/:surveyUuid/question/:questionUuid/question_suggestions/page/:page/term/:term",null,{get:{method:"POST",interceptor:t,isArray:!0}},{cancellable:!0}),c=e("/opi/entity/filtered_types/survey/:surveyUuid/question/:questionUuid",null,{get:{method:"POST",interceptor:t,isArray:!0}},{cancellable:!0}),d=e("/opi/myfeed/get_widgets?view_name=surveys",null,{get:{method:"POST",isArray:!0}},{cancellable:!0});(0,s["default"])(this,{answers:n,survey:i,surveyByUuid:a,homeSequence:r,previousQuestion:l,questionSuggestions:u,types:c,opinions:d})};d.$inject=["$resource","resourceInterceptor"];var p=l["default"].module("surveysApi",[c["default"]]).config(["$resourceProvider",function(e){"ngInject";e.defaults.stripTrailingSlashes=!1}]).service("surveysApi",d);exports["default"]=p.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(549),o=n(a),r=s["default"].module("surveyOpinions",[]).component("ygSurveyOpinions",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(550),l=n(r),u=function(){function e(t,n){"ngInject";(0,s["default"])(this,e),this.$element=t,this.labels=n.i18n}return e.$inject=["$element","applicationData"],(0,o["default"])(e,[{key:"$onInit",value:function(){this.header=this.opinionsData.header,this.subheader=this.opinionsData.subheader,this.displayReturnButton=!1}},{key:"remove",value:function(){this.opinionsData=null}},{key:"showReturnButton",value:function(e){this.displayReturnButton=e}},{key:"changeHeaders",value:function(e,t){this.header=e||this.opinionsData.header,this.subheader=t||this.opinionsData.subheader}}]),e}(),c={bindings:{opinionsData:"<",isEmbedded:"<?"},controller:u,template:l["default"],transclude:{actionBoxSlot:"ygSurveyOpinionsActionBox"}};exports["default"]=c},function(e,exports){e.exports='<div class="widget widget-container clearfix"> <div class="widget-icon svgi icon-widget-surveys"></div> <div class="opinionWidget widget-content from-survey clearfix"> <div> <div class="widget-header clearfix"> <span class="header-text box-heading-label">{[{ ::$ctrl.header }]}</span> <button ng-show=$ctrl.displayReturnButton class="return-btn action-btn"> {[{ ::$ctrl.labels.general.return }]} <i class=icon-return></i> </button> <button ng-show=!$ctrl.displayReturnButton ng-click=$ctrl.remove() class="close-btn action-btn">&times;</button> </div> <div class=sub-header ng-bind-html=::$ctrl.subheader></div> </div> <opinions opinion-widget-data=$ctrl.opinionsData is-embedded=$ctrl.isEmbedded class=responses type=latest show-load-more-opinions=false show-return-button=$ctrl.showReturnButton(value)></opinions> <ul class="outro-actions hidden-xs" ng-if="::$ctrl.outro_actions.length > 0"> <li ng-repeat="::outro_action in ::$ctrl.outro_actions"> <a ng-attr-target="{[{ $ctrl.outro_actions.outro_action.new_window &&\n                                       $ctrl.outro_actions.targetBlank ||\n                                       $ctrl.outro_actions.targetSelf }]}" href="{[{ $ctrl.outro_action.href }]}"> <span class="go-to-page red"></span> <span class=label>{[{ outro_action.label }]}</span> </a> </li> </ul> </div> </div> <div ng-transclude=actionBoxSlot></div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(371),o=n(a),r=t(175),l=n(r),u=t(176),c=n(u),d=t(552),p=n(d),g=function(){function e(t,n,i,s,a){"ngInject";(0,l["default"])(this,e),this.$element=t,this.$location=n,this.dataForSave=null,this.appContextSrv=i,this.labels=s.labels,this.surveysApi=a,this.prevQuestions=[],this.currentQuestion=0}return e.$inject=["$element","$location","appContextSrv","applicationData","surveysApi"],(0,c["default"])(e,[{key:"$onInit",value:function(){this.header=this.surveyData.name,this.setDefaultNavButtonsValues(),this.surveyData.live_now&&(this.shareBox={link:[this.$location.protocol(),"://",this.$location.host(),"/opi/survey/",this.surveyData.uuid,"/question/",this.surveyData.question.uuid].join(""),title:this.labels.take_survey_title+" "+this.surveyData.name},this.resultsLink="/opi/surveys/results/#/survey/"+this.surveyData.uuid)}},{key:"setDefaultNavButtonsValues",value:function(){this.disableNextQuestionButton=void 0===this.surveyData.question.selected_answers,this.disablePrevQuestionButton=0===this.currentQuestion}},{key:"disableNavButtons",value:function(){this.disableNextQuestionButton=!0,this.disablePrevQuestionButton=!0}},{key:"dismiss",value:function(){this.surveysApi.survey.dismiss({surveyUuid:this.surveyData.uuid}),this.remove()}},{key:"remove",value:function(){this.surveyData=null}},{key:"loadOpinions",value:function(){var e=this;this.isLoadingOpinions=!0,this.surveysApi.opinions.get({},{survey_uuid:this.surveyData.uuid}).$promise.then(function(t){e.remove(),t.length>0&&t[0].data.length>0&&(e.surveyOpinions=t.pop())})["finally"](function(){e.isLoadingOpinions=!1})}},{key:"displaySuccessBanner",value:function(){this.$element.css({height:this.$element.height()}),this.remove(),this.finishSurveyBanner=!0,this.$element.css({overflow:"hidden"}).velocity({opacity:0},{duration:300,delay:1e3}).velocity({height:0,"min-height":0,margin:0})}},{key:"onSurveyUpdate",value:function(e){this.dataForSave=e}},{key:"addToQuestionsStack",value:function(e,t){var n=e.question,i=t.simple_choices,a=t.list_choices,r=t.text_choice,l=[];if(["single-select","multi-select"].find(function(e){return e===n.type})){var u=i?[].concat((0,o["default"])(i)):[];l=u.map(function(e){if(r){var t=r.find(function(t){return t.answer_option_uuid===e.answer_option_uuid});t&&(e.text_choice=t)}return e})}else l=["open-int","open-text"].find(function(e){return e===n.type})?r?[].concat((0,o["default"])(r)):[]:a?[].concat((0,o["default"])(a)):[];this.prevQuestions=[].concat((0,o["default"])(this.prevQuestions.filter(function(e){var t=e.uuid;return t!==n.uuid})),[(0,s["default"])({},n,{selected_answers:l})])}},{key:"removeFromQuestionsStack",value:function(e){var t=e.question;this.prevQuestions=this.prevQuestions.filter(function(e){var n=e.uuid;return n!==t.uuid})}},{key:"nextQuestion",value:function(){var e=this;this.dataForSave&&(this.isNextQuestionLoading=!0,this.showErrorMessage=!1,this.disableNavButtons(),this.surveysApi.answers.save(this.dataForSave).$promise.then(function(t){e.isNextQuestionLoading=!1,t.uuid&&t.question.uuid?(e.addToQuestionsStack(e.surveyData,e.dataForSave),e.currentQuestion+=1,e.surveyData=(0,s["default"])({},t),e.setDefaultNavButtonsValues()):e.appContextSrv.device.isMobile?e.displaySuccessBanner():(e.loadOpinions(),e.surveyData=null)})["catch"](function(){e.showErrorMessage=!0,e.isNextQuestionLoading=!1,e.setDefaultNavButtonsValues()}))}},{key:"prevQuestion",value:function(){this.currentQuestion>0&&(this.showErrorMessage=!1,this.disableNavButtons(),this.currentQuestion-=1,this.surveyData=(0,s["default"])({},this.surveyData,{question:this.prevQuestions[this.currentQuestion]}),this.removeFromQuestionsStack(this.surveyData),this.setDefaultNavButtonsValues())}},{key:"getSuggestions",value:function(e){return this.surveysApi.questionSuggestions.get({surveyUuid:this.surveyData.uuid,questionUuid:this.surveyData.question.uuid,term:e.term,page:e.page},{})}},{key:"getTypes",value:function(){return this.surveysApi.types.get({surveyUuid:this.surveyData.uuid,questionUuid:this.surveyData.question.uuid},{}).$promise}},{key:"getSurveyMetadata",value:function(){return{surveyUuid:this.surveyData.uuid,questionUuid:this.surveyData.question.uuid}}}]),e}(),f={bindings:{surveyData:"<"},controller:g,template:p["default"]};exports["default"]=f},function(e,exports){e.exports='<yg-survey ng-if=$ctrl.surveyData survey-uuid=$ctrl.surveyData.uuid questions=[$ctrl.surveyData.question] on-survey-update=$ctrl.onSurveyUpdate(survey) get-suggestions="$ctrl.getSuggestions({term, page})" get-next-question=$ctrl.nextQuestion() get-types=$ctrl.getTypes() get-survey-metadata=$ctrl.getSurveyMetadata() on-answer-validity-change="$ctrl.disableNextQuestionButton = !validity" ng-class="{\'disabled\': $ctrl.isPrevQuestionLoading || $ctrl.isNextQuestionLoading,\n                      \'live\': $ctrl.surveyData.live_now}"> <yg-survey-header> <div class="widget-icon svgi icon-widget-surveys"></div> <span class=survey-header-label> <span ng-if=$ctrl.surveyData.live_now class=hidden-xs>{[{ ::$ctrl.labels.live_survey_of_the_day }]}:</span> {[{ ::$ctrl.header }]} <button ng-click=$ctrl.dismiss() class="hidden-xs dismiss-btn">&times;</button> </span> </yg-survey-header> <yg-survey-action-box> <div class=survey-nav> <button class="question-prev btn-question-nav" ng-disabled=$ctrl.disablePrevQuestionButton ng-click=$ctrl.prevQuestion($event) ng-class="{\'question-loading\': $ctrl.isPrevQuestionLoading}"> <span class="svgi icon-arrow-left"></span> <span class=visible-xs>{[{ ::$ctrl.labels.prev }]}</span> </button> <button class="question-next btn-question-nav" ng-disabled=$ctrl.disableNextQuestionButton ng-click=$ctrl.nextQuestion($event) ng-class="{\'question-loading\': $ctrl.isNextQuestionLoading}"> <span class="svgi icon-arrow-right"></span> <span class=visible-xs>{[{ ::$ctrl.labels.next }]}</span> </button> </div> <div ng-if=$ctrl.surveyData.live_now class=live-results-area> <div class=live-result-label> <span class="svgi icon-survey-results"></span> <a ng-href="{[{ ::$ctrl.resultsLink }]}">{[{ ::$ctrl.labels.view_interim_results }]}</a> </div> <div share-box=$ctrl.shareBox share-icon-type=grey-light class=share-box-container></div> </div> <div class=error-message ng-show=$ctrl.showErrorMessage>{[{ ::$ctrl.labels.loading_question_error }]}</div> </yg-survey-action-box> </yg-survey> <success-banner class=success-banner ng-if=$ctrl.finishSurveyBanner></success-banner> <div ng-if=$ctrl.isLoadingOpinions class=mini-loader></div> <yg-survey-opinions ng-if=$ctrl.surveyOpinions opinions-data=$ctrl.surveyOpinions> <yg-survey-opinions-action-box></yg-survey-opinions-action-box> </yg-survey-opinions> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(554),o=n(a),r=s["default"].module("ygWaterfallSequenceCompleted",[]).component("ygWaterfallSequenceCompleted",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(419),o=n(a),r=t(555),l=n(r),u=new o["default"],c=function p(e,t){"ngInject";(0,s["default"])(this,p),u.set(this,{applicationData:e,waterfallSequenceSrv:t}),this.sequence=t,this.appData=e};c.$inject=["applicationData","waterfallSequenceSrv"];var d={bindings:{changeSequence:"<"},controller:c,template:l["default"]};exports["default"]=d},function(e,exports){e.exports='<div class="waterfall-sequence-completed widget-content"> <div class=sub-header> {[{ $ctrl.appData.i18n.home.whatTopicNext }]} </div> <div> {[{ seq.label }]} </div> <div ng-repeat="seq in $ctrl.sequence.available | filterOutBy:\'disabled\'" ng-if="seq.label && seq.uuid" ng-click=$ctrl.changeSequence(seq) class=answer-option> <span class=pseudo-checkbox></span> <span class=answer-label>{[{ seq.label }]}</span> </div> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(557),o=n(a),r=s["default"].module("surveyWaterfall",[]).component("ygSurveyWaterfall",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(419),l=n(r),u=t(558),c=n(u),d=new l["default"],p=function(){function e(t,n,i,a,o,r){"ngInject";(0,s["default"])(this,e),d.set(this,{$location:t,applicationData:n,appContextSrv:i,surveysApi:a,anonymousAnswersSrv:o,waterfallSequenceSrv:r}),this.questionData.question&&(this.shareBox={link:[t.protocol(),"://",t.host(),"/opi/survey/",this.questionData.uuid,"/question/",this.questionData.question.uuid].join(""),title:"Take today’s YouGov survey on "+this.questionData.name}),this.header=this.questionData.name,this.multiSelectNext=!1,this.questionAnswered=!1,this.dataToSave=null}return e.$inject=["$location","applicationData","appContextSrv","surveysApi","anonymousAnswersSrv","waterfallSequenceSrv"],(0,o["default"])(e,[{key:"onSurveyUpdate",value:function(e){var t=this,n=d.get(this),i=n.surveysApi;this.dataToSave=e,i.answers.save(this.dataToSave).$promise.then(function(e){t.questionAnswered=!0,t.multiSelectNext=!1,e.question?t.nextQuestion(e,!0):t.nextSurvey()})["catch"](function(e){console.error("error",e)})}}]),e}(),g={bindings:{questions:"<",questionData:"<",nextSurvey:"<",nextQuestion:"<",changeSequence:"<"},controller:p,template:c["default"]};exports["default"]=g},function(e,exports){e.exports='<div class="widget-container waterfall-question-wrapper" ng-class="{first: !$ctrl.questionAnswered}"> <yg-survey ng-if="$ctrl.questionData.type !== \'login\' && $ctrl.questionData.type !== \'sequenceCompleted\'" class="miniSurveysWidget clearfix mini-survey widget-content" survey-uuid=$ctrl.questionData.uuid questions=[$ctrl.questionData.question] get-next-question=$ctrl.nextQuestion() on-survey-update="$ctrl.onSurveyUpdate(survey, false)" on-answer-validity-change=$ctrl.reactToAnswerValidityChange(validity) ng-class="{\'disabled\': $ctrl.questionAnswered}"> <yg-survey-header> <div class=time-remaining> <div class="survey-icon svgi icon-widget-surveys"></div> <span class=survey-name> {[{ ::$ctrl.header }]} </span> </div> </yg-survey-header> <yg-survey-action-box> <div class="pull-right waterfall-next"> <button class="btn btn-default" ng-click=$ctrl.getNextQuestion() ng-if=$ctrl.multiSelectNext>Next</button> <div share-box=$ctrl.shareBox share-icon-type=grey-light class=share-box-container></div> </div> </yg-survey-action-box> </yg-survey> <div ng-if="$ctrl.questionData.type === \'login\'" login-question></div> <yg-waterfall-sequence-completed change-sequence=$ctrl.changeSequence ng-if="$ctrl.questionData.type === \'sequenceCompleted\'"> </yg-waterfall-sequence-completed> <success-banner class=success-banner ng-if=$ctrl.finishSurveyBanner></success-banner> </div> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(384),o=n(a),r=t(547),l=n(r),u=t(548),c=n(u),d=t(560),p=n(d),g=s["default"].module("gryphonSurvey",[o["default"],l["default"],c["default"]]).component("ygGryphonSurvey",p["default"]);exports["default"]=g.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(155),s=n(i),a=t(371),o=n(a),r=t(175),l=n(r),u=t(176),c=n(u),d=t(561),p=n(d),g=function(){function e(t,n,i,s,a){"ngInject";(0,l["default"])(this,e),this.$element=t,this.$location=n,this.dataForSave=null,this.appContextSrv=i,this.labels=s.labels,this.surveysApi=a,this.prevQuestions=[],this.currentQuestion=0}return e.$inject=["$element","$location","appContextSrv","applicationData","surveysApi"],(0,c["default"])(e,[{key:"$onInit",value:function(){this.header=this.surveyData.name,this.setDefaultNavButtonsValues()}},{key:"setDefaultNavButtonsValues",value:function(){this.hideNextQuestionButton=void 0===this.surveyData.question.selected_answers,this.hidePrevQuestionButton=0===this.currentQuestion}},{key:"hideNavButtons",value:function(){this.hideNextQuestionButton=!0,this.hidePrevQuestionButton=!0}},{key:"remove",value:function(){this.surveyData=null}},{key:"loadOpinions",value:function(){var e=this;this.isLoadingOpinions=!0,this.surveysApi.opinions.get({},{survey_uuid:this.surveyData.uuid}).$promise.then(function(t){e.remove(),t.length>0&&t[0].data.length>0?e.surveyOpinions=t.pop():e.onSurveyFinish()})["finally"](function(){e.isLoadingOpinions=!1})}},{key:"displaySuccessBanner",value:function(){this.$element.css({height:this.$element.height()}),this.remove(),this.finishSurveyBanner=!0,this.$element.css({overflow:"hidden"}).velocity({opacity:0},{duration:300,delay:1e3}).velocity({height:0,"min-height":0,margin:0})}},{key:"onSurveyUpdate",value:function(e){this.dataForSave=e}},{key:"addToQuestionsStack",value:function(e,t){var n=e.question,i=t.simple_choices,a=t.list_choices,r=t.text_choice,l=[];l=["single-select","multi-select"].find(function(e){return e===n.type})?i?[].concat((0,o["default"])(i)):[]:["open-int","open-text"].find(function(e){return e===n.type})?r?[].concat((0,o["default"])(r)):[]:a?[].concat((0,o["default"])(a)):[],this.prevQuestions=[].concat((0,o["default"])(this.prevQuestions.filter(function(e){var t=e.uuid;return t!==n.uuid})),[(0,s["default"])({},n,{selected_answers:l})])}},{key:"removeFromQuestionsStack",value:function(e){var t=e.question;this.prevQuestions=this.prevQuestions.filter(function(e){var n=e.uuid;return n!==t.uuid})}},{key:"nextQuestion",value:function(){var e=this;this.dataForSave&&(this.isNextQuestionLoading=!0,this.showErrorMessage=!1,this.hideNavButtons(),this.surveysApi.answers.save(this.dataForSave).$promise.then(function(t){e.isNextQuestionLoading=!1,t.uuid&&t.question.uuid?(e.addToQuestionsStack(e.surveyData,e.dataForSave),e.currentQuestion+=1,e.surveyData=(0,s["default"])({},t),e.setDefaultNavButtonsValues()):e.appContextSrv.device.isMobile?e.displaySuccessBanner():e.loadOpinions()})["catch"](function(){e.showErrorMessage=!0,e.isNextQuestionLoading=!1,e.hideNextQuestionButton=!1}))}},{key:"prevQuestion",value:function(){this.currentQuestion>0&&(this.showErrorMessage=!1,this.hideNavButtons(),this.currentQuestion-=1,this.surveyData=(0,s["default"])({},this.surveyData,{question:this.prevQuestions[this.currentQuestion]}),this.removeFromQuestionsStack(this.surveyData),this.setDefaultNavButtonsValues())}},{key:"getSuggestions",value:function(e){return this.surveysApi.questionSuggestions.get({surveyUuid:this.surveyData.uuid,questionUuid:this.surveyData.question.uuid,term:e.term,page:e.page},{})}},{key:"getTypes",value:function(){return this.surveysApi.types.get({surveyUuid:this.surveyData.uuid,questionUuid:this.surveyData.question.uuid},{}).$promise}},{key:"getSurveyMetadata",value:function(){return{surveyUuid:this.surveyData.uuid,questionUuid:this.surveyData.question.uuid}}}]),e}(),f={bindings:{surveyData:"<",onSurveyFinish:"&?",exitSurvey:"&"},controller:g,template:p["default"]};exports["default"]=f},function(e,exports){e.exports='<yg-survey ng-if=$ctrl.surveyData survey-uuid=$ctrl.surveyData.uuid questions=[$ctrl.surveyData.question] on-survey-update=$ctrl.onSurveyUpdate(survey) get-suggestions="$ctrl.getSuggestions({term, page})" get-next-question=$ctrl.nextQuestion() get-types=$ctrl.getTypes() get-survey-metadata=$ctrl.getSurveyMetadata() on-answer-validity-change="$ctrl.hideNextQuestionButton = !validity" ng-class="{\'disabled\': $ctrl.isPrevQuestionLoading || $ctrl.isNextQuestionLoading,\n                      \'live\': $ctrl.surveyData.live_now}"> <yg-survey-header class=header></yg-survey-header> <yg-survey-action-box> <div class=question-loader ng-show="$ctrl.isPrevQuestionLoading || $ctrl.isNextQuestionLoading"> <img src=/opi/images/content-mini-loader.gif /> </div> <div class=survey-nav> <button class="question-prev btn-question-nav" ng-click=$ctrl.prevQuestion($event) ng-class="{\'hidden\': $ctrl.hidePrevQuestionButton}"> <span class="svgi icon-arrow-left"></span> <span class=visible-xs>{[{ ::$ctrl.labels.prev }]}</span> </button> <button class="question-next btn-question-nav yg-btn yg-btn-inverse" ng-click=$ctrl.nextQuestion($event) ng-class="{\'hidden\': $ctrl.hideNextQuestionButton}"> <span class="svgi icon-arrow-right"></span> <span class=visible-xs>{[{ ::$ctrl.labels.next }]}</span> </button> </div> <div class=error-message ng-show=$ctrl.showErrorMessage> {[{ ::$ctrl.labels.loading_question_error }]} {[{ ::$ctrl.labels.loading_question_error_or }]} <button ng-click=$ctrl.exitSurvey() class="btn btn-inline">{[{ ::$ctrl.labels.loading_question_error_link }]}</button> </div> </yg-survey-action-box> </yg-survey> <success-banner class=success-banner ng-if=$ctrl.finishSurveyBanner></success-banner> <div ng-if=$ctrl.isLoadingOpinions class=mini-loader></div> <yg-survey-opinions ng-if=$ctrl.surveyOpinions is-embedded=true opinions-data=$ctrl.surveyOpinions> <yg-survey-opinions-action-box> <div class=survey-nav> <button class="question-next btn-question-nav yg-btn yg-btn-inverse" ng-click=$ctrl.onSurveyFinish()> <span class="svgi icon-arrow-right"></span> </button> </div> </yg-survey-opinions-action-box> </yg-survey-opinions> '},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(131),s=n(i),a=t(563),o=n(a),r=s["default"].module("marketoPopup",[]).component("ygMarketoPopup",o["default"]);exports["default"]=r.name},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(175),s=n(i),a=t(176),o=n(a),r=t(419),l=n(r),u=t(103),c=n(u),d=t(564),p=n(d),g=new l["default"],f=function(){function e(t,n){"ngInject";(0,s["default"])(this,e),g.set(this,{$timeout:t}),this.appData=n,this.formSelector="#mktoForm_"+this.formId}return e.$inject=["$timeout","applicationData"],(0,o["default"])(e,[{
key:"$onInit",value:function(){var e=this,t=g.get(this),n=t.$timeout;n(function(){e.ctx=(0,c["default"])(e.formSelector)},0),window.MktoForms2&&(n(this.loadForm(),2e3),n(this.showMarketoModal,15e3))}},{key:"loadForm",value:function(){var e=this;window.MktoForms2.loadForm("//app-lon03.marketo.com","060-QFD-941",this.formId,function(t){function n(){return(0,c["default"])("button",this.ctx).html(this.getTranslatedLabel("successButtonText")),window.setTimeout(function(){(0,c["default"])(".remodal-overlay a.remodal-close").click()},1500),!1}function i(){return(0,c["default"])(".error-msg",this.ctx).remove(),t.allFieldsFilled()?void t.submittable(!0):(t.submittable(!1),void(0,c["default"])(".mktoButtonRow",this.ctx).before(['<div class="error-msg">',this.getTranslatedLabel("errorMsg"),"</div>"].join("")))}e.removeDefaultStyles(),e.addShadow(),e.addHeader(),(0,c["default"])('input[type!="hidden"]',e.ctx).each(e.changeLabelIntoPlaceholder),(0,c["default"])("select",e.ctx).each(e.wrapWithCustomStyles),t.onValidate(i),t.onSuccess(n),(0,c["default"])('textarea[type!="hidden"]',e.ctx).attr("placeholder","How can we help?")})}},{key:"showMarketoModal",value:function(){(0,c["default"])(".marketo-modal .remodal-overlay").fadeIn("slow",function(){})}},{key:"closeMarketoModal",value:function(){(0,c["default"])(".marketo-modal .remodal-overlay").fadeOut("slow",function(){})}},{key:"removeDefaultStyles",value:function(){(0,c["default"])("style",this.ctx).remove()}},{key:"addShadow",value:function(){(0,c["default"])(".mktoFormRow",this.ctx).wrapAll('<div class="shadow"></div>')}},{key:"addHeader",value:function(){(0,c["default"])(".shadow",this.ctx).prepend(['<div class="form-header">',"Request call back","</div>"].join(""))}},{key:"changeLabelIntoPlaceholder",value:function(e,t){var n=(0,c["default"])('label[for="'+t.id+'"]',this.ctx),i=(0,c["default"])(n[0],this.ctx),s=i.contents().filter(function(){return 3===this.nodeType}).text().replace(/:/,"");(0,c["default"])(t).attr("placeholder",s)}},{key:"wrapWithCustomStyles",value:function(e,t){(0,c["default"])(t).wrap('<div class="select-wrapper">')}},{key:"getTranslatedLabel",value:function(e){switch(window.angular_data.site_id){case 52:return window.angular_data.i18n.de.contactUsModal[e];case 53:return window.angular_data.i18n.uk.contactUsModal[e];case 54:return window.angular_data.i18n.us.contactUsModal[e];default:return"Contact Us"}}}]),e}(),v={bindings:{formId:"@",currentPage:"@"},controller:f,template:p["default"]};exports["default"]=v},function(e,exports){e.exports='<div class=marketo-modal> <div class=remodal-overlay ng-click=$ctrl.closeMarketoModal()> <a href=javascript:void(0) class=remodal-close ng-click=$ctrl.closeMarketoModal()>x</a> <div class="remodal info-modal contact-us-modal" onclick="event.stopPropagation&&event.stopPropagation(),event.cancelBubble=!0" data-modal-id=contact id=contact-modal> <h2 class=title>{{$ctrl.appData.i18n.marketo.popup.title}} {{$ctrl.currentPage}}?</h2> <header class=header>{{$ctrl.appData.i18n.marketo.popup.header}}</header> <div class=modal-content> <form id=mktoForm_{{$ctrl.formId}}></form> </div> <footer class=footer>{{$ctrl.appData.i18n.marketo.popup.contact}}</footer> </div> </div> </div> '}]);